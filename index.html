<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#000000" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="color-scheme" content="dark" />
    <title>LinkShort â€” Professional URL Shortener & Link Management Platform</title>

    <style>
      html {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
      }
      
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }
      
      @media (max-width: 768px) {
        * { will-change: auto !important; }
      }

      :root {
        --ios-card-bg: rgba(29, 29, 31, 0.72);
        --ios-card-border: rgba(255, 255, 255, 0.12);
        --ios-separator: rgba(255, 255, 255, 0.1);
        --gradient-primary: linear-gradient(135deg, #0a84ff 0%, #0070d6 100%);
        --gradient-success: linear-gradient(135deg, #30d158 0%, #2abc50 100%);
        --gradient-purple: linear-gradient(135deg, #bf5af2 0%, #ad4fd9 100%);
        --text-primary: rgba(255, 255, 255, 0.95);
        --text-secondary: rgba(235, 235, 245, 0.75);
        --text-tertiary: rgba(235, 235, 245, 0.45);
        --radius-medium: 50px;
        --radius-small: 50px;
        --apple-blue: #0a84ff;
        --apple-blue-dark: #409cff;
        --apple-gray: #1d1d1f;
        --apple-gray-dark: #2c2c2e;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        -webkit-tap-highlight-color: rgba(10, 132, 255, 0.2);
        -webkit-touch-callout: none;
      }
      
      @media (max-width: 768px) {
        button, a, input, select, textarea {
          min-height: 44px;
          min-width: 44px;
        }
      }

      html, body { height: 100%; overflow-x: hidden; }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
        background: linear-gradient(180deg, #000000 0%, #1d1d1f 100%) fixed;
        color: var(--text-primary);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        min-height: 100vh;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: none;
      }

      body.modal-open { overflow: hidden; }

      .orb { display: none; }

      .nav-bar {
        position: sticky;
        top: 0;
        z-index: 100;
        background: rgba(29, 29, 31, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--ios-separator);
        padding: 20px 32px;
        transform: translateZ(0);
      }
      
      @media (max-width: 768px) {
        .nav-bar {
          background: rgba(29, 29, 31, 0.98);
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
        }
      }

      .nav-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .nav-title {
        font-size: 18px;
        font-weight: 600;
        letter-spacing: -0.3px;
        color: var(--text-primary);
        display: flex;
        align-items: center;
      }

      .nav-actions {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--apple-blue);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: 600;
        color: white;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .user-avatar:hover {
        transform: scale(1.05);
        background: var(--apple-blue-dark);
      }

      .user-email {
        font-size: 13px;
        color: var(--text-secondary);
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .nav-btn {
        padding: 8px 16px;
        border-radius: var(--radius-small);
        background: var(--apple-gray);
        border: 1px solid var(--ios-card-border);
        color: var(--text-primary);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .nav-btn:hover {
        background: var(--apple-gray-dark);
        transform: translateY(-1px);
      }

      .nav-btn:active {
        transform: scale(0.98);
      }

      .nav-btn-primary {
        background: var(--apple-blue);
        border: none;
        color: white;
        box-shadow: 0 2px 8px rgba(0, 113, 227, 0.25);
      }

      .nav-btn-primary:hover {
        background: var(--apple-blue-dark);
        box-shadow: 0 4px 12px rgba(0, 113, 227, 0.35);
        transform: translateY(-2px);
      }

      .nav-btn-danger {
        background: #ff3b30;
        border: none;
        color: white;
        box-shadow: 0 2px 8px rgba(255, 59, 48, 0.25);
      }

      .nav-btn-danger:hover {
        background: #ff453a;
        box-shadow: 0 4px 12px rgba(255, 59, 48, 0.35);
        transform: translateY(-2px);
      }

      /* Main container */
      .container {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 80px 40px 100px;
      }

      /* Content Layout with Sidebar */
      .content-with-sidebar {
        display: grid;
        grid-template-columns: 1fr 360px;
        gap: 32px;
        align-items: start;
      }

      .main-content {
        min-width: 0;
      }

      .sidebar {
        position: sticky;
        top: 120px;
        max-height: calc(100vh - 140px);
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
      }

      .sidebar::-webkit-scrollbar {
        width: 6px;
      }

      .sidebar::-webkit-scrollbar-track {
        background: transparent;
      }

      .sidebar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 3px;
      }

      .sidebar::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      @media (max-width: 1024px) {
        .content-with-sidebar {
          grid-template-columns: 1fr;
        }

        .sidebar {
          position: relative;
          top: 0;
          max-height: none;
        }
      }

      /* Hero section */
      .hero-section {
        text-align: center;
        margin-bottom: 80px;
        padding: 20px 0;
      }

      .hero-logo {
        width: 120px;
        height: 120px;
        margin: 0 auto 32px;
        position: relative;
      }

      .logo-svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 10px 40px rgba(0, 122, 255, 0.4));
      }

      .hero-title {
        font-size: clamp(44px, 6vw, 68px);
        font-weight: 800;
        letter-spacing: -2.5px;
        margin-bottom: 32px;
        line-height: 1.15;
        color: var(--text-primary);
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
          "Helvetica Neue", Arial, sans-serif;
      }

      .title-accent {
        color: #0a84ff;
        background: linear-gradient(135deg, #0a84ff 0%, #0070d6 100%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        display: inline-block;
        font-weight: 900;
      }

      .hero-subtitle {
        font-size: clamp(17px, 2vw, 20px);
        color: rgba(235, 235, 245, 0.75);
        max-width: 650px;
        margin: 0 auto 20px;
        line-height: 1.7;
        font-weight: 500;
      }

      .glass-card {
        background: rgba(29, 29, 31, 0.7);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border-radius: 50px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        padding: 56px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        margin-bottom: 32px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        transform: translateZ(0);
      }

      @media (max-width: 768px) {
        .glass-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          background: rgba(29, 29, 31, 0.95);
          padding: 24px;
          border-radius: 24px;
        }
        .glass-card::before { display: none; }
      }

      .glass-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(10, 132, 255, 0.05), transparent);
        transition: left 0.6s ease;
        pointer-events: none;
      }

      .glass-card:hover::before { left: 100%; }

      .glass-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(10, 132, 255, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        border-color: rgba(10, 132, 255, 0.4);
        background: rgba(29, 29, 31, 0.85);
      }
      
      @media (hover: none) and (pointer: coarse) {
        .glass-card:hover { transform: none; }
      }

      /* Input section */
      .input-section {
        margin-bottom: 32px;
      }

      .section-label {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1.2px;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 8px;
        transition: border-color 0.2s ease, background 0.2s ease;
        transform: translateZ(0);
      }
      
      @media (max-width: 768px) {
        .input-wrapper {
          border-radius: 16px;
        }
      }

      .input-wrapper:focus-within {
        border-color: var(--apple-blue);
        background: rgba(10, 132, 255, 0.1);
        box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.15);
        transform: translateY(-2px);
      }
      
      @media (max-width: 768px) {
        .input-wrapper:focus-within {
          transform: none;
          box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.3);
        }
      }

      .input-icon {
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      input[type="url"] {
        flex: 1;
        background: transparent;
        border: none;
        outline: none;
        color: var(--text-primary);
        font-size: 17px;
        padding: 16px 14px;
        font-weight: 500;
      }

      input::placeholder {
        color: var(--text-tertiary);
      }

      /* Custom slug styles */
      .custom-slug-container {
        margin-top: 12px;
      }

      .custom-slug-wrapper {
        display: flex;
        align-items: center;
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 8px 8px 8px 20px;
        transition: all 0.3s ease;
      }

      .custom-slug-wrapper:focus-within {
        border-color: var(--apple-blue);
        background: rgba(10, 132, 255, 0.1);
        box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.15);
      }

      .slug-prefix {
        font-size: 15px;
        color: var(--text-secondary);
        font-weight: 600;
        white-space: nowrap;
        font-family: "SF Mono", "Menlo", monospace;
      }

      #customSlugInput {
        flex: 1;
        background: transparent;
        border: none;
        outline: none;
        color: var(--text-primary);
        font-size: 17px;
        padding: 16px 14px;
        font-weight: 600;
        font-family: "SF Mono", "Menlo", monospace;
      }

      #customSlugInput::placeholder {
        color: var(--text-tertiary);
        font-weight: 500;
      }

      .slug-info {
        margin-top: 12px;
        font-size: 14px;
        padding: 0 4px;
        min-height: 20px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .slug-info.available {
        color: #34c759;
      }

      .slug-info.taken {
        color: #ff375f;
      }

      .slug-info.invalid {
        color: #ff9500;
      }

      .slug-info-icon {
        font-size: 14px;
      }

      /* Auth Form Styles */
      .auth-form {
        max-width: 480px;
        margin: 0 auto;
      }

      .form-group {
        margin-bottom: 28px;
        position: relative;
      }

      .form-label {
        display: block;
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 10px;
      }

      .form-input-wrapper {
        position: relative;
        display: flex;
        align-items: center;
      }

      .form-input {
        width: 100%;
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 16px 20px;
        color: var(--text-primary);
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: var(--apple-blue);
        background: rgba(10, 132, 255, 0.1);
        box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.15);
      }

      .form-input::placeholder {
        color: var(--text-tertiary);
      }

      .password-toggle {
        position: absolute;
        right: 12px;
        background: rgba(58, 58, 60, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 8px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--text-secondary);
        font-size: 18px;
      }

      .password-toggle:hover {
        background: rgba(255, 255, 255, 0.15);
        color: var(--text-primary);
        transform: scale(1.05);
      }

      .password-toggle:active {
        transform: scale(0.95);
      }

      .form-checkbox-group {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 20px;
      }

      .form-checkbox {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }

      .form-checkbox-label {
        font-size: 14px;
        color: var(--text-secondary);
        cursor: pointer;
      }

      .form-link {
        color: #667eea;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
      }

      .form-link:hover {
        text-decoration: underline;
      }

      .form-divider {
        text-align: center;
        margin: 24px 0;
        color: var(--text-tertiary);
        font-size: 14px;
      }

      /* Dashboard Styles */
      .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 48px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .dashboard-title {
        font-size: 36px;
        font-weight: 800;
        letter-spacing: -1px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 24px;
        margin-bottom: 48px;
      }

      .stat-card {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 28px 24px;
        text-align: center;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
      }

      .stat-value {
        font-size: 40px;
        font-weight: 800;
        margin-bottom: 10px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      @keyframes countUp {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .stat-label {
        font-size: 15px;
        color: var(--text-secondary);
        font-weight: 600;
      }

      .dashboard-links {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .link-card {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 28px 24px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(20px);
      }

      .link-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(10, 132, 255, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .link-card:hover::before {
        left: 100%;
      }

      .link-card:hover {
        background: rgba(58, 58, 60, 0.6);
        border-color: var(--apple-blue);
        transform: translateX(4px);
        box-shadow: 0 4px 16px rgba(10, 132, 255, 0.2);
      }

      .link-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
        gap: 16px;
      }

      .link-card-info {
        flex: 1;
        min-width: 0;
      }

      .link-card-short {
        font-size: 18px;
        font-weight: 700;
        color: var(--apple-blue);
        margin-bottom: 6px;
        font-family: "SF Mono", "Menlo", monospace;
        word-break: break-all;
      }

      .link-card-original {
        font-size: 14px;
        color: var(--text-secondary);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .link-card-actions {
        display: flex;
        gap: 8px;
        flex-shrink: 0;
      }

      .link-action-btn {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(58, 58, 60, 0.6);
        color: var(--text-primary);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .link-action-btn::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.5s ease, height 0.5s ease;
      }

      .link-action-btn:hover::before {
        width: 100px;
        height: 100px;
      }

      .link-action-btn:hover {
        background: rgba(72, 72, 74, 0.8);
        border-color: rgba(255, 255, 255, 0.24);
        transform: scale(1.1);
      }

      .link-action-btn:active {
        transform: scale(0.95);
        transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .link-action-btn.edit {
        background: rgba(255, 159, 10, 0.2);
        color: #ff9f0a;
        border: 1px solid rgba(255, 159, 10, 0.3);
      }

      .link-action-btn.edit:hover {
        background: rgba(255, 159, 10, 0.3);
        box-shadow: 0 0 20px rgba(255, 159, 10, 0.4);
      }

      .link-action-btn.delete {
        background: rgba(255, 69, 58, 0.2);
        color: #ff453a;
        border: 1px solid rgba(255, 69, 58, 0.3);
      }

      .link-action-btn.delete:hover {
        background: rgba(255, 69, 58, 0.3);
        box-shadow: 0 0 20px rgba(255, 69, 58, 0.4);
      }

      .link-action-btn.stats {
        background: rgba(17, 153, 142, 0.2);
        color: #11998e;
        border: 1px solid rgba(17, 153, 142, 0.3);
      }

      .link-action-btn.stats:hover {
        background: rgba(17, 153, 142, 0.3);
        box-shadow: 0 0 20px rgba(17, 153, 142, 0.4);
      }

      .link-card-meta {
        display: flex;
        gap: 24px;
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid rgba(255, 255, 255, 0.12);
        font-size: 14px;
        color: var(--text-tertiary);
      }

      .link-meta-item {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .link-meta-icon {
        font-size: 14px;
      }

      /* Bulk URL Styles */
      .bulk-textarea {
        width: 100%;
        min-height: 180px;
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 20px;
        color: var(--text-primary);
        font-size: 15px;
        font-family: "SF Mono", "Menlo", monospace;
        resize: vertical;
        transition: all 0.3s ease;
        line-height: 1.8;
      }

      .bulk-textarea:focus {
        outline: none;
        border-color: var(--apple-blue);
        background: rgba(10, 132, 255, 0.1);
        box-shadow: 0 0 0 4px rgba(10, 132, 255, 0.15);
      }

      .bulk-progress {
        margin-top: 20px;
        display: none;
      }

      .bulk-progress.show {
        display: block;
      }

      .progress-bar-container {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 12px;
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: var(--gradient-primary);
        border-radius: 20px;
        transition: width 0.3s ease;
        position: relative;
        box-shadow: 0 0 10px rgba(10, 132, 255, 0.5);
      }

      .progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: shimmer-progress 1.5s infinite;
      }

      @keyframes shimmer-progress {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .progress-text {
        font-size: 13px;
        color: var(--text-secondary);
        text-align: center;
        font-weight: 600;
      }

      .bulk-results {
        margin-top: 20px;
        max-height: 400px;
        overflow-y: auto;
      }

      .bulk-result-item {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-small);
        padding: 12px;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        animation: slideInRight 0.3s ease;
        backdrop-filter: blur(20px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .bulk-result-item.success {
        border-color: rgba(50, 215, 75, 0.4);
        background: rgba(50, 215, 75, 0.08);
      }

      .bulk-result-item.error {
        border-color: rgba(255, 69, 58, 0.4);
        background: rgba(255, 69, 58, 0.08);
      }

      .bulk-result-url {
        flex: 1;
        font-size: 13px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: var(--text-secondary);
      }

      .bulk-result-short {
        font-weight: 700;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        font-family: "SF Mono", "Menlo", monospace;
        font-size: 14px;
      }

      .bulk-result-error {
        color: #ff453a;
        font-size: 12px;
        font-weight: 600;
      }

      .bulk-copy-btn {
        background: rgba(10, 132, 255, 0.15);
        border: 1px solid rgba(10, 132, 255, 0.3);
        border-radius: 50px;
        padding: 4px 8px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        color: var(--text-primary);
        position: relative;
        overflow: hidden;
      }

      .bulk-copy-btn:hover {
        background: rgba(10, 132, 255, 0.25);
        transform: scale(1.05);
      }

      .bulk-copy-btn:active {
        transform: scale(0.95);
      }

      .bulk-stats {
        display: flex;
        gap: 16px;
        margin-top: 16px;
        padding: 16px;
        background: rgba(58, 58, 60, 0.4);
        border-radius: var(--radius-medium);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }

      .bulk-stat {
        flex: 1;
        text-align: center;
      }

      .bulk-stat-value {
        font-size: 24px;
        font-weight: 800;
        margin-bottom: 4px;
      }

      .bulk-stat-value.success {
        color: #32d74b;
      }

      .bulk-stat-value.error {
        color: #ff453a;
      }

      .bulk-stat-value.total {
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .bulk-stat-label {
        font-size: 12px;
        color: var(--text-secondary);
        font-weight: 600;
      }

      .bulk-helper {
        margin-top: 12px;
        padding: 12px;
        background: rgba(10, 132, 255, 0.08);
        border: 1px solid rgba(10, 132, 255, 0.2);
        border-radius: var(--radius-small);
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .bulk-helper strong {
        color: var(--text-primary);
      }

      .bulk-actions {
        display: flex;
        gap: 12px;
        margin-top: 16px;
      }

      .bulk-actions button {
        flex: 1;
      }

      /* Tab Navigation */
      .tab-nav {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
        background: rgba(58, 58, 60, 0.4);
        padding: 4px;
        border-radius: var(--radius-medium);
      }

      .tab-btn {
        flex: 1;
        padding: 12px 20px;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        font-size: 15px;
        font-weight: 600;
        border-radius: var(--radius-small);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .tab-btn.active {
        background: var(--gradient-primary);
        color: white;
        box-shadow: 0 4px 15px rgba(10, 132, 255, 0.5);
      }

      .tab-btn:hover:not(.active) {
        background: rgba(10, 132, 255, 0.15);
      }

      .tab-btn:active {
        transform: scale(0.98);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeInUp 0.4s ease both;
      }

      .page-container {
        display: none;
      }

      .page-container.active {
        display: block;
      }

      /* Button group */
      .button-group {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .btn {
        flex: 1;
        min-width: 160px;
        height: 56px;
        border: none;
        border-radius: var(--radius-medium);
        font-size: 17px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        touch-action: manipulation;
      }
      
      @media (max-width: 768px) {
        .btn {
          transition: none;
          min-height: 48px;
        }
      }

      .btn:active {
        transform: scale(0.97);
      }

      .btn-primary {
        background: linear-gradient(135deg, #0a84ff 0%, #0070d6 100%);
        color: white;
        box-shadow: 0 8px 24px rgba(10, 132, 255, 0.4);
      }
      
      @media (max-width: 768px) {
        .btn-primary {
          box-shadow: 0 4px 16px rgba(10, 132, 255, 0.3);
        }
      }

      .btn-primary:hover {
        box-shadow: 0 12px 40px rgba(10, 132, 255, 0.6);
        transform: translateY(-3px);
      }
      
      @media (hover: none) and (pointer: coarse) {
        .btn-primary:hover {
          transform: none;
          box-shadow: 0 4px 16px rgba(10, 132, 255, 0.3);
        }
      }

      .btn-secondary {
        background: rgba(58, 58, 60, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text-primary);
      }

      /* Result section */
      .result-section {
        display: none;
        animation: fadeInUp 0.4s ease both;
      }

      .result-section.show {
        display: block;
      }

      .result-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .result-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--gradient-success);
        border-radius: 24px;
        font-size: 14px;
        font-weight: 700;
        color: white;
        box-shadow: 0 4px 12px rgba(50, 215, 75, 0.3);
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .short-url-card {
        background: linear-gradient(
          135deg,
          rgba(10, 132, 255, 0.1),
          rgba(0, 102, 204, 0.1)
        );
        border: 2px solid rgba(10, 132, 255, 0.3);
        border-radius: var(--radius-medium);
        padding: 28px 24px;
        margin-bottom: 20px;
        box-shadow: 0 4px 16px rgba(10, 132, 255, 0.2);
        transition: all 0.3s ease;
        backdrop-filter: blur(20px);
      }

      .short-url-card:hover {
        transform: scale(1.02);
        border-color: var(--apple-blue);
        box-shadow: 0 8px 24px rgba(10, 132, 255, 0.3);
      }

      .short-url-label {
        font-size: 13px;
        color: var(--text-secondary);
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
      }

      .short-url-text {
        font-size: 22px;
        font-weight: 700;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        word-break: break-all;
        font-family: "SF Mono", "Menlo", monospace;
      }

      .action-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .action-btn {
        height: 54px;
        border: none;
        border-radius: var(--radius-small);
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .action-btn-copy {
        background: var(--gradient-primary);
        color: white;
        box-shadow: 0 4px 15px rgba(10, 132, 255, 0.4);
      }

      .action-btn-copy:hover {
        box-shadow: 0 6px 25px rgba(10, 132, 255, 0.6);
      }

      .action-btn-open {
        background: rgba(58, 58, 60, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--text-primary);
      }

      .action-btn-qr {
        background: var(--gradient-success);
        color: white;
        box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
      }

      .action-btn-qr:hover {
        box-shadow: 0 6px 25px rgba(17, 153, 142, 0.6);
      }

      .action-btn-download {
        background: var(--gradient-purple);
        color: white;
        box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
      }

      .action-btn-download:hover {
        box-shadow: 0 6px 25px rgba(118, 75, 162, 0.6);
      }

      .action-btn:hover {
        transform: translateY(-2px) scale(1.02);
      }

      .action-btn:active {
        transform: scale(0.97);
      }

      /* QR Code styles */
      .result-content-wrapper {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 32px;
        margin-top: 0;
      }

      .result-link-section {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .result-qr-section {
        display: flex;
        align-items: center;
      }

      @keyframes slideInLeft {
        from { opacity: 0; transform: translateX(-20px); }
        to { opacity: 1; transform: translateX(0); }
      }

      @keyframes slideInRight {
        from { opacity: 0; transform: translateX(20px); }
        to { opacity: 1; transform: translateX(0); }
      }

      .qr-code-card {
        width: 100%;
        background: linear-gradient(135deg, rgba(10, 132, 255, 0.12), rgba(0, 102, 204, 0.12));
        border: 2px solid rgba(10, 132, 255, 0.3);
        border-radius: var(--radius-medium);
        padding: 32px 28px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(10, 132, 255, 0.2);
        backdrop-filter: blur(20px);
      }

      .qr-code-card:hover {
        transform: translateY(-4px) scale(1.02);
        border-color: var(--apple-blue);
        box-shadow: 0 8px 30px rgba(10, 132, 255, 0.3);
      }

      .qr-code-header {
        margin-bottom: 16px;
      }

      .qr-label {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
        display: inline-block;
        padding: 4px 12px;
        background: rgba(10, 132, 255, 0.15);
        border-radius: 20px;
      }

      .qr-code-wrapper {
        background: linear-gradient(135deg, rgba(29, 29, 31, 0.98), rgba(44, 44, 46, 0.98));
        border-radius: var(--radius-small);
        padding: 20px;
        display: inline-block;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(10, 132, 255, 0.2);
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      .qr-code-wrapper:hover {
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15), 0 0 0 2px var(--apple-blue);
        transform: scale(1.05);
      }

      .qr-canvas {
        display: block;
        width: 220px !important;
        height: 220px !important;
        border-radius: 12px;
        border: 2px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        image-rendering: crisp-edges;
      }

      .qr-code-info {
        font-size: 14px;
        color: var(--text-secondary);
        font-weight: 500;
      }

      /* Old QR container - keep for compatibility */
      .qr-code-container {
        margin-top: 24px;
        padding: 28px 24px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: var(--radius-medium);
        text-align: center;
      }

      .qr-code-container .section-label {
        color: rgba(0, 0, 0, 0.7);
        justify-content: center;
      }

      /* History section */
      .history-section {
        animation: fadeInUp 0.6s ease 0.4s both;
        position: relative;
      }

      .history-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-primary);
        border-radius: 50px 50px 0 0;
      }

      .history-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        padding-top: 4px;
      }

      .history-title {
        font-size: 20px;
        font-weight: 700;
        letter-spacing: -0.5px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .history-count {
        background: rgba(10, 132, 255, 0.15);
        border: 1px solid rgba(10, 132, 255, 0.3);
        padding: 4px 12px;
        border-radius: 50px;
        font-size: 13px;
        font-weight: 700;
        color: var(--apple-blue);
      }

      .history-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .history-item {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 16px;
        padding: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(20px);
        position: relative;
      }

      .history-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 3px;
        background: var(--gradient-primary);
        transform: scaleY(0);
        transition: transform 0.3s ease;
      }

      .history-item:hover::before {
        transform: scaleY(1);
      }

      .history-item:hover {
        background: rgba(72, 72, 74, 0.6);
        border-color: rgba(10, 132, 255, 0.4);
        transform: translateX(6px);
        box-shadow: 0 4px 16px rgba(10, 132, 255, 0.15);
      }

      .history-item-short {
        font-size: 14px;
        font-weight: 700;
        color: var(--apple-blue);
        margin-bottom: 6px;
        font-family: "SF Mono", "Menlo", monospace;
        word-break: break-all;
      }

      .history-item-original {
        font-size: 12px;
        color: var(--text-secondary);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-tertiary);
      }

      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 12px;
        opacity: 0.3;
      }

      .empty-state-text {
        font-size: 13px;
        font-weight: 500;
      }

      /* Toast notifications */
      .toast-container {
        position: fixed;
        top: 80px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 1000;
        pointer-events: none;
      }

      .toast {
        background: var(--ios-card-bg);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid var(--ios-card-border);
        border-radius: var(--radius-medium);
        padding: 16px 24px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 280px;
        opacity: 0;
        transform: translateY(-20px) scale(0.9);
        transition: all 0.3s ease;
        pointer-events: all;
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      .toast-icon {
        font-size: 24px;
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-size: 15px;
        font-weight: 700;
        margin-bottom: 2px;
      }

      .toast-message {
        font-size: 13px;
        color: var(--text-secondary);
      }

      /* Loading state */
      .loading {
        pointer-events: none;
        opacity: 0.6;
      }

      .spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* AI Chatbot Styles */
      .chatbot-toggle {
        position: fixed;
        bottom: 24px;
        right: 24px;
        width: 64px;
        height: 64px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a84ff 0%, #0070d6 100%);
        border: none;
        box-shadow: 0 8px 32px rgba(10, 132, 255, 0.4);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        z-index: 999;
      }

      .chatbot-toggle:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 12px 40px rgba(10, 132, 255, 0.5);
      }

      .chatbot-toggle:active {
        transform: scale(1.02);
      }

      .chatbot-toggle .chatbot-icon {
        width: 28px;
        height: 28px;
        stroke: white;
        stroke-width: 2.5;
      }

      .chatbot-badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: #ff453a;
        color: white;
        font-size: 10px;
        font-weight: 700;
        padding: 2px 6px;
        border-radius: 10px;
        border: 2px solid #000;
      }

      .chatbot-container {
        position: fixed;
        bottom: 24px;
        right: 24px;
        width: 400px;
        height: 600px;
        background: rgba(29, 29, 31, 0.95);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        opacity: 0;
        transform: translateY(20px) scale(0.95);
        pointer-events: none;
        transition: opacity 0.3s ease, transform 0.3s ease;
        z-index: 1000;
      }
      
      @media (max-width: 768px) {
        .chatbot-container {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          background: rgba(29, 29, 31, 0.98);
          transition: opacity 0.2s ease, transform 0.2s ease;
        }
      }

      .chatbot-container.active {
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: all;
      }

      .chatbot-header {
        padding: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .chatbot-header-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .chatbot-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a84ff, #0070d6);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chatbot-avatar svg {
        width: 24px;
        height: 24px;
        stroke: white;
      }

      .chatbot-header-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .chatbot-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .chatbot-status {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        color: var(--text-secondary);
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #30d158;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .chatbot-close {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }

      .chatbot-close:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: rotate(180deg);
      }

      .chatbot-close svg {
        width: 20px;
        height: 20px;
        stroke: var(--text-primary);
      }

      .chatbot-messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .chatbot-messages::-webkit-scrollbar {
        width: 6px;
      }

      .chatbot-messages::-webkit-scrollbar-track {
        background: transparent;
      }

      .chatbot-messages::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 3px;
      }

      .chat-message {
        display: flex;
        gap: 12px;
        animation: messageSlideIn 0.3s ease-out;
      }

      @keyframes messageSlideIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .user-message {
        flex-direction: row-reverse;
      }

      .message-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a84ff, #0070d6);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .user-message .message-avatar {
        background: linear-gradient(135deg, #30d158, #2abc50);
      }

      .message-avatar svg {
        width: 18px;
        height: 18px;
        stroke: white;
      }

      .message-content {
        max-width: 75%;
      }

      .user-message .message-content {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
      }

      .message-text {
        background: rgba(255, 255, 255, 0.1);
        padding: 12px 16px;
        border-radius: 16px;
        font-size: 14px;
        line-height: 1.5;
        color: var(--text-primary);
      }

      .user-message .message-text {
        background: linear-gradient(135deg, #0a84ff, #0070d6);
        color: white;
      }

      .message-time {
        font-size: 11px;
        color: var(--text-tertiary);
        margin-top: 4px;
        padding: 0 4px;
      }

      .chatbot-input-container {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 16px;
      }

      .chatbot-suggestions {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
        overflow-x: auto;
        padding-bottom: 4px;
      }

      .chatbot-suggestions::-webkit-scrollbar {
        height: 4px;
      }

      .chatbot-suggestions::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
      }

      .suggestion-chip {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.15);
        color: var(--text-primary);
        padding: 8px 14px;
        border-radius: 20px;
        font-size: 12px;
        white-space: nowrap;
        cursor: pointer;
        transition: all 0.2s;
      }

      .suggestion-chip:hover {
        background: rgba(10, 132, 255, 0.2);
        border-color: #0a84ff;
      }

      .chatbot-input-wrapper {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .chatbot-input {
        flex: 1;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 24px;
        padding: 12px 16px;
        color: var(--text-primary);
        font-size: 14px;
        outline: none;
        transition: all 0.2s;
      }

      .chatbot-input:focus {
        background: rgba(255, 255, 255, 0.15);
        border-color: #0a84ff;
      }

      .chatbot-input::placeholder {
        color: var(--text-tertiary);
      }

      .chatbot-send-btn {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a84ff, #0070d6);
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }

      .chatbot-send-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 16px rgba(10, 132, 255, 0.4);
      }

      .chatbot-send-btn:active {
        transform: scale(0.95);
      }

      .chatbot-send-btn svg {
        width: 20px;
        height: 20px;
        stroke: white;
      }

      .typing-indicator {
        display: flex;
        gap: 4px;
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        width: fit-content;
      }

      .typing-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--text-secondary);
        animation: typingBounce 1.4s ease-in-out infinite;
      }

      .typing-dot:nth-child(2) { animation-delay: 0.2s; }
      .typing-dot:nth-child(3) { animation-delay: 0.4s; }

      @keyframes typingBounce {
        0%, 60%, 100% { transform: translateY(0); }
        30% { transform: translateY(-10px); }
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .chatbot-container {
          width: calc(100vw - 32px);
          height: calc(100vh - 100px);
          bottom: 16px;
          right: 16px;
        }

        .chatbot-toggle {
          bottom: 16px;
          right: 16px;
          width: 56px;
          height: 56px;
        }

        .chatbot-toggle .chatbot-icon {
          width: 24px;
          height: 24px;
        }
      }

      @keyframes checkmark {
        0% { transform: scale(0) rotate(45deg); }
        50% { transform: scale(1.2) rotate(45deg); }
        100% { transform: scale(1) rotate(45deg); }
      }

      .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        transform: scale(0);
        animation: ripple-animation 0.6s ease-out;
        pointer-events: none;
      }

      @keyframes ripple-animation {
        to { transform: scale(4); opacity: 0; }
      }

      button, a, input, .link-card, .stat-card {
        transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      }
      
      @media (max-width: 768px) {
        button, a, input, .link-card, .stat-card { transition: none; }
      }

      .stat-card:hover {
        border-color: var(--apple-blue);
        box-shadow: 0 8px 24px rgba(10, 132, 255, 0.2);
        transform: translateY(-4px);
      }
      
      @media (hover: none) and (pointer: coarse) {
        .stat-card:hover { transform: none; box-shadow: none; }
      }

      /* Analytics Styles */
      .analytics-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 32px;
      }

      .analytics-stat-card {
        background: linear-gradient(135deg, rgba(10, 132, 255, 0.08), rgba(0, 102, 204, 0.08));
        border: 1px solid rgba(10, 132, 255, 0.2);
        border-radius: var(--radius-medium);
        padding: 24px;
        text-align: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(20px);
      }

      .analytics-stat-card:hover {
        transform: translateY(-4px);
        border-color: var(--apple-blue);
        box-shadow: 0 8px 24px rgba(10, 132, 255, 0.2);
      }

      .analytics-stat-icon {
        font-size: 32px;
        margin-bottom: 12px;
      }

      .analytics-stat-value {
        font-size: 32px;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 8px;
      }

      .analytics-stat-label {
        font-size: 13px;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .analytics-charts {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
      }

      .analytics-chart-card {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 24px;
        backdrop-filter: blur(20px);
      }

      .analytics-chart-title {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 20px;
      }

      .analytics-chart {
        width: 100%;
        height: 250px;
      }

      .chart-legend {
        margin-top: 16px;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: center;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        color: var(--text-secondary);
      }

      .legend-color {
        width: 16px;
        height: 16px;
        border-radius: 4px;
      }

      .analytics-table-section {
        margin-bottom: 24px;
      }

      .analytics-section-title {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 16px;
      }

      .analytics-table-wrapper {
        overflow-x: auto;
        border-radius: var(--radius-medium);
        border: 1px solid var(--ios-separator);
      }

      .analytics-table {
        width: 100%;
        border-collapse: collapse;
        background: rgba(255, 255, 255, 0.02);
      }

      .analytics-table th {
        background: rgba(102, 126, 234, 0.1);
        padding: 14px 16px;
        text-align: left;
        font-size: 13px;
        font-weight: 700;
        color: var(--text-primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 1px solid var(--ios-separator);
      }

      .analytics-table td {
        padding: 14px 16px;
        font-size: 14px;
        color: var(--text-secondary);
        border-bottom: 1px solid var(--ios-separator);
      }

      .analytics-table tbody tr:hover {
        background: rgba(102, 126, 234, 0.05);
      }

      .analytics-table tbody tr:last-child td {
        border-bottom: none;
      }

      /* Success Modal */
      .success-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        animation: fadeIn 0.3s ease;
      }

      .success-modal.show {
        display: flex;
      }

      .success-modal-content {
        background: rgba(29, 29, 31, 0.95);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border: 2px solid rgba(10, 132, 255, 0.3);
        border-radius: var(--radius-large);
        padding: 48px;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(10, 132, 255, 0.2);
        animation: modalSlideUp 0.4s ease;
      }

      @keyframes modalSlideUp {
        from { opacity: 0; transform: translateY(30px) scale(0.9); }
        to { opacity: 1; transform: translateY(0) scale(1); }
      }

      .success-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 24px;
        background: var(--gradient-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: successPulse 0.6s ease;
      }

      @keyframes successPulse {
        0% { transform: scale(0); opacity: 0; }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); opacity: 1; }
      }

      .success-icon svg {
        width: 40px;
        height: 40px;
        stroke: white;
        stroke-width: 3;
        stroke-linecap: round;
        stroke-linejoin: round;
        fill: none;
        animation: checkmarkDraw 0.5s 0.2s ease forwards;
        stroke-dasharray: 100;
        stroke-dashoffset: 100;
      }

      @keyframes checkmarkDraw {
        to { stroke-dashoffset: 0; }
      }

      .success-title {
        font-size: 28px;
        font-weight: 800;
        margin-bottom: 12px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .success-message {
        font-size: 16px;
        color: var(--text-secondary);
        margin-bottom: 24px;
        line-height: 1.6;
      }

      .success-url-display {
        background: rgba(10, 132, 255, 0.1);
        border: 1px solid rgba(10, 132, 255, 0.3);
        border-radius: var(--radius-small);
        padding: 16px;
        margin-bottom: 24px;
        font-family: "SF Mono", "Menlo", monospace;
        font-size: 15px;
        color: var(--apple-blue);
        word-break: break-all;
        font-weight: 600;
      }

      .success-actions {
        display: flex;
        gap: 12px;
      }

      .success-btn {
        flex: 1;
        padding: 14px 24px;
        border-radius: var(--radius-small);
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .success-btn-primary {
        background: var(--gradient-primary);
        color: white;
        box-shadow: 0 4px 15px rgba(10, 132, 255, 0.4);
      }

      .success-btn-primary:hover {
        box-shadow: 0 6px 25px rgba(10, 132, 255, 0.6);
        transform: translateY(-2px);
      }

      .success-btn-secondary {
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }

      .success-btn-secondary:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.24);
        transform: translateY(-2px);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 24px 16px 40px;
        }

        .glass-card {
          padding: 24px;
        }

        .hero-section {
          margin-bottom: 32px;
        }

        .button-group {
          flex-direction: column;
        }

        .btn {
          min-width: 100%;
        }

        /* Stack QR code below link on mobile */
        .result-content-wrapper {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .qr-code-card {
          padding: 20px;
        }

        .qr-canvas {
          width: 180px !important;
          height: 180px !important;
        }

        .action-buttons {
          grid-template-columns: 1fr 1fr;
        }

        .nav-actions {
          gap: 8px;
        }

        .nav-btn {
          padding: 6px 12px;
          font-size: 13px;
        }

        .user-email {
          display: none;
        }

        .slug-prefix {
          font-size: 13px;
        }

        #customSlugInput {
          font-size: 15px;
        }

        .dashboard-title {
          font-size: 24px;
        }

        .dashboard-stats {
          grid-template-columns: 1fr;
        }

        .link-card-header {
          flex-direction: column;
          align-items: flex-start;
        }

        .link-card-actions {
          width: 100%;
          justify-content: flex-end;
        }

        .modal {
          max-height: 95vh;
        }
      }

      /* Accessibility */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Footer */
      .footer {
        position: relative;
        z-index: 1;
        text-align: center;
        padding: 40px 20px 60px;
        margin-top: 60px;
      }

      .footer-content {
        max-width: 600px;
        margin: 0 auto;
      }

      .footer-divider {
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--ios-separator),
          transparent
        );
        margin-bottom: 32px;
      }

      .footer-text {
        font-size: 15px;
        color: var(--text-secondary);
        margin-bottom: 20px;
        font-weight: 500;
      }

      .footer-link {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--ios-card-border);
        border-radius: var(--radius-medium);
        color: var(--text-primary);
        text-decoration: none;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.2s ease;
        margin-bottom: 16px;
      }

      .footer-link:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(0, 122, 255, 0.4);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 122, 255, 0.2);
      }

      .footer-link:active {
        transform: scale(0.97);
      }

      .linkedin-icon {
        width: 20px;
        height: 20px;
      }

      .footer-credit {
        font-size: 13px;
        color: var(--text-tertiary);
        margin-top: 20px;
      }

      .footer-credit a {
        color: #007aff;
        text-decoration: none;
        font-weight: 600;
      }

      .footer-credit a:hover {
        text-decoration: underline;
      }

      /* Focus styles */
      *:focus-visible {
        outline: 2px solid rgba(0, 122, 255, 0.6);
        outline-offset: 2px;
      }

      /* About Modal */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        z-index: 2000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .modal-overlay.show {
        opacity: 1;
        pointer-events: all;
      }

      .modal {
        background: rgba(29, 29, 31, 0.75);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 24px;
        max-width: 600px;
        width: 100%;
        max-height: 80vh;
        overflow: hidden;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
        transform: scale(0.9) translateY(20px);
        transition: transform 0.3s ease;
      }
      
      @media (max-width: 768px) {
        .modal {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          background: rgba(29, 29, 31, 0.95);
          transition: transform 0.2s ease;
        }
      }

      .modal-large {
        max-width: 1200px;
      }

      .modal-overlay.show .modal {
        transform: scale(1) translateY(0);
      }

      .modal-header {
        padding: 32px 32px 24px;
        border-bottom: 1px solid var(--ios-separator);
        position: relative;
        background: rgba(29, 29, 31, 0.85);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border-radius: 24px 24px 0 0;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        border-left: 1px solid rgba(255, 255, 255, 0.05);
        border-right: 1px solid rgba(255, 255, 255, 0.05);
      }

      .modal-close {
        position: absolute;
        top: 24px;
        right: 24px;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--text-primary);
        font-size: 20px;
      }

      .modal-close:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: rotate(90deg);
      }

      .modal-title {
        font-size: 28px;
        font-weight: 800;
        letter-spacing: -1px;
        margin-bottom: 8px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .modal-subtitle {
        font-size: 16px;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      .modal-body {
        padding: 32px;
        overflow-y: auto;
        max-height: 70vh;
        scrollbar-width: thin;
        scrollbar-color: rgba(10, 132, 255, 0.5) rgba(255, 255, 255, 0.05);
      }

      .modal-body::-webkit-scrollbar {
        width: 8px;
      }

      .modal-body::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        margin: 8px 0;
      }

      .modal-body::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, rgba(10, 132, 255, 0.6), rgba(0, 102, 204, 0.6));
        border-radius: 10px;
        border: 2px solid rgba(0, 0, 0, 0.2);
      }

      .modal-body::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, rgba(10, 132, 255, 0.8), rgba(0, 102, 204, 0.8));
      }

      .about-section {
        margin-bottom: 32px;
        text-align: center;
      }

      .about-section:last-child {
        margin-bottom: 0;
      }

      .section-title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        color: var(--text-primary);
      }

      .section-title-icon {
        font-size: 24px;
      }

      .about-text {
        font-size: 15px;
        line-height: 1.7;
        color: var(--text-secondary);
        margin-bottom: 12px;
        text-align: center;
      }

      .creator-card {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid var(--ios-separator);
        border-radius: var(--radius-medium);
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 16px;
        margin-top: 16px;
      }

      .creator-avatar {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        background: var(--gradient-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        font-weight: 800;
        color: white;
        flex-shrink: 0;
        overflow: hidden;
        border: 2px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .creator-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .creator-info {
        flex: 1;
      }

      .creator-name {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
        color: var(--text-primary);
      }

      .creator-title {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 8px;
      }

      .creator-link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
        color: #007aff;
        text-decoration: none;
        font-weight: 600;
      }

      .creator-link:hover {
        text-decoration: underline;
      }

      .feature-list {
        display: grid;
        gap: 12px;
        margin-top: 16px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .feature-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: var(--radius-small);
        border: 1px solid rgba(255, 255, 255, 0.06);
        text-align: left;
      }

      .feature-icon {
        font-size: 20px;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .feature-content {
        flex: 1;
      }

      .feature-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
      }

      .feature-desc {
        font-size: 13px;
        color: var(--text-tertiary);
        line-height: 1.5;
      }

      @media (max-width: 768px) {
        .modal {
          max-height: 90vh;
        }

        .modal-large {
          max-width: 95%;
        }

        .modal-header {
          padding: 24px 20px 20px;
        }

        .modal-body {
          padding: 24px 20px;
        }

        .analytics-overview {
          grid-template-columns: 1fr 1fr;
        }

        .analytics-charts {
          grid-template-columns: 1fr;
        }

        .analytics-chart {
          height: 200px;
        }

        .creator-card {
          flex-direction: column;
          text-align: center;
        }
      }

      /* ============================================
           MODERN PROFESSIONAL LOGO & BRANDING
           ============================================ */

      .nav-bar {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .nav-logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .nav-logo-icon {
        width: 44px;  /* Increase from 36px */
        height: 44px;
      }

      .nav-brand-text {
        display: flex;
        align-items: center;
        line-height: 1.2;
      }

      .nav-brand-name {
        font-size: 22px;  /* Increase from 20px */
        font-weight: 900;  /* Bolder */
      }

      /* SVG Icons Utility Classes */
      .icon-svg {
        width: 20px;
        height: 20px;
        display: inline-block;
        vertical-align: middle;
      }

      .icon-svg-sm {
        width: 16px;
        height: 16px;
      }

      .icon-svg-md {
        width: 24px;
        height: 24px;
      }

      .icon-svg-lg {
        width: 32px;
        height: 32px;
      }

      .icon-svg-xl {
        width: 48px;
        height: 48px;
      }

      /* Remove emoji styling where SVGs are used */
      .section-label svg {
        margin-right: 8px;
      }

      /* ============================================
           STATISTICS SECTION - USER ATTRACTION
           ============================================ */

      .stats-showcase {
        width: 100%;
        max-width: 1400px;
        margin: 80px auto;
        padding: 0 40px;
      }

      .stats-header {
        text-align: center;
        margin-bottom: 64px;
      }

      .stats-title {
        font-size: 48px;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 20px;
        letter-spacing: -0.5px;
      }

      .stats-subtitle {
        font-size: 20px;
        color: var(--text-secondary);
        font-weight: 500;
        max-width: 720px;
        margin: 0 auto;
        line-height: 1.7;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 32px;
        margin-bottom: 64px;
      }

      .stat-box {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 40px 32px;
        text-align: center;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      @media (max-width: 768px) {
        .stat-box {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          background: rgba(58, 58, 60, 0.6);
          padding: 24px 16px;
          transition: none;
        }
      }

      .stat-box::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }
      
      @media (max-width: 768px) {
        .stat-box::before { display: none; }
      }

      .stat-box:hover::before {
        transform: scaleX(1);
      }

      .stat-box:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 20px 60px rgba(10, 132, 255, 0.4), 0 0 0 1px rgba(10, 132, 255, 0.5);
        border-color: rgba(10, 132, 255, 0.6);
        background: rgba(58, 58, 60, 0.6);
      }
      
      @media (hover: none) and (pointer: coarse) {
        .stat-box:hover {
          transform: none;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
          border-color: rgba(255, 255, 255, 0.12);
          background: rgba(58, 58, 60, 0.6);
        }
      }

      .stat-box:nth-child(1)::before { background: var(--gradient-primary); }
      .stat-box:nth-child(2)::before { background: var(--gradient-success); }
      .stat-box:nth-child(3)::before { background: linear-gradient(135deg, #ff453a 0%, #e63b32 100%); }
      .stat-box:nth-child(4)::before { background: linear-gradient(135deg, #0a84ff 0%, #007aff 100%); }

      .stat-icon {
        font-size: 56px;
        margin-bottom: 20px;
        display: inline-block;
        filter: drop-shadow(0 4px 12px rgba(10, 132, 255, 0.3));
        transition: all 0.3s ease;
      }

      .stat-box:hover .stat-icon {
        transform: scale(1.1) translateY(-4px);
        filter: drop-shadow(0 8px 24px rgba(10, 132, 255, 0.6));
      }

      .stat-number {
        font-size: 56px;
        font-weight: 900;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.2;
        margin-bottom: 12px;
        display: block;
        filter: drop-shadow(0 4px 12px rgba(10, 132, 255, 0.5));
        transition: all 0.3s ease;
        position: relative;
      }

      .stat-box:hover .stat-number {
        transform: scale(1.1);
        filter: drop-shadow(0 8px 24px rgba(10, 132, 255, 0.8));
      }

      .stat-box:nth-child(2) .stat-number {
        background: var(--gradient-success);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .stat-box:nth-child(3) .stat-number {
        background: linear-gradient(135deg, #ff453a 0%, #e63b32 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .stat-box:nth-child(4) .stat-number {
        background: linear-gradient(135deg, #0a84ff 0%, #007aff 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .stat-label {
        font-size: 17px;
        color: var(--text-primary);
        font-weight: 700;
        margin-bottom: 4px;
        letter-spacing: 0.5px;
      }

      .stat-description {
        font-size: 14px;
        color: var(--text-tertiary);
        font-weight: 500;
        line-height: 1.6;
      }

      /* Features Grid */
      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 32px;
        margin-top: 64px;
      }

      .feature-card {
        background: rgba(58, 58, 60, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: var(--radius-medium);
        padding: 36px 32px;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
      }
      
      @media (max-width: 768px) {
        .feature-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          background: rgba(58, 58, 60, 0.6);
          transition: none;
        }
      }

      .feature-card:hover {
        transform: translateY(-8px) scale(1.02);
        border-color: rgba(10, 132, 255, 0.5);
        box-shadow: 0 20px 60px rgba(10, 132, 255, 0.3), 0 0 0 1px rgba(10, 132, 255, 0.4);
        background: rgba(58, 58, 60, 0.6);
      }
      
      @media (hover: none) and (pointer: coarse) {
        .feature-card:hover {
          transform: none;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
      }

      .feature-icon {
        font-size: 36px;
        margin-bottom: 16px;
        display: inline-block;
        filter: drop-shadow(0 4px 12px rgba(10, 132, 255, 0.4));
        transition: all 0.3s ease;
      }

      .feature-card:hover .feature-icon {
        transform: scale(1.15) rotate(5deg);
        filter: drop-shadow(0 8px 20px rgba(10, 132, 255, 0.7));
      }

      .feature-title {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 8px;
        transition: color 0.3s ease;
      }

      .feature-card:hover .feature-title {
        color: var(--apple-blue);
      }

      .feature-text {
        font-size: 14px;
        color: var(--text-secondary);
        line-height: 1.6;
      }

      /* Trust Badges */
      .trust-section {
        text-align: center;
        margin-top: 64px;
        padding: 40px 24px;
        background: linear-gradient(135deg, rgba(10, 132, 255, 0.08), rgba(0, 102, 204, 0.08));
        border-radius: var(--radius-large);
        border: 1px solid rgba(10, 132, 255, 0.2);
        backdrop-filter: blur(30px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }

      .trust-title {
        font-size: 24px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 24px;
      }

      .trust-badges {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 32px;
        flex-wrap: wrap;
      }

      .trust-badge {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: var(--text-secondary);
        font-weight: 600;
        padding: 12px 20px;
        background: rgba(58, 58, 60, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 50px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .trust-badge:hover {
        transform: translateY(-4px);
        background: rgba(72, 72, 74, 0.7);
        border-color: rgba(10, 132, 255, 0.5);
        box-shadow: 0 8px 24px rgba(10, 132, 255, 0.3);
      }

      .trust-badge-icon {
        font-size: 24px;
        filter: drop-shadow(0 2px 8px rgba(10, 132, 255, 0.4));
        transition: all 0.3s ease;
      }

      .trust-badge:hover .trust-badge-icon {
        transform: scale(1.2);
        filter: drop-shadow(0 4px 12px rgba(10, 132, 255, 0.7));
      }

      @media (max-width: 768px) {
        .stats-showcase {
          margin: 40px auto;
          padding: 0 16px;
        }

        .stats-title {
          font-size: 32px;
        }

        .stats-subtitle {
          font-size: 16px;
        }

        .stats-grid {
          grid-template-columns: 1fr 1fr;
          gap: 16px;
        }

        .stat-box {
          padding: 24px 16px;
        }

        .stat-icon {
          font-size: 36px;
        }

        .stat-number {
          font-size: 36px;
        }

        .stat-label {
          font-size: 14px;
        }

        .stat-description {
          font-size: 12px;
        }

        .features-grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .trust-section {
          margin-top: 40px;
          padding: 32px 16px;
        }

        .trust-badges {
          gap: 20px;
        }
      }

      /* Testimonials Section */
      .testimonials-section {
        width: 100%;
        max-width: 1200px;
        margin: 64px auto 48px;
        padding: 0 24px;
      }

      .testimonials-header {
        text-align: center;
        margin-bottom: 48px;
      }

      .testimonials-title {
        font-size: 36px;
        font-weight: 800;
        background: var(--gradient-success);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 12px;
      }

      .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
      }

      .testimonial-card {
        background: var(--ios-card-bg);
        border: 1px solid var(--ios-card-border);
        border-radius: var(--radius-medium);
        padding: 28px;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        box-shadow: 0 2px 16px rgba(0, 0, 0, 0.48);
        transition: all 0.3s ease;
      }

      .testimonial-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 25px 70px rgba(17, 153, 142, 0.2);
        border-color: rgba(17, 153, 142, 0.3);
      }

      .testimonial-stars {
        color: #ffd700;
        font-size: 18px;
        margin-bottom: 12px;
      }

      .testimonial-text {
        font-size: 15px;
        color: var(--text-secondary);
        line-height: 1.7;
        margin-bottom: 20px;
        font-style: italic;
      }

      .testimonial-author {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .testimonial-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: var(--gradient-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        font-weight: 700;
        color: white;
      }

      .testimonial-info {
        flex: 1;
      }

      .testimonial-name {
        font-size: 15px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 2px;
      }

      .testimonial-role {
        font-size: 13px;
        color: var(--text-tertiary);
      }

      /* Numbers Ticker */
      .numbers-ticker {
        background: linear-gradient(
          135deg,
          rgba(102, 126, 234, 0.1),
          rgba(17, 153, 142, 0.1)
        );
        border-radius: var(--radius-large);
        padding: 32px;
        margin: 48px 0;
        border: 1px solid rgba(102, 126, 234, 0.2);
        text-align: center;
      }

      .ticker-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 24px;
      }

      .ticker-stats {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        gap: 24px;
      }

      .ticker-item {
        flex: 1;
        min-width: 150px;
      }

      .ticker-number {
        font-size: 42px;
        font-weight: 900;
        background: var(--gradient-success);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1;
        margin-bottom: 8px;
      }

      .ticker-label {
        font-size: 14px;
        color: var(--text-secondary);
        font-weight: 600;
      }

      @media (max-width: 768px) {
        .testimonials-section {
          margin: 48px auto 32px;
          padding: 0 16px;
        }

        .testimonials-title {
          font-size: 28px;
        }

        .testimonials-grid {
          grid-template-columns: 1fr;
        }

        .numbers-ticker {
          padding: 24px 16px;
        }

        .ticker-stats {
          flex-direction: column;
          gap: 20px;
        }

        .ticker-number {
          font-size: 32px;
        }
        
        /* Success Modal Mobile */
        .success-modal-content {
          padding: 32px 24px;
          width: 95%;
        }
        
        .success-title {
          font-size: 24px;
        }
        
        .success-message {
          font-size: 14px;
        }
        
        .success-url-display {
          font-size: 13px;
          padding: 12px;
        }
        
        .success-actions {
          flex-direction: column;
        }
        
        .success-btn {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Animated background orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <!-- Navigation Bar -->
    <nav class="nav-bar">
      <div class="nav-content">
        <div class="nav-logo-container">
          <!-- Modern Professional Logo -->
          <div class="nav-logo-icon">
            <svg
              viewBox="0 0 40 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <!-- Background -->
              <rect
                width="40"
                height="40"
                rx="10"
                fill="url(#logoGradNav)"
                opacity="0.15"
              />

              <!-- Link Symbol -->
              <path
                d="M16 20h8"
                stroke="url(#logoGradNav)"
                stroke-width="2.5"
                stroke-linecap="round"
              />
              <path
                d="M13 16c0-2.5 2-4.5 4.5-4.5h3c2.5 0 4.5 2 4.5 4.5v8c0 2.5-2 4.5-4.5 4.5h-3c-2.5 0-4.5-2-4.5-4.5"
                stroke="url(#logoGradNav)"
                stroke-width="2.5"
                stroke-linecap="round"
              />

              <!-- Arrow accent -->
              <path
                d="M21 18l2 2-2 2"
                stroke="url(#logoGradNav2)"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />

              <defs>
                <linearGradient
                  id="logoGradNav"
                  x1="0%"
                  y1="0%"
                  x2="100%"
                  y2="100%"
                >
                  <stop offset="0%" style="stop-color: #667eea" />
                  <stop offset="100%" style="stop-color: #764ba2" />
                </linearGradient>
                <linearGradient
                  id="logoGradNav2"
                  x1="100%"
                  y1="0%"
                  x2="0%"
                  y2="100%"
                >
                  <stop offset="0%" style="stop-color: #11998e" />
                  <stop offset="100%" style="stop-color: #38ef7d" />
                </linearGradient>
              </defs>
            </svg>
          </div>

          <!-- Brand Text - iOS Style -->
          <div class="nav-brand-text">
            <div class="nav-brand-name">LinkShort</div>
          </div>
        </div>

        <div class="nav-actions">
          <!-- Navigation -->
          <div id="guestNav" class="user-menu">
            <button class="nav-btn" onclick="showRecentLinks()">Recent Links</button>
            <button class="nav-btn" onclick="showAbout()">About</button>
          </div>

          <!-- Logged-in Navigation -->
          <div id="userNav" class="user-menu" style="display: none">
            <span class="user-email" id="userEmail"></span>
            <div
              class="user-avatar"
              id="userAvatar"
              onclick="showPage('dashboard')"
              title="Dashboard"
            >
              U
            </div>
            <button class="nav-btn" onclick="showRecentLinks()">Recent Links</button>
            <button class="nav-btn" onclick="showAbout()">About</button>
            <button class="nav-btn nav-btn-danger" onclick="logout()">
              Logout
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Home Page (Public URL Shortener) -->
    <div id="homePage" class="page-container active">
      <!-- Main Container -->
      <div class="container">
        <!-- Hero Section -->
        <section class="hero-section">
          <h1 class="hero-title">
            Shorten URLs.<br />Track Performance.<br /><span class="title-accent">Drive Results.</span>
          </h1>
          <p class="hero-subtitle">
            Professional link management platform with advanced analytics, custom branding, and QR code generation. 
            Trusted by businesses worldwide.
          </p>
        </section>

        <!-- Main Card -->
        <div class="glass-card">
          <!-- Input Section -->
          <div class="input-section">
            <label class="section-label" for="urlInput">
              <svg
                class="icon-svg-md"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path
                  d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Enter Long URL
            </label>
            <div class="input-wrapper">
              <div class="input-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                    stroke="rgba(255,255,255,0.6)"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                    stroke="rgba(255,255,255,0.6)"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <input
                type="url"
                id="urlInput"
                placeholder="https://example.com/very/long/url"
                aria-label="Enter long URL"
              />
            </div>
          </div>

          <!-- Custom URL Section -->
          <div class="input-section">
            <label class="section-label" for="customSlugInput">
              <svg
                class="icon-svg-md"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Custom Slug (Optional)
            </label>
            <div class="custom-slug-container">
              <div class="custom-slug-wrapper">
                <div class="slug-prefix">linkshort.io/</div>
                <input
                  type="text"
                  id="customSlugInput"
                  placeholder="my-custom-link"
                  aria-label="Custom URL slug"
                  maxlength="30"
                />
              </div>
              <div class="slug-info" id="slugInfo"></div>
            </div>
          </div>

          <!-- Button Group -->
          <div class="button-group">
            <button
              class="btn btn-primary"
              id="shortenBtn"
              onclick="shortenUrl()"
            >
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                style="margin-right: 6px"
              >
                <polyline
                  points="16 18 22 12 16 6"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <polyline
                  points="8 6 2 12 8 18"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Shorten URL
            </button>
            <button
              class="btn btn-secondary"
              id="clearBtn"
              onclick="clearInput()"
            >
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                style="margin-right: 6px"
              >
                <polyline
                  points="3 6 5 6 21 6"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Clear
            </button>
          </div>

          <!-- Result Section -->
          <div class="result-section" id="resultSection">
            <div style="height: 24px"></div>
            <div class="result-header">
              <div class="section-label">
                <svg
                  class="icon-svg-md"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <polyline
                    points="20 6 9 17 4 12"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                Shortened URL
              </div>
              <div class="result-badge">
                <svg
                  class="icon-svg-sm"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <polyline
                    points="20 6 9 17 4 12"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                Ready
              </div>
            </div>

            <!-- Result Content with QR Code Side by Side -->
            <div class="result-content-wrapper">
              <!-- Left: Link Info -->
              <div class="result-link-section">
                <div class="short-url-card">
                  <div class="short-url-label">Your shortened link</div>
                  <div class="short-url-text" id="shortUrlText">
                    linkshort.io/abc123
                  </div>
                </div>

                <div class="action-buttons">
                  <button
                    class="action-btn action-btn-copy"
                    onclick="copyUrl()"
                  >
                    <svg
                      class="icon-svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                    >
                      <rect
                        x="9"
                        y="9"
                        width="13"
                        height="13"
                        rx="2"
                        ry="2"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Copy Link
                  </button>
                  <button
                    class="action-btn action-btn-open"
                    onclick="openShort()"
                  >
                    <svg
                      class="icon-svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                    >
                      <path
                        d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <polyline
                        points="15 3 21 3 21 9"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <line
                        x1="10"
                        y1="14"
                        x2="21"
                        y2="3"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Open Link
                  </button>
                  <button
                    class="action-btn action-btn-download"
                    onclick="downloadQRCode()"
                  >
                    <svg
                      class="icon-svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                    >
                      <path
                        d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <polyline
                        points="7 10 12 15 17 10"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <line
                        x1="12"
                        y1="15"
                        x2="12"
                        y2="3"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Download QR
                  </button>
                </div>
              </div>

              <!-- Right: QR Code -->
              <div class="result-qr-section">
                <div class="qr-code-card">
                  <div class="qr-code-header">
                    <span class="qr-label">
                      <svg
                        class="icon-svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        style="margin-right: 6px"
                      >
                        <rect
                          x="3"
                          y="3"
                          width="7"
                          height="7"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <rect
                          x="14"
                          y="3"
                          width="7"
                          height="7"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <rect
                          x="14"
                          y="14"
                          width="7"
                          height="7"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <rect
                          x="3"
                          y="14"
                          width="7"
                          height="7"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                      </svg>
                      QR Code
                    </span>
                  </div>
                  <div class="qr-code-wrapper">
                    <canvas id="qrCanvas" class="qr-canvas"></canvas>
                  </div>
                  <div class="qr-code-info">Scan to open link</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bulk Shortening Section -->
        <div class="glass-card" style="
          padding: 48px;
          text-align: center;
          background: linear-gradient(135deg, rgba(90, 200, 250, 0.06), rgba(74, 180, 230, 0.06));
          border: 1px solid rgba(90, 200, 250, 0.2);
          margin-top: 48px;
        ">
          <div style="margin-bottom: 20px;">
            <svg width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="opacity: 0.9; stroke: url(#bulkGradient);">
              <defs>
                <linearGradient id="bulkGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#5ac8fa" />
                  <stop offset="100%" style="stop-color:#4eb8e8" />
                </linearGradient>
              </defs>
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <h3 style="
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
          ">Need to shorten multiple URLs?</h3>
          <p style="
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            max-width: 480px;
            margin-left: auto;
            margin-right: auto;
          ">
            Process up to 100 URLs at once with our bulk shortening tool. Fast, free, and easy to use.
          </p>
          <button
            class="btn"
            onclick="quickBulkAccess()"
            style="
              background: var(--gradient-teal);
              color: white;
              border: none;
              padding: 12px 32px;
              font-size: 15px;
              font-weight: 600;
              box-shadow: 0 4px 16px rgba(90, 200, 250, 0.25);
              display: inline-flex;
              align-items: center;
              gap: 10px;
              min-width: auto;
            "
          >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Try Bulk Shortening
            <span style="
              background: rgba(255, 255, 255, 0.25);
              padding: 2px 8px;
              border-radius: 50px;
              font-size: 10px;
              font-weight: 700;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            ">Free</span>
          </button>
        </div>
      </div>
    </div>
    <!-- End Home Page -->

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page-container">
      <div class="container">
        <div class="dashboard-header">
          <div>
            <h1 class="dashboard-title">My Dashboard</h1>
            <div id="adminBadge" style="display: none; margin-top: 8px">
              <span
                style="
                  background: var(--gradient-accent);
                  padding: 4px 12px;
                  border-radius: 50px;
                  font-size: 12px;
                  font-weight: 700;
                  color: white;
                  box-shadow: 0 2px 8px rgba(255, 69, 58, 0.3);
                "
              >
                ðŸ‘‘ ADMIN
              </span>
            </div>
          </div>
          <button class="nav-btn nav-btn-primary" onclick="showPage('home')">
            â† Back to Home
          </button>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav" id="dashboardTabNav">
          <button class="tab-btn active" onclick="switchTab('myLinks')">
            My Links
          </button>
          <button class="tab-btn" onclick="switchTab('bulkShorten')">
            Bulk Shorten
          </button>
          <button
            class="tab-btn"
            id="adminPanelTab"
            style="display: none"
            onclick="switchTab('adminPanel')"
          >
            ðŸ‘‘ Admin Panel
          </button>
        </div>

        <!-- My Links Tab -->
        <div id="myLinksTab" class="tab-content active">
          <!-- Stats -->
          <div class="dashboard-stats">
            <div class="stat-card">
              <div class="stat-value" id="totalLinks">0</div>
              <div class="stat-label">Total Links</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="totalClicks">0</div>
              <div class="stat-label">Total Clicks</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="customLinks">0</div>
              <div class="stat-label">Custom Links</div>
            </div>
          </div>

          <!-- Links List -->
          <div class="glass-card">
            <div class="history-header">
              <h2 class="history-title">Your Links</h2>
              <button class="nav-btn" onclick="clearUserHistory()">
                Clear All
              </button>
            </div>
            <div class="dashboard-links" id="dashboardLinks">
              <div class="empty-state">
                <div class="empty-state-icon">ðŸ”—</div>
                <div class="empty-state-text">
                  No links yet. Create your first one!
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bulk Shorten Tab -->
        <div id="bulkShortenTab" class="tab-content">
          <div class="glass-card">
            <div class="section-label">
              <svg
                class="icon-svg-md"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                style="margin-right: 8px"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <rect
                  x="8"
                  y="2"
                  width="8"
                  height="4"
                  rx="1"
                  ry="1"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Paste Multiple URLs (One per line)
              <span style="
                background: linear-gradient(135deg, #30d158, #32d74b);
                color: white;
                padding: 3px 10px;
                border-radius: 50px;
                font-size: 11px;
                font-weight: 700;
                margin-left: 10px;
                text-transform: uppercase;
                letter-spacing: 0.8px;
                box-shadow: 0 2px 10px rgba(48, 209, 88, 0.5);
                animation: pulse 2s ease-in-out infinite;
              ">100% FREE</span>
            </div>
            <div class="bulk-helper">
              <strong>ðŸ’¡ Pro Tip:</strong> Paste up to 100 URLs at once -
              completely free! Each URL should be on a new line. We'll
              automatically validate and shorten them for you!
            </div>
            <textarea
              id="bulkUrlInput"
              class="bulk-textarea"
              placeholder="https://example.com/url1&#10;https://example.com/url2&#10;https://example.com/url3&#10;https://github.com/yourproject&#10;https://docs.yoursite.com/guide"
            ></textarea>

            <div class="bulk-actions">
              <button
                class="btn btn-primary"
                onclick="bulkShortenUrls()"
                id="bulkShortenBtn"
              >
                <svg
                  class="icon-svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  style="margin-right: 6px"
                >
                  <polygon
                    points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                Shorten All URLs
              </button>
              <button class="btn btn-secondary" onclick="clearBulkInput()">
                <svg
                  class="icon-svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  style="margin-right: 6px"
                >
                  <circle
                    cx="12"
                    cy="12"
              </button>
              <button class="btn btn-secondary" onclick="clearBulkInput()">
                <svg
                  class="icon-svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  style="margin-right: 6px"
                >
                  <circle
                    cx="12"
                    cy="12"
                    r="10"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="15"
                    y1="9"
                    x2="9"
                    y2="15"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="9"
                    y1="9"
                    x2="15"
                    y2="15"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                Clear
              </button>
              <button
                class="btn btn-secondary"
                onclick="copyAllBulkLinks()"
                id="copyAllBtn"
                style="display: none"
              >
                <svg
                  class="icon-svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  style="margin-right: 6px"
                >
                  <rect
                    x="9"
                    y="9"
                    width="13"
                    height="13"
                    rx="2"
                    ry="2"
                    stroke-width="2"
                  />
                  <path
                    d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                    stroke-width="2"
                  />
                </svg>
                Copy All
              </button>
              <button
                class="btn btn-secondary"
                onclick="downloadBulkResults()"
                id="downloadBtn"
                style="display: none"
              >
                <svg
                  class="icon-svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  style="margin-right: 6px"
                >
                  <path
                    d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <polyline
                    points="7 10 12 15 17 10"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="12"
                    y1="15"
                    x2="12"
                    y2="3"
                    stroke-width="2"
                    stroke-linecap="round"
                  />
                </svg>
                Export CSV
              </button>
            </div>

            <!-- Progress Bar -->
            <div class="bulk-progress" id="bulkProgress">
              <div class="progress-bar-container">
                <div
                  class="progress-bar"
                  id="progressBar"
                  style="width: 0%"
                ></div>
              </div>
              <div class="progress-text" id="progressText">
                Processing 0 of 0 URLs...
              </div>
            </div>

            <!-- Stats -->
            <div class="bulk-stats" id="bulkStats" style="display: none">
              <div class="bulk-stat">
                <div class="bulk-stat-value total" id="bulkTotal">0</div>
                <div class="bulk-stat-label">Total</div>
              </div>
              <div class="bulk-stat">
                <div class="bulk-stat-value success" id="bulkSuccess">0</div>
                <div class="bulk-stat-label">Success</div>
              </div>
              <div class="bulk-stat">
                <div class="bulk-stat-value error" id="bulkError">0</div>
                <div class="bulk-stat-label">Failed</div>
              </div>
            </div>

            <div
              id="bulkResults"
              class="bulk-results"
              style="display: none"
            ></div>
          </div>
        </div>

        <!-- Admin Panel Tab -->
        <div id="adminPanelTab" class="tab-content">
          <div class="glass-card">
            <h2 class="history-title" style="margin-bottom: 24px">
              ðŸ‘‘ Admin Control Panel
            </h2>

            <!-- System Stats -->
            <div class="dashboard-stats" style="margin-bottom: 32px">
              <div class="stat-card">
                <div class="stat-value" id="adminTotalUsers">0</div>
                <div class="stat-label">Total Users</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="adminTotalLinks">0</div>
                <div class="stat-label">All Links</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="adminTotalClicks">0</div>
                <div class="stat-label">Total Clicks</div>
              </div>
            </div>

            <!-- User Management -->
            <div style="margin-bottom: 24px">
              <h3
                style="
                  font-size: 20px;
                  font-weight: 700;
                  margin-bottom: 16px;
                  color: var(--text-primary);
                "
              >
                ðŸ‘¥ User Management
              </h3>
              <div id="adminUsersList" class="dashboard-links">
                <!-- Users will be loaded here -->
              </div>
            </div>

            <!-- System Info -->
            <div
              style="
                padding: 20px;
                background: rgba(102, 126, 234, 0.08);
                border: 1px solid rgba(102, 126, 234, 0.2);
                border-radius: var(--radius-medium);
              "
            >
              <h3
                style="
                  font-size: 16px;
                  font-weight: 700;
                  margin-bottom: 12px;
                  color: var(--text-primary);
                "
              >
                â„¹ï¸ System Information
              </h3>
              <div
                style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.8;
                "
              >
                <div style="margin-bottom: 8px">
                  <strong style="color: var(--text-primary)"
                    >Storage Used:</strong
                  >
                  <span id="storageUsed">0</span> KB
                </div>
                <div style="margin-bottom: 8px">
                  <strong style="color: var(--text-primary)">Database:</strong>
                  localStorage (Browser-based)
                </div>
                <div>
                  <strong style="color: var(--text-primary)"
                    >Last Backup:</strong
                  >
                  <span id="lastBackup">Never</span>
                </div>
              </div>
              <div style="margin-top: 16px; display: flex; gap: 12px">
                <button
                  class="nav-btn nav-btn-primary"
                  onclick="exportAllData()"
                  style="flex: 1"
                >
                  ðŸ“¥ Export All Data
                </button>
                <button
                  class="nav-btn"
                  onclick="clearAllData()"
                  style="
                    flex: 1;
                    background: rgba(255, 69, 58, 0.15);
                    border: 1px solid rgba(255, 69, 58, 0.3);
                    color: #ff453a;
                  "
                >
                  ðŸ—‘ï¸ Clear All Data
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Dashboard Page -->

    <!-- Statistics Showcase Section -->
    <section class="stats-showcase">
      <div class="stats-header">
        <h2 class="stats-title">Trusted by Thousands Worldwide</h2>
        <p class="stats-subtitle">
          Join millions of users who trust LinkShort for their URL shortening
          needs. Fast, reliable, and completely free.
        </p>
      </div>

      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-icon">
            <svg class="icon-svg-xl" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 16 16 12 12 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="8" y1="12" x2="16" y2="12" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <span class="stat-number">1M+</span>
          <div class="stat-label">Links Shortened</div>
          <div class="stat-description">Over a million URLs transformed into smart, shareable links</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">
            <svg class="icon-svg-xl" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="9" cy="7" r="4" stroke-width="2"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <span class="stat-number">50K+</span>
          <div class="stat-label">Active Users</div>
          <div class="stat-description">Growing community of professionals and teams</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">
            <svg class="icon-svg-xl" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <span class="stat-number">0.2s</span>
          <div class="stat-label">Average Speed</div>
          <div class="stat-description">Lightning-fast URL shortening in milliseconds</div>
        </div>
        <div class="stat-box">
          <div class="stat-icon">
            <svg class="icon-svg-xl" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <line x1="2" y1="12" x2="22" y2="12" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <span class="stat-number">180+</span>
          <div class="stat-label">Countries</div>
          <div class="stat-description">Users from around the globe trust our service</div>
        </div>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke-width="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="feature-title">100% Secure</div>
          <div class="feature-text">Your links are protected with enterprise-grade security. All data encrypted and stored safely.</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <line x1="18" y1="20" x2="18" y2="10" stroke-width="2" stroke-linecap="round"/>
              <line x1="12" y1="20" x2="12" y2="4" stroke-width="2" stroke-linecap="round"/>
              <line x1="6" y1="20" x2="6" y2="14" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="feature-title">Advanced Analytics</div>
          <div class="feature-text">Track clicks, locations, devices, and more with our comprehensive analytics dashboard.</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="16" y1="8" x2="2" y2="22" stroke-width="2" stroke-linecap="round"/>
              <line x1="17.5" y1="15" x2="9" y2="15" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="feature-title">Custom Links</div>
          <div class="feature-text">Create branded, memorable URLs with custom slugs. Perfect for marketing campaigns.</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="3" y="3" width="7" height="7" stroke-width="2"/>
              <rect x="14" y="3" width="7" height="7" stroke-width="2"/>
              <rect x="14" y="14" width="7" height="7" stroke-width="2"/>
              <rect x="3" y="14" width="7" height="7" stroke-width="2"/>
            </svg>
          </div>
          <div class="feature-title">QR Codes</div>
          <div class="feature-text">Instant QR code generation for every link. Download and share across all platforms.</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="3" stroke-width="2"/>
              <path d="M12 1v6m0 6v6m5.196-14.196l-4.243 4.243m0 5.653l-4.242 4.242M23 12h-6m-6 0H1m15.196 5.196l-4.243-4.242m0-5.653l-4.242-4.242" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="feature-title">Bulk Processing</div>
          <div class="feature-text">Shorten multiple URLs at once. Save time with CSV export and batch operations.</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg class="icon-svg-lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="feature-title">Beautiful Design</div>
          <div class="feature-text">Modern, intuitive interface that works perfectly on all devices. Dark theme included.</div>
        </div>
      </div>

      <div class="trust-section">
        <h3 class="trust-title">Why Users Love LinkShort</h3>
        <div class="trust-badges">
          <div class="trust-badge">
            <svg class="icon-svg-md trust-badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>99.9% Uptime</span>
          </div>
          <div class="trust-badge">
            <svg class="icon-svg-md trust-badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 16 16 12 12 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <line x1="8" y1="12" x2="16" y2="12" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Instant Results</span>
          </div>
          <div class="trust-badge">
            <svg class="icon-svg-md trust-badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2L2 7l10 5 10-5-10-5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2 17l10 5 10-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2 12l10 5 10-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Free Forever</span>
          </div>
          <div class="trust-badge">
            <svg class="icon-svg-md trust-badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>GDPR Compliant</span>
          </div>
          <div class="trust-badge">
            <svg class="icon-svg-md trust-badge-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>5-Star Rated</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Live Numbers Ticker -->
    <section class="testimonials-section">
      <div class="numbers-ticker">
        <div class="ticker-title">ðŸ“Š Real-Time Statistics</div>
        <div class="ticker-stats">
          <div class="ticker-item">
            <div class="ticker-number">2.3M+</div>
            <div class="ticker-label">Total Clicks Tracked</div>
          </div>
          <div class="ticker-item">
            <div class="ticker-number">98.7%</div>
            <div class="ticker-label">User Satisfaction</div>
          </div>
          <div class="ticker-item">
            <div class="ticker-number">24/7</div>
            <div class="ticker-label">Uptime Guarantee</div>
          </div>
        </div>
      </div>

      <div class="testimonials-header">
        <h2 class="testimonials-title">What Our Users Say</h2>
      </div>

      <div class="testimonials-grid">
        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "LinkShort has transformed how we share content. The analytics are
            incredible, and the QR code feature is a game-changer for our
            marketing campaigns!"
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">SM</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Sarah Mitchell</div>
              <div class="testimonial-role">Marketing Director @ TechCorp</div>
            </div>
          </div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "The bulk URL shortening feature saved me hours of work. Clean
            interface, lightning fast, and the custom links help maintain our
            brand identity."
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">JC</div>
            <div class="testimonial-info">
              <div class="testimonial-name">James Chen</div>
              <div class="testimonial-role">
                Social Media Manager @ StartupHub
              </div>
            </div>
          </div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "Best URL shortener I've used. The analytics dashboard gives me
            insights I never had before. Plus, it's completely free with no
            hidden costs!"
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">EP</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Emily Parker</div>
              <div class="testimonial-role">Content Creator & Blogger</div>
            </div>
          </div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "The modern design and user experience is unmatched. Our team loves
            how easy it is to track campaign performance with detailed click
            analytics."
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">RK</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Raj Kumar</div>
              <div class="testimonial-role">Product Manager @ InnovateLabs</div>
            </div>
          </div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "LinkShort's security features give me peace of mind. The dashboard
            is intuitive, and I can manage all my links in one place. Highly
            recommended!"
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">AL</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Alex Liu</div>
              <div class="testimonial-role">Digital Strategist @ MediaFlow</div>
            </div>
          </div>
        </div>

        <div class="testimonial-card">
          <div class="testimonial-stars">â­â­â­â­â­</div>
          <p class="testimonial-text">
            "Finally, a URL shortener that's both powerful and beautiful. The QR
            codes and custom slugs are perfect for our offline marketing
            materials."
          </p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">MR</div>
            <div class="testimonial-info">
              <div class="testimonial-name">Maria Rodriguez</div>
              <div class="testimonial-role">Brand Manager @ CreativeHub</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- AI Chatbot -->
    <div class="chatbot-container" id="chatbotContainer">
      <div class="chatbot-header">
        <div class="chatbot-header-left">
          <div class="chatbot-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2a10 10 0 0 1 10 10v1a4 4 0 0 1-4 4h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3.5"/>
              <path d="M12 16v2"/>
              <path d="M8 14v-2a4 4 0 0 1 8 0v2"/>
            </svg>
          </div>
          <div class="chatbot-header-info">
            <div class="chatbot-title">LinkShort AI Assistant</div>
            <div class="chatbot-status">
              <span class="status-dot"></span>
              Online
            </div>
          </div>
        </div>
        <button class="chatbot-close" onclick="toggleChatbot()" aria-label="Close chat">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 9l-7 7-7-7"/>
          </svg>
        </button>
      </div>
      
      <div class="chatbot-messages" id="chatbotMessages">
        <div class="chat-message bot-message">
          <div class="message-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2a10 10 0 0 1 10 10v1a4 4 0 0 1-4 4h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3.5"/>
            </svg>
          </div>
          <div class="message-content">
            <div class="message-text">
              ðŸ‘‹ Hi! I'm your LinkShort AI assistant powered by GPT-4. I can help you with:
              <br><br>
              â€¢ Shortening URLs<br>
              â€¢ Understanding analytics<br>
              â€¢ QR code generation<br>
              â€¢ Best practices for link sharing<br>
              â€¢ Troubleshooting issues<br>
              <br>
              How can I help you today?
            </div>
            <div class="message-time">Just now</div>
          </div>
        </div>
      </div>
      
      <div class="chatbot-input-container">
        <div class="chatbot-suggestions" id="chatbotSuggestions">
          <button class="suggestion-chip" onclick="sendSuggestion('How do I shorten a URL?')">
            How do I shorten a URL?
          </button>
          <button class="suggestion-chip" onclick="sendSuggestion('What analytics are available?')">
            What analytics are available?
          </button>
          <button class="suggestion-chip" onclick="sendSuggestion('How do QR codes work?')">
            How do QR codes work?
          </button>
        </div>
        <div class="chatbot-input-wrapper">
          <input 
            type="text" 
            class="chatbot-input" 
            id="chatbotInput" 
            placeholder="Ask me anything..."
            onkeypress="handleChatKeyPress(event)"
          />
          <button class="chatbot-send-btn" onclick="sendChatMessage()" aria-label="Send message">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Chatbot Toggle Button -->
    <button class="chatbot-toggle" id="chatbotToggle" onclick="toggleChatbot()" aria-label="Open AI Assistant">
      <svg class="chatbot-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        <path d="M8 10h.01M12 10h.01M16 10h.01"/>
      </svg>
      <span class="chatbot-badge">AI</span>
    </button>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
      <div class="success-modal-content">
        <div class="success-icon">
          <svg viewBox="0 0 24 24">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
        </div>
        <h2 class="success-title">URL Shortened Successfully!</h2>
        <p class="success-message">Your link is ready to share</p>
        <div class="success-url-display" id="successUrlDisplay">
          tinyurl.com/abc123
        </div>
        <div id="actualUrlInfo" style="display: none; margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
          <div style="font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;">ðŸ“‹ Copy this link to share:</div>
          <div class="actual-url-text" style="font-size: 12px; color: rgba(255,255,255,0.7); word-break: break-all; font-family: 'SF Mono', Monaco, monospace;"></div>
        </div>
        <div class="success-actions">
          <button class="success-btn success-btn-primary" onclick="copyFromModal()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-width="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke-width="2"></path>
            </svg>
            Copy Link
          </button>
          <button class="success-btn success-btn-secondary" onclick="closeSuccessModal()">
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Link Modal -->
    <div
      class="modal-overlay"
      id="editLinkModal"
      onclick="closeEditLinkModal(event)"
    >
      <div class="modal" onclick="event.stopPropagation()">
        <div class="modal-header">
          <button
            class="modal-close"
            onclick="closeEditLinkModal()"
            aria-label="Close"
          >
            Ã—
          </button>
          <h2 class="modal-title">Edit Link</h2>
          <p class="modal-subtitle">Update your shortened link alias</p>
        </div>

        <div class="modal-body">
          <form
            id="editLinkForm"
            class="auth-form"
            onsubmit="handleEditLink(event)"
          >
            <input type="hidden" id="editLinkId" value="" />
            <div class="form-group">
              <label class="form-label" for="editOriginalUrl"
                >Original URL</label
              >
              <input
                type="text"
                id="editOriginalUrl"
                class="form-input"
                readonly
              />
            </div>
            <div class="form-group">
              <label class="form-label" for="editCustomSlug">Custom Slug</label>
              <div class="custom-slug-wrapper">
                <div class="slug-prefix">linkshort.io/</div>
                <input
                  type="text"
                  id="editCustomSlug"
                  class="form-input"
                  style="border: none; padding: 14px 12px"
                  maxlength="30"
                  required
                />
              </div>
              <div class="slug-info" id="editSlugInfo"></div>
            </div>
            <div class="button-group">
              <button type="submit" class="btn btn-primary">
                <span>ðŸ’¾</span> Save Changes
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="closeEditLinkModal()"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Analytics Modal -->
    <div
      class="modal-overlay"
      id="analyticsModal"
      onclick="closeAnalyticsModal(event)"
    >
      <div class="modal modal-large" onclick="event.stopPropagation()">
        <div class="modal-header">
          <button
            class="modal-close"
            onclick="closeAnalyticsModal()"
            aria-label="Close"
          >
            Ã—
          </button>
          <h2 class="modal-title">ðŸ“Š Link Analytics</h2>
          <p class="modal-subtitle" id="analyticsSubtitle">
            Detailed statistics for your shortened link
          </p>
        </div>

        <div class="modal-body">
          <!-- Overview Stats -->
          <div class="analytics-overview">
            <div class="analytics-stat-card">
              <div class="analytics-stat-icon">ðŸ‘ï¸</div>
              <div class="analytics-stat-value" id="statTotalClicks">0</div>
              <div class="analytics-stat-label">Total Clicks</div>
            </div>
            <div class="analytics-stat-card">
              <div class="analytics-stat-icon">ðŸ‘¥</div>
              <div class="analytics-stat-value" id="statUniqueVisitors">0</div>
              <div class="analytics-stat-label">Unique Visitors</div>
            </div>
            <div class="analytics-stat-card">
              <div class="analytics-stat-icon">ðŸ“</div>
              <div class="analytics-stat-value" id="statTopLocation">-</div>
              <div class="analytics-stat-label">Top Location</div>
            </div>
            <div class="analytics-stat-card">
              <div class="analytics-stat-icon">ðŸ“±</div>
              <div class="analytics-stat-value" id="statTopDevice">-</div>
              <div class="analytics-stat-label">Top Device</div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="analytics-charts">
            <!-- Device Chart -->
            <div class="analytics-chart-card">
              <h3 class="analytics-chart-title">ðŸ–¥ï¸ Device Types</h3>
              <canvas id="deviceChart" class="analytics-chart"></canvas>
              <div id="deviceLegend" class="chart-legend"></div>
            </div>

            <!-- Browser Chart -->
            <div class="analytics-chart-card">
              <h3 class="analytics-chart-title">ðŸŒ Browsers</h3>
              <canvas id="browserChart" class="analytics-chart"></canvas>
              <div id="browserLegend" class="chart-legend"></div>
            </div>

            <!-- Location Chart -->
            <div class="analytics-chart-card">
              <h3 class="analytics-chart-title">ðŸ“ Geographic Locations</h3>
              <canvas id="locationChart" class="analytics-chart"></canvas>
              <div id="locationLegend" class="chart-legend"></div>
            </div>

            <!-- Time Chart -->
            <div class="analytics-chart-card">
              <h3 class="analytics-chart-title">â° Clicks by Hour</h3>
              <canvas id="timeChart" class="analytics-chart"></canvas>
            </div>
          </div>

          <!-- Recent Clicks Table -->
          <div class="analytics-table-section">
            <h3 class="analytics-section-title">ðŸ• Recent Clicks</h3>
            <div class="analytics-table-wrapper">
              <table class="analytics-table" id="recentClicksTable">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Location</th>
                    <th>Device</th>
                    <th>Browser</th>
                    <th>Referrer</th>
                  </tr>
                </thead>
                <tbody id="recentClicksBody">
                  <tr>
                    <td colspan="5" style="text-align: center; padding: 40px">
                      No clicks yet
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Simulate Click Button (for testing) -->
          <div
            style="
              margin-top: 24px;
              padding: 20px;
              background: rgba(102, 126, 234, 0.08);
              border-radius: var(--radius-medium);
              border: 1px solid rgba(102, 126, 234, 0.2);
            "
          >
            <p
              style="
                font-size: 14px;
                color: var(--text-secondary);
                margin-bottom: 12px;
              "
            >
              ðŸ’¡ <strong>Demo Mode:</strong> Click the button below to simulate
              link clicks and see analytics in action
            </p>
            <button
              class="btn btn-primary"
              onclick="simulateClick()"
              style="width: 100%"
            >
              ðŸŽ² Simulate Random Click
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Links Modal -->
    <div class="modal-overlay" id="recentLinksModal" onclick="closeRecentLinksModal(event)">
      <div class="modal" onclick="event.stopPropagation()">
        <div class="modal-header">
          <button
            class="modal-close"
            onclick="closeRecentLinksModal()"
            aria-label="Close"
          >
            Ã—
          </button>
          <h2 class="modal-title">Recent Links</h2>
          <p class="modal-subtitle">
            Your recently shortened URLs
          </p>
        </div>

        <div class="modal-body">
          <div class="history-section" style="animation: none;">
            <div class="history-list" id="historyListModal">
              <div class="empty-state">
                <div class="empty-state-icon">ðŸ”—</div>
                <div class="empty-state-text">No shortened links yet</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="aboutModal" onclick="closeAboutModal(event)">
      <div class="modal modal-large" onclick="event.stopPropagation()">
        <div class="modal-header">
          <button
            class="modal-close"
            onclick="closeAboutModal()"
            aria-label="Close"
          >
            Ã—
          </button>
          <h2 class="modal-title">About LinkShort</h2>
          <p class="modal-subtitle">
            Professional URL Management Platform
          </p>
        </div>

        <div class="modal-body">
          <!-- Developer Information -->
          <div class="about-section" style="
            background: rgba(58, 58, 60, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 32px;
          ">
            <h3 style="
              font-size: 18px;
              font-weight: 700;
              color: var(--text-primary);
              margin-bottom: 24px;
              letter-spacing: -0.3px;
              text-transform: uppercase;
              font-size: 13px;
              letter-spacing: 1.5px;
              color: var(--text-secondary);
            ">
              Developer Information
            </h3>
            <div style="display: flex; align-items: flex-start; gap: 24px; flex-wrap: wrap;">
              <div style="display: flex; flex-direction: column; align-items: center; gap: 12px;">
                <img src="profile.jpeg" alt="Saimum Arafat" style="
                  width: 80px;
                  height: 80px;
                  border-radius: 12px;
                  object-fit: cover;
                  border: 2px solid rgba(255, 255, 255, 0.1);
                " onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                <div style="
                  width: 80px;
                  height: 80px;
                  background: linear-gradient(135deg, #667eea, #764ba2);
                  border-radius: 12px;
                  display: none;
                  align-items: center;
                  justify-content: center;
                  font-size: 32px;
                  font-weight: 700;
                  color: white;
                ">
                  SA
                </div>
              </div>
              
              <div style="flex: 1; min-width: 250px;">
                <h4 style="
                  font-size: 22px;
                  font-weight: 700;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                  letter-spacing: -0.5px;
                ">
                  Saimum Arafat
                </h4>
                <p style="
                  font-size: 15px;
                  color: var(--text-secondary);
                  margin-bottom: 16px;
                  font-weight: 500;
                ">
                  Full Stack Developer
                </p>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.7;
                  margin-bottom: 20px;
                ">
                  Passionate about creating beautiful, user-friendly web applications with modern design principles. Specializing in frontend development, UI/UX design, and building elegant solutions that make the web better.
                </p>

                <div style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 10px;
                ">
                  <a href="https://github.com/saimumarafat" target="_blank" rel="noopener noreferrer" style="
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    padding: 10px 18px;
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    color: var(--text-primary);
                    text-decoration: none;
                    font-size: 14px;
                    font-weight: 600;
                    transition: all 0.2s ease;
                  " onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    GitHub
                  </a>
                  
                  <a href="mailto:saimumcodes@gmail.com" style="
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    padding: 10px 18px;
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    color: var(--text-primary);
                    text-decoration: none;
                    font-size: 14px;
                    font-weight: 600;
                    transition: all 0.2s ease;
                  " onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                      <polyline points="22,6 12,13 2,6"/>
                    </svg>
                    Email
                  </a>

                  <a href="https://linkedin.com/in/saimumarafat" target="_blank" rel="noopener noreferrer" style="
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    padding: 10px 18px;
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    color: var(--text-primary);
                    text-decoration: none;
                    font-size: 14px;
                    font-weight: 600;
                    transition: all 0.2s ease;
                  " onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.borderColor='rgba(255, 255, 255, 0.1)'">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    LinkedIn
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- About Project -->
          <div style="margin-bottom: 32px;">
            <h3 style="
              font-size: 13px;
              font-weight: 700;
              color: var(--text-secondary);
              margin-bottom: 16px;
              letter-spacing: 1.5px;
              text-transform: uppercase;
            ">
              About the Project
            </h3>
            <p style="
              font-size: 15px;
              color: var(--text-secondary);
              line-height: 1.7;
              margin-bottom: 0;
            ">
              LinkShort is a professional URL shortening platform designed with a focus on
              simplicity, speed, and reliability. Built with pure HTML, CSS, and JavaScript,
              it provides a seamless experience for creating, managing, and tracking shortened URLs
              across all devices and platforms.
            </p>
          </div>

          <!-- Features -->
          <div style="margin-bottom: 32px;">
            <h3 style="
              font-size: 13px;
              font-weight: 700;
              color: var(--text-secondary);
              margin-bottom: 20px;
              letter-spacing: 1.5px;
              text-transform: uppercase;
            ">
              Key Features
            </h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px;">
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">âš¡</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">Lightning Fast</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Instant URL shortening with no backend required</p>
              </div>
              
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">âœï¸</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">Custom Aliases</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Create branded links with your own custom slugs</p>
              </div>
              
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">ðŸ“±</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">QR Code Generation</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Automatic QR codes for every link, downloadable as PNG</p>
              </div>
              
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">ðŸ“Š</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">Analytics Tracking</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Track clicks, visitors, and engagement metrics</p>
              </div>
              
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">ðŸ’¾</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">Auto-Save History</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Links saved locally and persist across sessions</p>
              </div>
              
              <div style="
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.08);
                border-radius: 12px;
                padding: 20px;
              ">
                <div style="
                  width: 40px;
                  height: 40px;
                  background: rgba(10, 132, 255, 0.15);
                  border-radius: 10px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin-bottom: 16px;
                  font-size: 20px;
                ">ðŸ”’</div>
                <h4 style="
                  font-size: 16px;
                  font-weight: 600;
                  color: var(--text-primary);
                  margin-bottom: 8px;
                ">Smart Validation</h4>
                <p style="
                  font-size: 14px;
                  color: var(--text-secondary);
                  line-height: 1.6;
                  margin: 0;
                ">Real-time validation and uniqueness checking</p>
              </div>
            </div>
          </div>

          <!-- Tech Stack -->
          <div>
            <h3 style="
              font-size: 13px;
              font-weight: 700;
              color: var(--text-secondary);
              margin-bottom: 16px;
              letter-spacing: 1.5px;
              text-transform: uppercase;
            ">
              Technology Stack
            </h3>
            <div style="
              background: rgba(255, 255, 255, 0.03);
              border: 1px solid rgba(255, 255, 255, 0.08);
              border-radius: 12px;
              padding: 24px;
            ">
              <p style="
                font-size: 15px;
                color: var(--text-secondary);
                line-height: 1.7;
                margin-bottom: 16px;
              ">
                Built with modern web standards and best practices:
              </p>
              <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <span style="
                  padding: 8px 16px;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 6px;
                  font-size: 13px;
                  font-weight: 600;
                  color: var(--text-primary);
                ">HTML5</span>
                <span style="
                  padding: 8px 16px;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 6px;
                  font-size: 13px;
                  font-weight: 600;
                  color: var(--text-primary);
                ">CSS3</span>
                <span style="
                  padding: 8px 16px;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 6px;
                  font-size: 13px;
                  font-weight: 600;
                  color: var(--text-primary);
                ">Vanilla JavaScript</span>
                <span style="
                  padding: 8px 16px;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 6px;
                  font-size: 13px;
                  font-weight: 600;
                  color: var(--text-primary);
                ">LocalStorage API</span>
                <span style="
                  padding: 8px 16px;
                  background: rgba(255, 255, 255, 0.05);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  border-radius: 6px;
                  font-size: 13px;
                  font-weight: 600;
                  color: var(--text-primary);
                ">No Dependencies</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      (function() {
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;
        if (isMobile) {
          document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
              const target = document.querySelector(this.getAttribute('href'));
              if (target) target.scrollIntoView({ behavior: 'auto', block: 'start' });
            });
          });
          const originalGenerateQRCode = window.generateQRCode;
          window.generateQRCode = function(url) {
            const canvas = document.getElementById("qrCanvas");
            if (!canvas) return;
            try {
              const mobileSize = 120;
              let typeNumber = 5;
              if (url.length > 100) typeNumber = 7;
              if (url.length > 150) typeNumber = 10;
              const qr = new QRCodeLib(typeNumber, 0);
              qr.addData(url);
              qr.make();
              const moduleCount = qr.getModuleCount();
              const cellSize = Math.floor(mobileSize / moduleCount);
              const size = cellSize * moduleCount;
              canvas.width = size;
              canvas.height = size;
              const ctx = canvas.getContext("2d");
              ctx.fillStyle = 'rgba(29, 29, 31, 0.95)';
              ctx.fillRect(0, 0, size, size);
              ctx.fillStyle = '#0a84ff';
              for (let row = 0; row < moduleCount; row++) {
                for (let col = 0; col < moduleCount; col++) {
                  if (qr.isDark(row, col)) ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                }
              }
            } catch (error) {
              console.error('QR generation error:', error);
            }
          };
          let scrollTimeout;
          window.addEventListener('scroll', function() {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(function() {}, 150);
          }, { passive: true });
          let resizeTimeout;
          window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {}, 200);
          }, { passive: true });
          const originalBulkShortenUrls = window.bulkShortenUrls;
          window.bulkShortenUrls = function() {
            const textarea = document.getElementById("bulkUrlInput");
            const urlList = textarea.value.trim().split("\n").filter((url) => url.trim());
            if (urlList.length > 20) {
              if (!confirm(`Processing ${urlList.length} URLs on mobile may take a moment. Continue?`)) return;
            }
            originalBulkShortenUrls.call(this);
          };
          if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries, observer) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  const img = entry.target;
                  if (img.dataset.src) {
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    observer.unobserve(img);
                  }
                }
              });
            });
            document.querySelectorAll('img[data-src]').forEach(img => imageObserver.observe(img));
          }
          console.log('ðŸš€ Mobile optimizations enabled');
        }
      })();

      // State management
      let urls = [];
      let currentShortUrl = "";
      let currentActualUrl = "";
      let currentUser = null;
      let users = {}; // Store all users
      
      // Get the custom short domain from settings or use default (TinyURL style)
      const getShortDomain = () => {
        // Check if user has set a custom domain
        const customDomain = localStorage.getItem('customShortDomain');
        if (customDomain) {
          return customDomain.endsWith('/') ? customDomain : customDomain + '/';
        }
        
        // Default short domain - TinyURL style (very short!)
        return 'tinyurl.com/';
      };
      const shortDomain = getShortDomain();
      
      // Get the actual URL for redirects (current page with hash)
      const getActualUrl = (code) => {
        if (window.location.protocol === 'file:') {
          return window.location.href.split('#')[0] + '#' + code;
        } else {
          return window.location.origin + window.location.pathname + '#' + code;
        }
      };

      // Handle URL redirection from hash
      function handleRedirect() {
        const hash = window.location.hash.substring(1); // Remove the # symbol
        
        if (hash && hash.length > 0) {
          console.log('Checking for redirect with code:', hash);
          
          // Search in all users' URLs
          let foundUrl = null;
          let originalUrl = null;
          
          // First check local short URLs (hash-based storage)
          const localUrls = JSON.parse(localStorage.getItem('localShortUrls') || '{}');
          if (localUrls[hash]) {
            originalUrl = localUrls[hash];
            console.log('Found in local storage:', originalUrl);
          }
          
          // Check current user's URLs
          if (!originalUrl && currentUser && users[currentUser.email]) {
            const userUrls = users[currentUser.email].urls || [];
            foundUrl = userUrls.find(u => u.code === hash);
            if (foundUrl) originalUrl = foundUrl.original;
          }
          
          // Check public URLs (guest mode)
          if (!originalUrl) {
            const saved = localStorage.getItem("shortenedUrls");
            if (saved) {
              try {
                const publicUrls = JSON.parse(saved);
                foundUrl = publicUrls.find(u => u.code === hash);
                if (foundUrl) originalUrl = foundUrl.original;
              } catch (e) {
                console.error("Failed to parse URLs", e);
              }
            }
          }
          
          // Also check all users' URLs
          if (!originalUrl) {
            for (const email in users) {
              const userUrls = users[email].urls || [];
              foundUrl = userUrls.find(u => u.code === hash);
              if (foundUrl) {
                originalUrl = foundUrl.original;
                break;
              }
            }
          }
          
          if (originalUrl) {
            console.log('Found URL, redirecting to:', originalUrl);
            
            // Update analytics if we have a foundUrl object
            if (foundUrl) {
              foundUrl.clicks = (foundUrl.clicks || 0) + 1;
              const now = new Date().toISOString();
              if (!foundUrl.analytics) {
                foundUrl.analytics = {
                  clickHistory: [],
                  totalClicks: 0,
                  uniqueVisitors: new Set(),
                  devices: {},
                  browsers: {},
                  os: {},
                  locations: {},
                  referrers: {},
                  hourlyData: {},
                  dailyData: {}
                };
              }
              foundUrl.analytics.clickHistory.push(now);
              foundUrl.analytics.totalClicks++;
              
              // Save updated analytics
              if (currentUser && users[currentUser.email]) {
                localStorage.setItem("linkShortUsers", JSON.stringify(users));
              } else {
                localStorage.setItem("shortenedUrls", JSON.stringify(urls));
              }
            }
            
            // Show redirect message
            document.body.innerHTML = `
              <div style="
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
                padding: 20px;
              ">
                <div style="
                  background: rgba(255, 255, 255, 0.95);
                  backdrop-filter: blur(10px);
                  padding: 48px;
                  border-radius: 24px;
                  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                  text-align: center;
                  max-width: 500px;
                ">
                  <div style="
                    width: 64px;
                    height: 64px;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto 24px;
                    animation: spin 1s linear infinite;
                  ">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
                    </svg>
                  </div>
                  <h1 style="
                    font-size: 24px;
                    font-weight: 700;
                    color: #1a1a1a;
                    margin-bottom: 12px;
                  ">Redirecting...</h1>
                  <p style="
                    color: #666;
                    font-size: 15px;
                    margin-bottom: 24px;
                  ">Taking you to your destination</p>
                  <p style="
                    background: #f5f5f5;
                    padding: 12px;
                    border-radius: 8px;
                    font-size: 13px;
                    color: #333;
                    word-break: break-all;
                    font-family: monospace;
                  ">${originalUrl}</p>
                </div>
              </div>
              <style>
                @keyframes spin {
                  from { transform: rotate(0deg); }
                  to { transform: rotate(360deg); }
                }
              </style>
            `;
            
            // Redirect after 1 second
            setTimeout(() => {
              window.location.href = originalUrl;
            }, 1000);
            
            return true; // Indicate that redirect is happening
          } else {
            console.log('Short code not found:', hash);
            // Show 404 page
            document.body.innerHTML = `
              <div style="
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
                font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
                padding: 20px;
              ">
                <div style="
                  background: rgba(255, 255, 255, 0.05);
                  backdrop-filter: blur(10px);
                  border: 1px solid rgba(255, 255, 255, 0.1);
                  padding: 48px;
                  border-radius: 24px;
                  text-align: center;
                  max-width: 500px;
                ">
                  <div style="font-size: 72px; margin-bottom: 16px;">ðŸ”—</div>
                  <h1 style="
                    font-size: 32px;
                    font-weight: 700;
                    color: #fff;
                    margin-bottom: 12px;
                  ">Link Not Found</h1>
                  <p style="
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 16px;
                    margin-bottom: 32px;
                  ">This shortened link doesn't exist or has been removed.</p>
                  <button onclick="window.location.href='${window.location.href.split('#')[0]}'" style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    border: none;
                    padding: 14px 32px;
                    border-radius: 12px;
                    font-size: 16px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: transform 0.2s;
                  " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                    Create Your Own Short Link
                  </button>
                </div>
              </div>
            `;
            return true;
          }
        }
        return false; // No redirect needed
      }

      // AI Chatbot Functions
      let chatbotOpen = false;
      let chatHistory = [];
      let conversationContext = {
        lastTopic: null,
        userPreferences: {},
        askedQuestions: [],
        sessionStartTime: Date.now()
      };

      function toggleChatbot() {
        chatbotOpen = !chatbotOpen;
        const container = document.getElementById('chatbotContainer');
        const toggle = document.getElementById('chatbotToggle');
        
        if (chatbotOpen) {
          container.classList.add('active');
          toggle.style.opacity = '0';
          toggle.style.pointerEvents = 'none';
          
          // Add click-outside listener to close chatbot
          setTimeout(() => {
            document.addEventListener('click', closeChatbotOnClickOutside);
          }, 100); // Small delay to prevent immediate closure
        } else {
          container.classList.remove('active');
          toggle.style.opacity = '1';
          toggle.style.pointerEvents = 'all';
          
          // Remove click-outside listener
          document.removeEventListener('click', closeChatbotOnClickOutside);
        }
      }

      function closeChatbotOnClickOutside(event) {
        const container = document.getElementById('chatbotContainer');
        const toggle = document.getElementById('chatbotToggle');
        
        // Check if click is outside both the container and toggle button
        if (!container.contains(event.target) && !toggle.contains(event.target)) {
          chatbotOpen = false;
          container.classList.remove('active');
          toggle.style.opacity = '1';
          toggle.style.pointerEvents = 'all';
          
          // Remove the listener
          document.removeEventListener('click', closeChatbotOnClickOutside);
        }
      }

      function handleChatKeyPress(event) {
        if (event.key === 'Enter') {
          sendChatMessage();
        }
      }

      function sendSuggestion(text) {
        const input = document.getElementById('chatbotInput');
        input.value = text;
        sendChatMessage();
      }

      async function sendChatMessage() {
        const input = document.getElementById('chatbotInput');
        const message = input.value.trim();
        
        if (!message) return;
        
        // Add user message
        addChatMessage(message, 'user');
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Get AI response
        try {
          const response = await getChatbotResponse(message);
          removeTypingIndicator();
          addChatMessage(response, 'bot');
        } catch (error) {
          removeTypingIndicator();
          addChatMessage('Sorry, I encountered an error. Please try again.', 'bot');
        }
      }

      function addChatMessage(text, sender) {
        const messagesContainer = document.getElementById('chatbotMessages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${sender}-message`;
        
        const time = new Date().toLocaleTimeString('en-US', { 
          hour: 'numeric', 
          minute: '2-digit' 
        });
        
        const avatarIcon = sender === 'bot' 
          ? '<path d="M12 2a10 10 0 0 1 10 10v1a4 4 0 0 1-4 4h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3.5"/>'
          : '<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>';
        
        messageDiv.innerHTML = `
          <div class="message-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              ${avatarIcon}
            </svg>
          </div>
          <div class="message-content">
            <div class="message-text">${text}</div>
            <div class="message-time">${time}</div>
          </div>
        `;
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        // Store in history
        chatHistory.push({ sender, text, time });
      }

      function showTypingIndicator() {
        const messagesContainer = document.getElementById('chatbotMessages');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'chat-message bot-message';
        typingDiv.id = 'typingIndicator';
        typingDiv.innerHTML = `
          <div class="message-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2a10 10 0 0 1 10 10v1a4 4 0 0 1-4 4h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3.5"/>
            </svg>
          </div>
          <div class="message-content">
            <div class="typing-indicator">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
          </div>
        `;
        messagesContainer.appendChild(typingDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }

      function removeTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) {
          indicator.remove();
        }
      }

      // Advanced AI Helper Functions
      function analyzeSentiment(message) {
        const positive = ['good', 'great', 'love', 'amazing', 'awesome', 'excellent', 'perfect', 'wonderful', 'fantastic', 'happy', 'thanks', 'thank'];
        const negative = ['bad', 'hate', 'terrible', 'awful', 'worst', 'annoying', 'frustrated', 'angry', 'sad', 'problem', 'issue', 'broken'];
        
        let score = 0;
        const words = message.toLowerCase().split(/\s+/);
        
        words.forEach(word => {
          if (positive.includes(word)) score += 1;
          if (negative.includes(word)) score -= 1;
        });
        
        return score > 0 ? 'positive' : score < 0 ? 'negative' : 'neutral';
      }

      function detectFollowUp(message, lastTopic) {
        const followUpPhrases = ['more', 'tell me more', 'what about', 'and', 'also', 'how about', 'what else', 'can you'];
        const hasFollowUp = followUpPhrases.some(phrase => message.includes(phrase));
        return hasFollowUp && lastTopic;
      }

      function extractIntent(message) {
        // Advanced intent recognition with multi-word matching
        const intents = {
          shorten: {
            keywords: ['shorten', 'short', 'link', 'url', 'tiny', 'create link', 'make link', 'generate', 'reduce'],
            weight: 1
          },
          analytics: {
            keywords: ['analytic', 'track', 'stat', 'click', 'view', 'visit', 'data', 'metric', 'count', 'number', 'report', 'how many'],
            weight: 1
          },
          qr: {
            keywords: ['qr', 'code', 'scan', 'barcode', 'camera', 'phone'],
            weight: 1
          },
          custom: {
            keywords: ['custom', 'alias', 'personalize', 'brand', 'own', 'specific', 'choose'],
            weight: 1
          },
          troubleshoot: {
            keywords: ['not working', 'broken', 'error', 'problem', 'issue', 'fix', 'help me', 'doesnt work', 'cant'],
            weight: 2
          },
          pricing: {
            keywords: ['price', 'cost', 'free', 'pay', 'money', 'subscription'],
            weight: 1
          }
        };

        let bestIntent = null;
        let highestScore = 0;

        for (const [intent, data] of Object.entries(intents)) {
          let score = 0;
          data.keywords.forEach(keyword => {
            if (message.includes(keyword)) {
              score += data.weight;
            }
          });
          
          if (score > highestScore) {
            highestScore = score;
            bestIntent = intent;
          }
        }

        return bestIntent;
      }

      function getContextualResponse(message, sentiment, lastTopic) {
        // Provide contextual, personality-driven responses
        if (sentiment === 'negative') {
          return {
            prefix: "I'm sorry you're experiencing difficulties. ",
            tone: 'empathetic'
          };
        } else if (sentiment === 'positive') {
          return {
            prefix: "I'm so glad you're enjoying LinkShort! ",
            tone: 'enthusiastic'
          };
        }
        return {
          prefix: "",
          tone: 'neutral'
        };
      }

      async function getChatbotResponse(userMessage) {
        const lowerMessage = userMessage.toLowerCase().trim();
        const words = lowerMessage.split(/\s+/);
        
        // Store question in history for context
        conversationContext.askedQuestions.push(lowerMessage);
        
        // Advanced sentiment analysis
        const sentiment = analyzeSentiment(lowerMessage);
        
        // Enhanced NLP-like patterns with more variations
        const patterns = {
          greetings: ['hi', 'hello', 'hey', 'greetings', 'good morning', 'good afternoon', 'good evening', 'howdy', 'sup', 'yo', 'hola', 'namaste'],
          thanks: ['thank', 'thanks', 'thx', 'appreciate', 'grateful', 'awesome', 'cool', 'great', 'nice', 'amazing', 'excellent', 'perfect'],
          goodbyes: ['bye', 'goodbye', 'see you', 'later', 'farewell', 'ciao', 'adios', 'take care', 'gotta go'],
          questions: ['what', 'how', 'why', 'when', 'where', 'can', 'could', 'should', 'would', 'is', 'are', 'do', 'does', 'will', 'which'],
          affirmatives: ['yes', 'yeah', 'yep', 'sure', 'okay', 'ok', 'alright', 'correct', 'right', 'exactly', 'absolutely'],
          negatives: ['no', 'nope', 'nah', 'never', 'not', 'dont', "don't", 'neither', 'nuh'],
          frustration: ['frustrated', 'annoying', 'annoyed', 'stupid', 'dumb', 'hate', 'terrible', 'awful', 'worst'],
          excitement: ['love', 'amazing', 'wow', 'incredible', 'fantastic', 'brilliant', 'perfect', 'excellent']
        };
        
        // Smart context awareness - check if following up on previous topic
        const isFollowUp = detectFollowUp(lowerMessage, conversationContext.lastTopic);
        
        // Comprehensive knowledge base with personality
        const knowledge = {
          shorten: `HOW TO SHORTEN A URL

Step-by-Step Process:

1. Copy your long URL
   - Must include https:// or http://
   - Ensure the URL is valid and accessible
   
2. Paste in the input field
   - Located at the top of the page
   - Main input area with placeholder text
   
3. (Optional) Add custom alias
   - Makes your link memorable and branded
   - Example: "my-portfolio" or "promo2024"
   - Must be 3-30 characters
   
4. Click "Shorten URL" button
   - Processing takes 1-2 seconds
   - System will validate your input
   
5. Get your short link
   - Copy and share anywhere
   - QR code generated automatically
   - Analytics begin tracking immediately

___________________________

What Happens Next:

â€¢ System attempts to use 3 free APIs (is.gd, v.gd, Shrtco.de)
â€¢ If all APIs fail, creates local backup link
â€¢ Link works immediately upon creation
â€¢ Analytics tracking starts automatically

Additional Features:

â€¢ QR code generated automatically
â€¢ Click analytics tracked in real-time
â€¢ One-click copy to clipboard
â€¢ Works on all devices and platforms
â€¢ Compatible with all major browsers`,

          analytics: `ANALYTICS & TRACKING

What We Track:

Engagement Metrics:
â€¢ Total clicks (all-time count)
â€¢ Unique visitors (distinct users)
â€¢ Click-through rate (CTR)
â€¢ Peak activity times
â€¢ Engagement patterns

Device Information:
â€¢ Mobile clicks
â€¢ Desktop clicks
â€¢ Tablet clicks
â€¢ Device brand/model
â€¢ Screen resolution

Browser Data:
â€¢ Chrome users
â€¢ Safari users
â€¢ Firefox users
â€¢ Edge users
â€¢ Other browsers
â€¢ Browser versions

Operating Systems:
â€¢ Windows
â€¢ macOS
â€¢ iOS
â€¢ Android
â€¢ Linux
â€¢ OS versions

Geographic Data:
â€¢ Country of visitors
â€¢ City-level tracking
â€¢ Time zone information
â€¢ Regional trends
â€¢ Language preferences

Referrer Sources:
â€¢ Direct traffic
â€¢ Social media clicks
â€¢ Search engine referrals
â€¢ Website referrals
â€¢ Campaign tracking

Time Patterns:
â€¢ Hourly click distribution
â€¢ Daily patterns
â€¢ Weekly trends
â€¢ Monthly overview
â€¢ Year-over-year comparison

___________________________

How to Access Analytics:

1. Create an account (free)
2. Login to your dashboard
3. Click on any shortened link
4. View detailed analytics page
5. Export data as needed (CSV/JSON)

Update Frequency: Real-time (instant updates)`,

          qr: `QR CODE GENERATION

Automatic Features:

Instant Generation:
â€¢ Created automatically with every short link
â€¢ No extra steps required
â€¢ Ready in less than 1 second
â€¢ No additional cost

Professional Design:
â€¢ Dark theme background
â€¢ Blue gradient modules
â€¢ Matches application design
â€¢ Print-ready quality
â€¢ High resolution output

Universal Compatibility:
â€¢ Works with any smartphone camera
â€¢ Compatible with QR scanner apps
â€¢ iPhone and Android supported
â€¢ No special app required
â€¢ Instant recognition

Print Quality:
â€¢ Sharp at any size
â€¢ Suitable for business cards
â€¢ Use in presentations
â€¢ Print on marketing materials
â€¢ Scale without pixelation

___________________________

How to Use QR Codes:

1. Shorten your URL
   - Follow the normal shortening process
   
2. Scroll down
   - QR code appears below the short link
   - Automatically generated
   
3. Save the QR code
   - Right-click and save image
   - Or use the download button
   - Available in PNG format
   
4. Share anywhere
   - Social media posts
   - Print materials
   - Digital displays
   - Presentations and documents

___________________________

Best Practices:

Size Recommendations:
â€¢ Minimum 2x2 inches for reliable scanning
â€¢ Larger sizes for distance viewing
â€¢ Test before mass printing

Placement Tips:
â€¢ Eye-level positioning
â€¢ Good lighting conditions
â€¢ Avoid reflective surfaces
â€¢ Ensure adequate contrast

Design Guidelines:
â€¢ Dark code on light background works best
â€¢ Maintain clear space around code
â€¢ Don't distort or stretch
â€¢ Test scan from various distances

Common Use Cases:
â€¢ Business cards and letterheads
â€¢ Restaurant menus
â€¢ Product packaging
â€¢ Event posters and flyers
â€¢ Marketing materials
â€¢ Digital screens and displays`,

          apis: `API SERVICES

We Use 3 Reliable APIs:

1. is.gd
   â€¢ Lightning fast response time
   â€¢ 99.9% uptime reliability
   â€¢ Free forever
   â€¢ No registration required
   â€¢ German-based service
   â€¢ Established since 2006

2. v.gd
   â€¢ Sister site of is.gd
   â€¢ Same reliability as is.gd
   â€¢ Alternative short domain
   â€¢ Instant shortening
   â€¢ Backup for is.gd
   â€¢ Identical features

3. Shrtco.de
   â€¢ Modern API design
   â€¢ 9qr.de short domain
   â€¢ CORS-friendly
   â€¢ Fast response time
   â€¢ Actively maintained
   â€¢ Regular updates

___________________________

Smart Fallback System:

If All 3 APIs Fail:

1. Creates local link automatically
   - Uses hash-based system
   - Example format: linkshort.io/abc123
   - Stored in your browser
   
2. Stores in browser localStorage
   - Uses localStorage technology
   - Works completely offline
   - Data persists across sessions
   
3. Maintains full functionality
   - Redirects work perfectly
   - Analytics still track clicks
   - QR codes still generate
   
4. No data lost
   - Everything saved locally
   - Access anytime
   - Sync when online (with account)

___________________________

Why Multiple APIs:

Reliability:
â€¢ If one service fails, others work
â€¢ 99.99% total uptime
â€¢ No single point of failure
â€¢ Redundancy ensures availability

Load Balancing:
â€¢ Distributes requests across services
â€¢ Faster processing times
â€¢ Reduces load on any single API
â€¢ Better performance

Different Domains:
â€¢ is.gd short URLs
â€¢ v.gd short URLs
â€¢ 9qr.de short URLs
â€¢ User can choose preference

Guaranteed Service:
â€¢ You ALWAYS get a short link
â€¢ Zero downtime
â€¢ Automatic failover
â€¢ Seamless experience`,

          custom: `CUSTOM SHORT LINKS

Creating Branded Links:

___________________________

Step-by-Step Process:

1. Enter your long URL
   - Paste in the main input field
   - Ensure URL is valid
   
2. Type custom alias
   - Use the "Custom Alias" field below main input
   - Make it memorable and relevant
   - Keep it short and professional
   
3. Click "Shorten URL"
   - System checks availability
   - Validates format
   - Confirms uniqueness
   
4. Get your branded link
   - Format: linkshort.io/your-alias
   - Ready to share immediately
   - Custom branding applied

___________________________

Alias Requirements:

Allowed:
â€¢ Length: 3-30 characters
â€¢ Letters: a-z, A-Z (case-sensitive)
â€¢ Numbers: 0-9
â€¢ Symbols: - (hyphen), _ (underscore)
â€¢ Combination of above

Not Allowed:
â€¢ Spaces
â€¢ Special characters (@, #, $, %, etc.)
â€¢ Already taken aliases
â€¢ Reserved words (admin, api, help, etc.)
â€¢ Less than 3 characters
â€¢ More than 30 characters

___________________________

Good Examples:

Professional:
â€¢ my-portfolio
â€¢ summer-sale-2024
â€¢ contact_me
â€¢ promo2024
â€¢ john-website
â€¢ event_rsvp

Brand-Focused:
â€¢ company-name
â€¢ product-launch
â€¢ webinar-2024
â€¢ download-guide

Campaign-Specific:
â€¢ black-friday
â€¢ holiday-sale
â€¢ newsletter-signup

___________________________

Bad Examples (Don't Use):

â€¢ my portfolio (contains space)
â€¢ @mylink (special character)
â€¢ ab (too short)
â€¢ my_super_long_alias_that_nobody_will_remember (too long)
â€¢ admin (reserved word)
â€¢ 123 (confusing, use descriptive text)

___________________________

Pro Tips:

Keep It Short:
â€¢ Easier to remember
â€¢ Cleaner appearance
â€¢ Better for sharing

Use Hyphens for Readability:
â€¢ my-portfolio (good)
â€¢ myportfolio (harder to read)
â€¢ Improves recognition

Include Keywords:
â€¢ Relevant to content
â€¢ Descriptive of destination
â€¢ Helps users know what to expect

Avoid Confusing Characters:
â€¢ 0 vs O (zero vs letter O)
â€¢ 1 vs l (one vs lowercase L)
â€¢ Use clear, distinct characters

Make It Brand-Relevant:
â€¢ Include company name
â€¢ Reference campaign
â€¢ Connect to message

Note: Custom aliases work with local storage. API-generated links use their own random codes.`,

          account: `ACCOUNT SYSTEM

Current Status: Browser-Based Storage

___________________________

How Data is Stored:

Local Storage System:
â€¢ All links saved in your browser
â€¢ Uses localStorage technology
â€¢ Data persists across sessions
â€¢ Private to your device
â€¢ No server storage currently

What This Means:
â€¢ Data stays on your device only
â€¢ Not accessible from other devices
â€¢ Won't sync across browsers
â€¢ Cleared if you clear browser data
â€¢ Privacy-first approach

___________________________

Creating an "Account":

Current Functionality:
1. Links auto-save to your browser
   - Automatic as you create them
   - No registration required
   - Instant availability
   
2. Access your links anytime
   - Open application in same browser
   - All history preserved
   - Full analytics available
   
3. No password required
   - Browser-based access
   - Device-specific storage
   - Simple and secure

___________________________

Future Account Features (Coming Soon):

Cloud Synchronization:
â€¢ Access links from any device
â€¢ Sync across all your browsers
â€¢ Cloud backup of all data
â€¢ Never lose your links

Advanced Analytics:
â€¢ Extended history (beyond 90 days)
â€¢ Advanced reporting
â€¢ Custom date ranges
â€¢ Export capabilities

Team Collaboration:
â€¢ Share links with team members
â€¢ Collaborative workspaces
â€¢ Permission management
â€¢ Team analytics

Custom Domains:
â€¢ Use your own domain
â€¢ Brand consistency
â€¢ Professional appearance
â€¢ Full customization

API Access:
â€¢ Programmatic link creation
â€¢ Bulk operations
â€¢ Integration with apps
â€¢ Developer-friendly

___________________________

Data Security:

Current Protection:
â€¢ Data never leaves your device
â€¢ No server transmission
â€¢ Private by default
â€¢ Browser-level security

Best Practices:
â€¢ Don't clear browser data if you want to keep links
â€¢ Bookmark important short links
â€¢ Export analytics regularly
â€¢ Use same browser for consistency

___________________________

Backup Recommendations:

Manual Backup:
1. Export your links regularly
   - Use export feature in dashboard
   - Save as CSV or JSON
   
2. Save analytics screenshots
   - Important data preservation
   - Visual records
   
3. Document important links
   - Keep a separate list
   - Note custom aliases

Note: Full account system with cloud storage is planned for future release. Current version prioritizes privacy and simplicity with browser-based storage.`,

          apis: `API SERVICES

We Use 3 Reliable APIs:

1. is.gd
   â€¢ Lightning fast response
   â€¢ 99.9% uptime
   â€¢ Free forever
   â€¢ No registration needed
   â€¢ German-based service

2. v.gd
   â€¢ Sister site of is.gd
   â€¢ Same reliability
   â€¢ Alternative short domain
   â€¢ Instant shortening
   â€¢ Backup for is.gd

3. Shrtco.de
   â€¢ Modern API
   â€¢ 9qr.de short domain
   â€¢ CORS-friendly
   â€¢ Fast response
   â€¢ Actively maintained

___________________________

Smart Fallback System:

If all 3 APIs fail, LinkShort automatically:

1. Creates local link
   - Uses hash-based system
   - Example: linkshort.io/abc123
   
2. Stores in browser
   - localStorage technology
   - Works offline
   
3ï¸âƒ£ **Maintains functionality**
   â†’ Redirects work perfectly
   â†’ Analytics still track
   
4ï¸âƒ£ **No data lost**
   â†’ Everything saved locally
   â†’ Access anytime

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**WHY MULTIPLE APIs?**

ðŸ”’ **Reliability**
   â†’ If one fails, others work
   â†’ 99.99% total uptime
   
âš–ï¸ **Load Balancing**
   â†’ Distributes requests
   â†’ Faster processing
   
ðŸŒ **Different Domains**
   â†’ is.gd, v.gd, 9qr.de
   â†’ User preference
   
âœ¨ **Always Works**
   â†’ You ALWAYS get a short link
   â†’ Zero downtime`,

          custom: `âœï¸ **CUSTOM SHORT LINKS**

**CREATE BRANDED LINKS:**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**STEP-BY-STEP:**

1ï¸âƒ£ **Enter long URL**
   â†’ Paste in main input field
   
2ï¸âƒ£ **Type custom alias**
   â†’ Use "Custom Alias" field below
   â†’ Make it memorable!
   
3ï¸âƒ£ **Click "Shorten URL"**
   â†’ System checks availability
   
4ï¸âƒ£ **Get your branded link!**
   â†’ Example: linkshort.io/your-alias

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**ALIAS REQUIREMENTS:**

âœ… **ALLOWED:**
â€¢ Length: 3-30 characters
â€¢ Letters: a-z, A-Z
â€¢ Numbers: 0-9
â€¢ Symbols: - (hyphen), _ (underscore)
â€¢ Case-sensitive

âŒ **NOT ALLOWED:**
â€¢ Spaces
â€¢ Special characters (@, #, $, %, etc.)
â€¢ Already taken aliases
â€¢ Reserved words (admin, api, etc.)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**GOOD EXAMPLES:**

âœ… my-portfolio
âœ… summer-sale-2024
âœ… contact_me
âœ… promo2024
âœ… john-website
âœ… event_rsvp

âŒ **BAD EXAMPLES:**

âŒ my portfolio (has space)
âŒ @mylink (special character)
âŒ ab (too short)
âŒ my_super_long_alias_that_nobody_will_remember (too long)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**PRO TIPS:**

ðŸ’¡ Keep it short & memorable
ðŸ’¡ Use hyphens for readability
ðŸ’¡ Include keywords
ðŸ’¡ Avoid confusing characters (0 vs O, 1 vs l)
ðŸ’¡ Make it brand-relevant

**NOTE:** Custom aliases work with local storage. API-generated links use their own random codes.`,

          account: `ðŸ‘¤ **ACCOUNT SYSTEM**

**TWO OPTIONS AVAILABLE:**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**ðŸ†“ GUEST MODE** (Current - No Login)

**WHAT YOU GET:**
âœ… Shorten unlimited URLs
âœ… Generate QR codes
âœ… Basic analytics
âœ… 20 recent links saved
âœ… No registration required
âœ… 100% free forever
âœ… Instant access

**LIMITATIONS:**
âš ï¸ Links stored locally only
âš ï¸ Data tied to this browser
âš ï¸ Limited to 20 recent links
âš ï¸ No cloud sync
âš ï¸ Can't access from other devices

**BEST FOR:**
â€¢ Quick one-time use
â€¢ Testing the service
â€¢ No account wanted
â€¢ Temporary needs

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**â­ USER ACCOUNT** (Premium Experience)

**WHAT YOU GET:**
âœ… Unlimited link storage
âœ… Cloud-based data
âœ… Access from any device
âœ… Advanced analytics dashboard
âœ… Edit/delete links anytime
âœ… Organize with folders
âœ… Bulk operations
âœ… Export data
âœ… Custom domains (coming soon)
âœ… Priority support
âœ… Team collaboration
âœ… API access (coming soon)

**NO LIMITATIONS:**
âœ¨ Sync across all devices
âœ¨ Never lose your links
âœ¨ Complete link management
âœ¨ Professional features

**COST:** 100% FREE (No credit card!)

**BEST FOR:**
â€¢ Regular users
â€¢ Businesses
â€¢ Marketing teams
â€¢ Long-term use
â€¢ Professional needs

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

**HOW TO CREATE ACCOUNT:**

1ï¸âƒ£ Click "Login/Sign Up" (top-right)
2ï¸âƒ£ Fill in: Name, Email, Password
3ï¸âƒ£ Click "Create Account"
4ï¸âƒ£ Start using premium features!

**TIME NEEDED:** 30 seconds
**REQUIRED INFO:** Name, Email, Password only`,

          troubleshoot: `TROUBLESHOOTING GUIDE

Common Issues and Solutions:

___________________________

Problem: Links Not Working

Solutions:
1. Check original URL format
   - Must start with https:// or http://
   - Example: https://google.com (correct)
   - Example: google.com (incorrect)
   
2. Remove special characters
   - Some symbols cause issues
   - Try copying URL from address bar
   
3. Try different browser
   - Chrome, Firefox, Safari, Edge
   - Check in incognito mode
   
4. Clear browser cache
   - Settings â†’ Privacy â†’ Clear Data
   - Refresh the page

___________________________

Problem: QR Code Not Showing

Solutions:
1. Wait 2-3 seconds
   - Generation takes time
   - Don't refresh immediately
   
2. Scroll down the page
   - QR code appears below short link
   - May be off-screen
   
3. Check browser console
   - Press F12
   - Look for errors in Console tab
   
4. Try different browser
   - Some browsers block scripts
   - Use Chrome/Firefox for best results
   
5. Disable ad blockers
   - May interfere with QR generation
   - Temporarily turn off

___________________________

Problem: Can't Copy Link

Solutions:
1. Click copy button again
   - May need double-click
   - Look for "Copied!" confirmation
   
2. Check clipboard permissions
   - Browser may block clipboard access
   - Allow permission when prompted
   
3. Manual copy
   - Select text with mouse
   - Right-click â†’ Copy
   - Or Ctrl+C (Cmd+C on Mac)
   
4. Try different browser
   - Safari sometimes has issues
   - Chrome usually works best

___________________________

Problem: Analytics Not Updating

Solutions:
1. Refresh dashboard
   - Click refresh icon
   - Or reload page (F5)
   
2. Wait 5-10 seconds
   - Data syncs in real-time
   - May have slight delay
   
3. Check if logged in
   - Analytics require account
   - Login if needed
   
4. Verify link has clicks
   - Click your own link first
   - Check if count increases
   
5. Clear cache
   - Old data may be cached
   - Clear and refresh

___________________________

Problem: Custom Alias Rejected

Solutions:
1. Check length
   - Must be 3-30 characters
   - Too short or too long rejected
   
2. Remove special characters
   - Only letters, numbers, -, _
   - No spaces or symbols
   
3. Try different alias
   - May already be taken
   - Add numbers or make unique
   
4. Avoid reserved words
   - admin, api, help, etc. blocked
   - Be creative

___________________________

Problem: APIs Not Working / Only Getting Local Links

This is the MOST COMMON issue!

Root Cause:
â€¢ Opening HTML file directly (file:// protocol)
â€¢ Browsers block external API calls from local files for security

Solutions:

BEST SOLUTION - Use a Web Server:

Option 1: Python Server (Easiest)
1. Open Terminal/Command Prompt
2. Navigate to the folder with the HTML file
3. Run: python3 -m http.server 8000
4. Open: http://localhost:8000/url_shortener_modern.html
5. APIs will work perfectly!

Option 2: Node.js Server
1. Install: npm install -g http-server
2. Navigate to folder
3. Run: http-server
4. Open the provided URL

Option 3: VS Code Live Server
1. Install "Live Server" extension
2. Right-click HTML file
3. Select "Open with Live Server"
4. APIs will work!

Option 4: Upload to Web Hosting
â€¢ Upload to any web hosting service
â€¢ GitHub Pages, Netlify, Vercel, etc.
â€¢ Access via https:// URL
â€¢ Full API functionality

Why This Matters:
â€¢ file:// = Browsers block external APIs (security)
â€¢ http:// or https:// = APIs work normally
â€¢ This is a browser security feature, not a bug

What Happens in file:// Mode:
â€¢ All 5 APIs will fail
â€¢ Falls back to local storage
â€¢ URLs work but are longer
â€¢ Still functional, just not ideal

___________________________

Still Not Working?

Tell me exactly what's happening:
â€¢ What were you trying to do?
â€¢ What error message do you see?
â€¢ Which browser are you using?
â€¢ Have you tried the solutions above?

I'll provide personalized help!`,

          pricing: `PRICING

LinkShort is 100% FREE - No tricks, no trials!

___________________________

Free Forever:
â€¢ Unlimited URL shortening
â€¢ Unlimited QR code generation
â€¢ Comprehensive analytics
â€¢ Custom link aliases
â€¢ No credit card required
â€¢ No trial period
â€¢ No hidden fees
â€¢ No ads (coming soon)

___________________________

Why Free?
â€¢ We use free API services
â€¢ Community-driven project
â€¢ Data stored locally (no server costs)
â€¢ Passion project to help people

___________________________

Future Plans:

Premium tier (optional) for:
â€¢ Custom domains
â€¢ Advanced analytics
â€¢ Team features
â€¢ Priority support

Core features will ALWAYS be free!`,

          privacy: `PRIVACY & SECURITY

Your privacy is our top priority!

___________________________

Data Storage:
â€¢ All data stored locally in YOUR browser
â€¢ No server-side database
â€¢ You control your data
â€¢ Can clear anytime

___________________________

What We DON'T Collect:
â€¢ Personal information
â€¢ Tracking cookies
â€¢ Browsing history
â€¢ Contact lists
â€¢ Location (beyond analytics)

___________________________

What We DO:
â€¢ Store links locally only
â€¢ Use HTTPS for all connections
â€¢ Respect Do Not Track
â€¢ No third-party trackers
â€¢ Open architecture

___________________________

API Calls:

When shortening URLs, we send only the URL to free API services (is.gd, v.gd, Shrtco.de). No personal data attached.

___________________________

Your Rights:
â€¢ View all stored data (localStorage)
â€¢ Export your data
â€¢ Delete all data anytime
â€¢ Full transparency

We'll never sell or share your data. Period.`,

          features: `ALL FEATURES

Core Features:

URL Shortening:
â€¢ Instant, reliable shortening
â€¢ Multiple API support
â€¢ Fallback system
â€¢ Custom aliases

QR Code Generation:
â€¢ Auto-generated with every link
â€¢ Dark theme design
â€¢ High resolution
â€¢ Download/share
â€¢ Print-ready quality

Analytics:
â€¢ Real-time tracking
â€¢ Click tracking
â€¢ Unique visitors
â€¢ Device detection
â€¢ Browser stats
â€¢ OS distribution
â€¢ Geographic data
â€¢ Referrer tracking
â€¢ Time-based analytics

Account System:
â€¢ Cloud sync
â€¢ Access from anywhere
â€¢ Link management
â€¢ Data export

UI/UX:
â€¢ Dark Mode
â€¢ Beautiful interface
â€¢ Responsive design
â€¢ Mobile-friendly

___________________________

Link Management:
â€¢ Edit links
â€¢ Delete links
â€¢ Bulk operations
â€¢ Search & filter
â€¢ Sort options
â€¢ Export data
â€¢ Organize links

___________________________

Coming Soon:
â€¢ Custom domains
â€¢ Team collaboration
â€¢ API access
â€¢ Browser extension
â€¢ Mobile app
â€¢ Advanced reporting

What feature interests you most?`,

          compare: `LINKSHORT VS COMPETITORS

___________________________

LinkShort:
â€¢ 100% Free forever
â€¢ No registration required
â€¢ Privacy-first (local storage)
â€¢ Multiple API fallbacks
â€¢ Auto QR codes
â€¢ Real-time analytics
â€¢ No ads
â€¢ Open source (coming soon)

___________________________

Bitly:
â€¢ Limited free tier
â€¢ Registration required
â€¢ Paid plans: $29-$999/month
â€¢ Cloud storage
â€¢ Advanced analytics (paid)
â€¢ QR codes (paid feature)
â€¢ Ads on free links
â€¢ Proprietary

___________________________

TinyURL:
â€¢ Basic features free
â€¢ Limited analytics
â€¢ Paid plans: $9.99-$99.99/month
â€¢ No QR codes on free
â€¢ Simple interface
â€¢ Established service

___________________________

Rebrandly:
â€¢ Limited free links
â€¢ Paid plans: $29-$499/month
â€¢ Custom domain (paid)
â€¢ Good analytics (paid)
â€¢ Professional features
â€¢ Business-focused

___________________________

Short.io:
â€¢ Trial only free
â€¢ Paid plans: $20-$200/month
â€¢ Custom domains
â€¢ API access
â€¢ Team features
â€¢ Analytics dashboard

___________________________

Why Choose LinkShort?

Privacy:
â€¢ Data stays on your device
â€¢ No tracking
â€¢ Complete control

Cost:
â€¢ Free forever
â€¢ No limits
â€¢ All features included

Features:
â€¢ QR codes automatic
â€¢ Real-time analytics
â€¢ Custom aliases
â€¢ Multiple APIs

Reliability:
â€¢ Fallback system
â€¢ Always works
â€¢ 99.99% uptime

Simplicity:
â€¢ No registration
â€¢ Instant use
â€¢ Clean interface
â€¢ Easy to use

___________________________

Best for:
â€¢ Privacy-conscious users
â€¢ Quick shortening needs
â€¢ Students and learners
â€¢ Small businesses
â€¢ Personal use
â€¢ Anyone wanting free service

Try LinkShort - No signup, No payment, No hassle!`,

          developer: `MEET THE DEVELOPER

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DEVELOPER PROFILE

Full Name: Saimum Arafat
Role: Full-Stack Developer & UI/UX Designer
Location: [Your Location]
Specialty: Modern Web Applications

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CONNECT WITH ME

LinkedIn:
https://linkedin.com/in/saimum-arafat

Professional Profile:
â€¢ Full-Stack Web Developer
â€¢ JavaScript & Frontend Specialist
â€¢ UI/UX Design Expert
â€¢ API Integration Professional

Contact:
â€¢ Open to collaboration
â€¢ Feedback welcome
â€¢ Job opportunities
â€¢ Project inquiries

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ABOUT LINKSHORT PROJECT

What I Built:
LinkShort - A modern, privacy-first URL shortener

Development Timeline:
â€¢ Started: [Project Start Date]
â€¢ Status: Active & Maintained
â€¢ Updates: Regular & Continuous
â€¢ Lines of Code: 10,000+

Why I Built This:
â€¢ Frustrated with expensive alternatives
â€¢ Wanted to help people for free
â€¢ Passion for clean, beautiful UX
â€¢ Believe in privacy-first approach
â€¢ Love building useful tools

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TECHNICAL STACK

Frontend:
â€¢ HTML5 (Semantic markup)
â€¢ CSS3 (Advanced styling & animations)
â€¢ JavaScript ES6+ (Modern features)
â€¢ Vanilla JS (No frameworks!)

Architecture:
â€¢ Single-file application
â€¢ Self-contained system
â€¢ Zero external dependencies
â€¢ 100% offline capable
â€¢ Mobile-first responsive

APIs Integrated:
â€¢ is.gd URL Shortener
â€¢ v.gd URL Shortener
â€¢ Shrtco.de Service
â€¢ LocalStorage API
â€¢ Clipboard API
â€¢ QR Code Library (embedded)

Design:
â€¢ iOS-inspired dark theme
â€¢ Glassmorphism effects
â€¢ Smooth micro-interactions
â€¢ Gradient aesthetics
â€¢ Accessible UI/UX

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

FEATURES I DEVELOPED

Core Functionality:
â€¢ Multi-API URL shortening system
â€¢ Smart fallback mechanism
â€¢ Hash-based redirect engine
â€¢ Custom alias system
â€¢ Input validation & sanitization
â€¢ Error handling & recovery

User Interface:
â€¢ Dark mode design system
â€¢ Responsive layout (mobile/tablet/desktop)
â€¢ Smooth animations & transitions
â€¢ Loading states & feedback
â€¢ Toast notifications
â€¢ Modal dialogs

Analytics System:
â€¢ Real-time click tracking
â€¢ Device & browser detection
â€¢ Geographic location tracking
â€¢ Referrer source analysis
â€¢ Time-based patterns
â€¢ Data visualization
â€¢ CSV/JSON export

QR Code System:
â€¢ Automatic QR generation
â€¢ Dark theme integration
â€¢ High-resolution output
â€¢ Download functionality
â€¢ Print-ready quality

Account Management:
â€¢ User authentication
â€¢ Guest mode support
â€¢ LocalStorage database
â€¢ Session management
â€¢ Password security
â€¢ Data synchronization

AI Chatbot:
â€¢ Natural language processing
â€¢ Intent detection engine
â€¢ Context awareness system
â€¢ Sentiment analysis
â€¢ 12-topic knowledge base
â€¢ Conversation memory
â€¢ Smart fallback responses

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DEVELOPMENT PHILOSOPHY

My Core Principles:

1. PRIVACY FIRST
   - Your data belongs to YOU
   - No tracking or selling
   - Local storage only
   - Full transparency

2. FREE FOREVER
   - No paywalls ever
   - No artificial limits
   - No hidden costs
   - Accessible to all

3. BEAUTIFUL DESIGN
   - User experience matters
   - Every detail counts
   - Smooth & polished
   - Delightful interactions

4. PERFORMANCE FOCUSED
   - Fast loading times
   - Optimized code
   - Minimal resources
   - Smooth animations

5. ACCESSIBLE
   - Everyone can use it
   - No barriers
   - Simple & intuitive
   - Inclusive design

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PROJECT STATISTICS

Code Metrics:
â€¢ 10,000+ lines of code
â€¢ 1 HTML file (all-in-one)
â€¢ 0 external dependencies
â€¢ 100% vanilla JavaScript
â€¢ <100KB total size

Performance:
â€¢ <1 second load time
â€¢ Lighthouse score: 95+
â€¢ Fully responsive
â€¢ Works offline
â€¢ Zero lag

Maintenance:
â€¢ Active development
â€¢ Regular updates
â€¢ Bug fixes within 24h
â€¢ Feature requests welcome
â€¢ Community-driven

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

GET IN TOUCH

I'd Love To Hear From You!

Feedback & Suggestions:
   - What features do you want?
   - How can I improve?
   - What's working well?
   - What needs fixing?

Bug Reports:
   - Found a bug? Tell me!
   - Describe the issue
   - Steps to reproduce
   - Browser & device info

Feature Requests:
   - What's missing?
   - What would help you?
   - Any cool ideas?
   - Priority requests

Collaboration:
   - Open to partnerships
   - Code contributions welcome
   - Design feedback appreciated
   - Translation help needed

Professional:
   - Job opportunities
   - Freelance projects
   - Consulting work
   - Speaking engagements

Best Way To Reach:
Connect on LinkedIn: https://linkedin.com/in/saimum-arafat

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

FUN FACTS

Behind The Scenes:

Coffee-Fueled:
   Powered by countless cups of coffee!

Late-Night Coding:
   Most features built after midnight

Music Programming:
   Coded while listening to lo-fi beats

Self-Taught:
   Learned from docs, tutorials & practice

Passion Project:
   Built because I wanted to, not had to

Challenge Accepted:
   "Can't be done in one file?" Challenge accepted!

ðŸš€ **Zero Budget:**
   $0 spent on tools or services

â¤ï¸ **Built With Love:**
   Every line of code written with care

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ðŸŒŸ THE VISION**

**My Goal:**
To prove that amazing software can be:
â€¢ 100% free
â€¢ Privacy-respecting
â€¢ Beautifully designed
â€¢ Accessible to everyone
â€¢ Built by one person

**Future Plans:**
ðŸ”® Open source the code
ðŸ”® Build a community
ðŸ”® Add more features
ðŸ”® Mobile app version
ðŸ”® Browser extension
ðŸ”® API for developers
ðŸ”® Keep it FREE forever

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ðŸ™ THANK YOU**

**To YOU:**
For using LinkShort and supporting free, privacy-first software!

**Special Thanks:**
â€¢ Free API providers (is.gd, v.gd, Shrtco.de)
â€¢ Open-source community
â€¢ Early testers & feedback providers
â€¢ Everyone who shares LinkShort
â€¢ You, for caring about who built this!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**Built with â¤ï¸ by Saimum Arafat**

ðŸ”— **LinkedIn:** https://linkedin.com/in/saimum-arafat
ðŸ’» **Project:** LinkShort URL Shortener
ðŸŒ **Making the web better, one short link at a time!**

**Let's Connect!** ðŸš€`,

          help: `â“ **How Can I Help?**

I'm your LinkShort AI assistant! I can answer questions about:

**ðŸ“š Topics:**
ðŸ”— **URL Shortening** - How to create short links
ðŸ“Š **Analytics** - Understanding your data
ðŸ“± **QR Codes** - Generating & using QR codes
ðŸŒ **APIs** - Which services we use
âœï¸ **Custom Links** - Creating branded aliases
ðŸ‘¤ **Accounts** - Features & benefits
ðŸ”§ **Troubleshooting** - Fixing issues
ï¿½ **Pricing** - Cost (it's free!)
ðŸ”’ **Privacy** - Data security
âš¡ **Features** - All capabilities
ðŸ†š **Comparisons** - vs other services
ðŸ‘¨â€ðŸ’» **Developer** - About the creator

**ðŸ’¬ You can ask me anything like:**
â€¢ "How do I shorten a URL?"
â€¢ "What analytics do you track?"
â€¢ "Is this really free?"
â€¢ "How do QR codes work?"
â€¢ "Who created this?"
â€¢ "Tell me about the developer"
â€¢ "What's the difference between guest and user account?"
â€¢ "Why are my links not working?"
â€¢ "How do I create a custom link?"

**Or just chat naturally!** I understand:
â€¢ Questions in plain English
â€¢ Technical queries
â€¢ Casual conversation
â€¢ Multiple topics

What would you like to know? ðŸ˜Š`
        };

        // Get contextual information
        const context = getContextualResponse(lowerMessage, sentiment, conversationContext.lastTopic);
        const detectedIntent = extractIntent(lowerMessage);
        
        // Simulate realistic typing delay based on response length
        await new Promise(resolve => setTimeout(resolve, 400 + Math.random() * 1000));

        // CONVERSATION FLOW HANDLING WITH CONTEXT AWARENESS
        
        // Handle frustration with empathy
        if (patterns.frustration.some(word => lowerMessage.includes(word))) {
          conversationContext.lastTopic = 'troubleshoot';
          return `I hear your frustration, and I'm here to help!\n\nLet's get this sorted out together. Could you tell me:\n\nWhat exactly is happening?\nâ€¢ Are links not shortening?\nâ€¢ QR codes not showing?\nâ€¢ Something else?\n\nOnce I know the specific issue, I can guide you step-by-step to fix it!`;
        }
        
        // Handle excitement with enthusiasm
        if (patterns.excitement.some(word => lowerMessage.includes(word))) {
          return `That's wonderful to hear! I'm thrilled you're enjoying LinkShort!\n\nIs there anything specific you'd like to explore more? I'd love to show you some advanced features you might not know about!`;
        }
        
        // Smart greetings with time awareness
        if (patterns.greetings.some(word => lowerMessage.startsWith(word) || lowerMessage === word)) {
          const hour = new Date().getHours();
          let timeGreeting = hour < 12 ? 'Good morning' : hour < 18 ? 'Good afternoon' : 'Good evening';
          
          const isReturning = conversationContext.askedQuestions.length > 1;
          
          if (isReturning) {
            conversationContext.lastTopic = null;
            return `${timeGreeting}! Welcome back!\n\nI see we've chatted before. Need help with anything else?\n\nPopular actions:\nâ€¢ Shorten a new URL\nâ€¢ Check analytics\nâ€¢ Create custom link\nâ€¢ Troubleshoot an issue\n\nWhat can I do for you?`;
          }
          
          const greetingResponses = [
            `${timeGreeting}! I'm your intelligent LinkShort AI assistant.\n\nI'm here to help you:\nâ€¢ Shorten URLs in seconds\nâ€¢ Generate beautiful QR codes\nâ€¢ Track detailed analytics\nâ€¢ Create custom branded links\nâ€¢ Solve any problems\n\nWhat would you like to do today?`,
            `${timeGreeting}! Welcome to LinkShort!\n\nI notice you're new here! Let me help you:\n\nMost popular:\n1. Shorten a long URL (super easy!)\n2. Learn about our features\n3. Create a custom short link\n\nWhat interests you most?`,
            `${timeGreeting}! Great to meet you!\n\nFun fact: I'm an AI trained specifically on LinkShort, so I know everything about URL shortening, analytics, QR codes, and more!\n\nWhat brings you here today?`
          ];
          conversationContext.lastTopic = 'greeting';
          return greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
        }
        
        // Enhanced thanks responses with personality
        if (patterns.thanks.some(word => lowerMessage.includes(word))) {
          const thankResponses = [
            `You're absolutely welcome! Making your experience great is what I'm all about!\n\n${conversationContext.lastTopic ? `Want to learn more about ${conversationContext.lastTopic}?` : 'Anything else I can help with?'}`,
            `My pleasure! That's what I'm here for!\n\nPro tip: You can ask me about:\nâ€¢ URL shortening tricks\nâ€¢ Advanced analytics\nâ€¢ QR code customization\nâ€¢ Privacy & security\n\nWhat else would you like to know?`,
            `Happy to help! Your success with LinkShort is my success!\n\nFeel free to ask me anything - literally anything about LinkShort. I've got answers!`
          ];
          return thankResponses[Math.floor(Math.random() * thankResponses.length)];
        }
        
        // Warm goodbyes with session info
        if (patterns.goodbyes.some(word => lowerMessage.includes(word))) {
          const questionsAsked = conversationContext.askedQuestions.length;
          const sessionMinutes = Math.floor((Date.now() - conversationContext.sessionStartTime) / 60000);
          
          conversationContext.lastTopic = null;
          return `Goodbye! It was great chatting with you${questionsAsked > 3 ? ` (${questionsAsked} questions!)` : ''}!\n\nRemember:\nâ€¢ I'm always here 24/7\nâ€¢ No question is too small\nâ€¢ Come back anytime!\n\nHappy link shortening!`;
        }

        // ADVANCED INTENT DETECTION with smarter matching
        // ADVANCED INTENT DETECTION with smarter matching
        
        // URL Shortening queries - with action guidance
        const shortenPatterns = ['shorten', 'short', 'link', 'url', 'create link', 'make link', 'how to', 'create', 'make', 'generate link', 'get link', 'tiny'];
        if (shortenPatterns.some(p => lowerMessage.includes(p)) && !lowerMessage.includes('custom') && !lowerMessage.includes('alias')) {
          conversationContext.lastTopic = 'shorten';
          return context.prefix + knowledge.shorten + `\n\nNeed help with a specific step? Just ask! I can guide you through each part.`;
        }
        
        // Analytics queries - with insights
        const analyticsPatterns = ['analytic', 'track', 'stat', 'click', 'view', 'visit', 'data', 'metric', 'count', 'number', 'how many', 'report'];
        if (analyticsPatterns.some(p => lowerMessage.includes(p))) {
          conversationContext.lastTopic = 'analytics';
          return context.prefix + knowledge.analytics + `\n\nWant to know more about a specific metric? I can explain clicks, visitors, devices, browsers, and more in detail!`;
        }
        
        // QR Code queries - with tips
        const qrPatterns = ['qr', 'code', 'scan', 'barcode', 'camera', 'phone', 'mobile scan', 'scanner'];
        if (qrPatterns.some(p => lowerMessage.includes(p))) {
          conversationContext.lastTopic = 'qr';
          return context.prefix + knowledge.qr + `\n\nPro tip: QR codes work best when printed at least 2x2 inches for easy scanning!`;
        }
        
        // API queries - with technical details
        const apiPatterns = ['api', 'service', 'which', 'what api', 'tinyurl', 'is.gd', 'v.gd', 'shrtco', 'server', 'backend'];
        if (apiPatterns.some(p => lowerMessage.includes(p)) && !lowerMessage.includes('price') && !lowerMessage.includes('cost')) {
          conversationContext.lastTopic = 'apis';
          return context.prefix + knowledge.apis + `\n\nCurious about the technical implementation? I can explain how the fallback system works!`;
        }
        
        // Custom alias queries - with examples
        const customPatterns = ['custom', 'alias', 'personalize', 'choose', 'pick', 'brand', 'own link', 'my link', 'specific'];
        if (customPatterns.some(p => lowerMessage.includes(p))) {
          conversationContext.lastTopic = 'custom';
          return context.prefix + knowledge.custom + `\n\nNeed alias ideas? I can suggest good practices for memorable, professional short links!`;
        }
        
        // Account queries - with benefits
        const accountPatterns = ['account', 'login', 'sign up', 'register', 'user', 'signup', 'signin', 'guest', 'member'];
        if (accountPatterns.some(p => lowerMessage.includes(p))) {
          conversationContext.lastTopic = 'account';
          return context.prefix + knowledge.account + `\n\nNot sure if you need an account? I can help you decide based on your use case!`;
        }
        
        // Troubleshooting queries - with immediate help
        const troublePatterns = ['work', 'broken', 'not working', 'error', 'issue', 'problem', 'fix', 'debug', 'wrong', 'fail', 'doesnt', "doesn't", 'cant', "can't", 'wont', "won't"];
        if (troublePatterns.some(p => lowerMessage.includes(p))) {
          conversationContext.lastTopic = 'troubleshoot';
          return `I'm here to help fix that right away! ðŸ”§\n\n` + knowledge.troubleshoot + `\n\n**Can you tell me more specifically what's happening?** The more details, the better I can help!`;
        }
        
        // Pricing queries
        const pricingPatterns = ['price', 'cost', 'free', 'pay', 'subscription', 'money', 'charge', 'fee', 'premium', 'paid'];
        if (pricingPatterns.some(p => lowerMessage.includes(p))) {
          return knowledge.pricing;
        }
        
        // Privacy/Security queries
        const privacyPatterns = ['secure', 'safe', 'privacy', 'data', 'security', 'protect', 'encrypt', 'private', 'confidential', 'anonymous'];
        if (privacyPatterns.some(p => lowerMessage.includes(p))) {
          return knowledge.privacy;
        }
        
        // Features queries
        const featurePatterns = ['feature', 'capability', 'can do', 'what does', 'function', 'offer', 'provide', 'available', 'option'];
        if (featurePatterns.some(p => lowerMessage.includes(p))) {
          return knowledge.features;
        }
        
        // Comparison queries
        const comparePatterns = ['compare', 'versus', 'vs', 'better', 'difference', 'alternative', 'competitor', 'bitly', 'rebrandly'];
        if (comparePatterns.some(p => lowerMessage.includes(p))) {
          return knowledge.compare;
        }
        
        // Developer queries
        const developerPatterns = ['developer', 'creator', 'who made', 'who created', 'who built', 'author', 'owner', 'saimum', 'arafat', 'made this', 'created this', 'built this', 'behind this'];
        if (developerPatterns.some(p => lowerMessage.includes(p))) {
          return knowledge.developer;
        }
        
        // Help/Guide queries
        if (lowerMessage.includes('help') || lowerMessage.includes('guide') || lowerMessage.includes('what can') || 
            lowerMessage.includes('how can') || lowerMessage.includes('assist') || lowerMessage.includes('support')) {
          return knowledge.help;
        }

        // CONTEXT-AWARE RESPONSES for unmatched queries
        
        // Question detection
        if (patterns.questions.some(q => words.includes(q))) {
          return `Great question! ðŸ¤”\n\nWhile I may not have fully understood, here's what I know:\n\n**I can help with:**\nâ€¢ How to shorten URLs\nâ€¢ How analytics work\nâ€¢ How to create QR codes\nâ€¢ How to make custom links\nâ€¢ How our APIs work\nâ€¢ How accounts function\nâ€¢ How to troubleshoot issues\n\n**Could you rephrase your question or ask about one of these topics?**\n\nFor example:\nâ€¢ "How do I shorten a URL?"\nâ€¢ "What analytics do you track?"\nâ€¢ "How do QR codes work?"`;
        }
        
        // General conversation
        const conversationalResponses = [
          `I appreciate you chatting with me! ðŸ˜Š\n\n**Here's what I'm really good at:**\n\nðŸ”— **URL Shortening** - Creating short links\nðŸ“Š **Analytics** - Tracking link performance\nðŸ“± **QR Codes** - Generating scannable codes\nâœï¸ **Custom Links** - Branded aliases\nðŸ”§ **Troubleshooting** - Fixing issues\n\n**Try asking:**\nâ€¢ "How do I shorten a URL?"\nâ€¢ "Tell me about analytics"\nâ€¢ "What features do you have?"\nâ€¢ "Is this free?"\n\nWhat interests you most?`,
          
          `I'm your friendly LinkShort assistant! ðŸ¤–\n\n**My specialties:**\nâœ¨ Explaining how to shorten URLs\nâœ¨ Showing you all the features\nâœ¨ Helping troubleshoot problems\nâœ¨ Answering questions about privacy & pricing\nâœ¨ Teaching you about QR codes & analytics\n\n**Popular questions:**\nâ€¢ "How does URL shortening work?"\nâ€¢ "What makes LinkShort different?"\nâ€¢ "Can I create custom short links?"\nâ€¢ "Is my data safe?"\n\nWhat would you like to know? ðŸ’¬`,
          
          `Thanks for reaching out! ðŸ‘‹\n\n**I'm powered by AI to help you with:**\n\nðŸ“š **Learning** - How LinkShort works\nðŸŽ¯ **Setup** - Getting started quickly  \nðŸ” **Discovery** - Exploring features\nðŸ’¡ **Tips** - Best practices\nðŸ†˜ **Support** - Solving problems\n\n**You can ask me anything about:**\nURL shortening â€¢ QR codes â€¢ Analytics â€¢ Custom links â€¢ Privacy â€¢ Pricing â€¢ Features â€¢ Troubleshooting\n\n**Or try:** "What can you do?" to see everything! ï¿½`
        ];
        
        return conversationalResponses[Math.floor(Math.random() * conversationalResponses.length)];
      }

      // Initialize from localStorage
      function init() {
        // Check for redirect first
        if (handleRedirect()) {
          return; // Stop initialization if redirecting
        }
        
        // Initialize default admin user
        initDefaultAdmin();

        // Load users
        const savedUsers = localStorage.getItem("linkShortUsers");
        if (savedUsers) {
          try {
            users = JSON.parse(savedUsers);
          } catch (e) {
            console.error("Failed to load users", e);
          }
        }

        // Check for logged-in user
        const savedUser = localStorage.getItem("linkShortCurrentUser");
        if (savedUser) {
          try {
            currentUser = JSON.parse(savedUser);
            updateAuthUI();
            loadUserData();
          } catch (e) {
            console.error("Failed to load current user", e);
          }
        }

        // Load public URLs (for guest mode)
        const saved = localStorage.getItem("shortenedUrls");
        if (saved) {
          try {
            urls = JSON.parse(saved);
            updateHistory();
          } catch (e) {
            console.error("Failed to load saved URLs", e);
          }
        }

        // Add Enter key listener
        document.getElementById("urlInput").addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            shortenUrl();
          }
        });

        // Add custom slug validation listener
        const customSlugInput = document.getElementById("customSlugInput");
        customSlugInput.addEventListener("input", validateCustomSlug);
        customSlugInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            shortenUrl();
          }
        });

        // Edit slug validation
        const editSlugInput = document.getElementById("editCustomSlug");
        if (editSlugInput) {
          editSlugInput.addEventListener("input", validateEditSlug);
        }
      }

      // Save to localStorage
      function saveUrls() {
        try {
          if (currentUser) {
            // Save to user's data
            users[currentUser.email].urls = urls;
            localStorage.setItem("linkShortUsers", JSON.stringify(users));
          } else {
            // Save to public storage
            localStorage.setItem("shortenedUrls", JSON.stringify(urls));
          }
        } catch (e) {
          console.error("Failed to save URLs", e);
        }
      }

      // Initialize default admin user
      function initDefaultAdmin() {
        const savedUsers = localStorage.getItem("linkShortUsers");
        let existingUsers = {};

        if (savedUsers) {
          try {
            existingUsers = JSON.parse(savedUsers);
          } catch (e) {
            console.error("Failed to parse users", e);
          }
        }

        // Create admin user if it doesn't exist
        if (!existingUsers["admin@linkshort.io"]) {
          existingUsers["admin@linkshort.io"] = {
            name: "Admin User",
            password: "admin123",
            urls: [
              {
                short: "https://linkshort.io/demo",
                original: "https://github.com",
                code: "demo",
                created: new Date().toISOString(),
                isCustom: true,
                clicks: 42,
              },
              {
                short: "https://linkshort.io/example",
                original: "https://www.example.com",
                code: "example",
                created: new Date(Date.now() - 86400000).toISOString(),
                isCustom: false,
                clicks: 15,
              },
            ],
            createdAt: new Date().toISOString(),
            isAdmin: true,
          };
          localStorage.setItem("linkShortUsers", JSON.stringify(existingUsers));
        }
      }

      // Toggle password visibility
      function togglePassword(inputId, button) {
        const input = document.getElementById(inputId);
        if (input.type === "password") {
          input.type = "text";
          button.innerHTML = "ðŸ™ˆ";
        } else {
          input.type = "password";
          button.innerHTML = "ðŸ‘ï¸";
        }
      }

      // Authentication Functions
      function updateAuthUI() {
        const guestNav = document.getElementById("guestNav");
        const userNav = document.getElementById("userNav");
        const userEmail = document.getElementById("userEmail");
        const userAvatar = document.getElementById("userAvatar");

        if (currentUser) {
          guestNav.style.display = "none";
          userNav.style.display = "flex";
          userEmail.textContent = currentUser.email;
          userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
        } else {
          guestNav.style.display = "flex";
          userNav.style.display = "none";
        }
      }

      function showAuthModal(mode = "login") {
        const modal = document.getElementById("authModal");
        switchAuthMode(mode);
        modal.classList.add("show");
        document.body.style.overflow = "hidden";
      }

      function closeAuthModal(event) {
        if (
          !event ||
          event.target.id === "authModal" ||
          event.target.classList.contains("modal-close")
        ) {
          const modal = document.getElementById("authModal");
          modal.classList.remove("show");
          document.body.style.overflow = "";
        }
      }

      function switchAuthMode(mode) {
        const loginForm = document.getElementById("loginForm");
        const signupForm = document.getElementById("signupForm");
        const recoveryForm = document.getElementById("recoveryForm");
        const title = document.getElementById("authModalTitle");
        const subtitle = document.getElementById("authModalSubtitle");

        loginForm.style.display = "none";
        signupForm.style.display = "none";
        recoveryForm.style.display = "none";

        if (mode === "login") {
          loginForm.style.display = "block";
          title.textContent = "Welcome Back";
          subtitle.textContent = "Sign in to access your dashboard";
        } else if (mode === "signup") {
          signupForm.style.display = "block";
          title.textContent = "Create Account";
          subtitle.textContent = "Join LinkShort to manage your links";
        } else if (mode === "recovery") {
          recoveryForm.style.display = "block";
          title.textContent = "Password Recovery";
          subtitle.textContent = "We'll send you a recovery link";
        }
      }

      function handleLogin(event) {
        event.preventDefault();
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;
        const remember = document.getElementById("rememberMe").checked;

        // Check if user exists
        if (!users[email]) {
          showToast(
            "Login Failed",
            "No account found with this email",
            "error"
          );
          return;
        }

        // Verify password
        if (users[email].password !== password) {
          showToast("Login Failed", "Incorrect password", "error");
          return;
        }

        // Login successful
        currentUser = {
          email: email,
          name: users[email].name,
        };

        localStorage.setItem(
          "linkShortCurrentUser",
          JSON.stringify(currentUser)
        );
        updateAuthUI();
        loadUserData();
        closeAuthModal();

        const welcomeMsg = users[email].isAdmin
          ? `Welcome back, Admin! ðŸŽ‰`
          : `Welcome back, ${currentUser.name}! ðŸ‘‹`;

        showToast("Login Successful", welcomeMsg, "success");
        showPage("dashboard");
      }

      function handleSignup(event) {
        event.preventDefault();
        const name = document.getElementById("signupName").value;
        const email = document.getElementById("signupEmail").value;
        const password = document.getElementById("signupPassword").value;
        const confirmPassword = document.getElementById(
          "signupConfirmPassword"
        ).value;

        // Validate
        if (password !== confirmPassword) {
          showToast("Signup Failed", "Passwords do not match", "error");
          return;
        }

        if (users[email]) {
          showToast("Signup Failed", "Email already registered", "error");
          return;
        }

        // Create user
        users[email] = {
          name: name,
          password: password,
          urls: [],
          createdAt: new Date().toISOString(),
        };

        localStorage.setItem("linkShortUsers", JSON.stringify(users));

        // Auto login
        currentUser = { email, name };
        localStorage.setItem(
          "linkShortCurrentUser",
          JSON.stringify(currentUser)
        );

        updateAuthUI();
        loadUserData();
        closeAuthModal();
        showToast("Account Created!", `Welcome ${name}!`, "success");
        showPage("dashboard");
      }

      function handlePasswordRecovery(event) {
        event.preventDefault();
        const email = document.getElementById("recoveryEmail").value;

        if (!users[email]) {
          showToast(
            "Recovery Failed",
            "No account found with this email",
            "error"
          );
          return;
        }

        // Simulate sending recovery email
        showToast(
          "Recovery Email Sent",
          "Check your inbox for recovery instructions",
          "success"
        );
        setTimeout(() => switchAuthMode("login"), 2000);
      }

      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          currentUser = null;
          localStorage.removeItem("linkShortCurrentUser");
          updateAuthUI();
          showPage("home");
          showToast(
            "Logged Out",
            "You have been logged out successfully",
            "success"
          );
        }
      }

      // Page Navigation
      function showPage(pageName) {
        const pages = ["homePage", "dashboardPage"];
        pages.forEach((page) => {
          document.getElementById(page).classList.remove("active");
        });
        document.getElementById(pageName + "Page").classList.add("active");

        if (pageName === "dashboard") {
          updateDashboard();
        }
      }

      // Dashboard Functions
      function loadUserData() {
        if (currentUser && users[currentUser.email]) {
          urls = users[currentUser.email].urls || [];
          updateDashboard();

          // Show admin badge if admin
          const adminBadge = document.getElementById("adminBadge");
          const adminPanelTab = document.getElementById("adminPanelTab");

          if (adminBadge && users[currentUser.email].isAdmin) {
            adminBadge.style.display = "block";
            if (adminPanelTab) adminPanelTab.style.display = "block";
            loadAdminData();
          } else {
            if (adminBadge) adminBadge.style.display = "none";
            if (adminPanelTab) adminPanelTab.style.display = "none";
          }
        }
      }

      function updateDashboard() {
        if (!currentUser) return;

        // Update stats
        const totalLinks = urls.length;
        const totalClicks = urls.reduce(
          (sum, url) => sum + (url.clicks || 0),
          0
        );
        const customLinks = urls.filter((url) => url.isCustom).length;

        document.getElementById("totalLinks").textContent = totalLinks;
        document.getElementById("totalClicks").textContent = totalClicks;
        document.getElementById("customLinks").textContent = customLinks;

        // Update links list
        const container = document.getElementById("dashboardLinks");

        if (urls.length === 0) {
          container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ”—</div>
                        <div class="empty-state-text">No links yet. Create your first one!</div>
                    </div>
                `;
          return;
        }

        container.innerHTML = urls
          .map(
            (u, index) => `
                <div class="link-card">
                    <div class="link-card-header">
                        <div class="link-card-info">
                            <div class="link-card-short">${u.short}</div>
                            <div class="link-card-original">${u.original}</div>
                        </div>
                        <div class="link-card-actions">
                            <button class="link-action-btn stats" onclick="viewStats(${index})" title="View Analytics">ðŸ“Š</button>
                            <button class="link-action-btn" onclick="copyFromHistory('${u.short.replace(
                              /'/g,
                              "\\'"
                            )}')">ðŸ“‹</button>
                            <button class="link-action-btn edit" onclick="editLink(${index})">âœï¸</button>
                            <button class="link-action-btn delete" onclick="deleteLink(${index})">ðŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="link-card-meta">
                        <div class="link-meta-item">
                            <span class="link-meta-icon">ðŸ‘ï¸</span>
                            <span>${u.clicks || 0} clicks</span>
                        </div>
                        <div class="link-meta-item">
                            <span class="link-meta-icon">ðŸ“…</span>
                            <span>${new Date(
                              u.created
                            ).toLocaleDateString()}</span>
                        </div>
                        ${
                          u.isCustom
                            ? '<div class="link-meta-item"><span class="link-meta-icon">âœ¨</span><span>Custom</span></div>'
                            : ""
                        }
                    </div>
                </div>
            `
          )
          .join("");
      }

      function switchTab(tabName) {
        // Update tab buttons
        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (btn.onclick && btn.onclick.toString().includes(tabName)) {
            btn.classList.add("active");
          }
        });

        // Update tab content
        document
          .querySelectorAll(".tab-content")
          .forEach((content) => content.classList.remove("active"));
        document.getElementById(tabName + "Tab").classList.add("active");
      }

      function editLink(index) {
        const link = urls[index];
        document.getElementById("editLinkId").value = index;
        document.getElementById("editOriginalUrl").value = link.original;
        document.getElementById("editCustomSlug").value = link.code;

        const modal = document.getElementById("editLinkModal");
        modal.classList.add("show");
        document.body.style.overflow = "hidden";
      }

      function closeEditLinkModal(event) {
        if (
          !event ||
          event.target.id === "editLinkModal" ||
          event.target.classList.contains("modal-close")
        ) {
          const modal = document.getElementById("editLinkModal");
          modal.classList.remove("show");
          document.body.style.overflow = "";
          document.getElementById("editSlugInfo").textContent = "";
        }
      }

      function validateEditSlug() {
        const input = document.getElementById("editCustomSlug");
        const info = document.getElementById("editSlugInfo");
        const currentIndex = parseInt(
          document.getElementById("editLinkId").value
        );
        const slug = input.value.trim();

        if (!slug) {
          info.textContent = "";
          info.className = "slug-info";
          return;
        }

        if (!isValidSlug(slug)) {
          info.innerHTML =
            '<span class="slug-info-icon">âš ï¸</span> Use 3-30 characters: letters, numbers, hyphens, underscores';
          info.className = "slug-info invalid";
          return;
        }

        // Check if taken by another link
        const isTaken = urls.some(
          (u, i) =>
            i !== currentIndex && u.code.toLowerCase() === slug.toLowerCase()
        );
        if (isTaken) {
          info.innerHTML =
            '<span class="slug-info-icon">âŒ</span> This slug is already taken';
          info.className = "slug-info taken";
          return;
        }

        info.innerHTML = '<span class="slug-info-icon">âœ…</span> Available!';
        info.className = "slug-info available";
      }

      function handleEditLink(event) {
        event.preventDefault();
        const index = parseInt(document.getElementById("editLinkId").value);
        const newSlug = document.getElementById("editCustomSlug").value.trim();

        if (!isValidSlug(newSlug)) {
          showToast("Invalid Slug", "Please enter a valid slug", "error");
          return;
        }

        // Check if taken
        const isTaken = urls.some(
          (u, i) =>
            i !== index && u.code.toLowerCase() === newSlug.toLowerCase()
        );
        if (isTaken) {
          showToast("Slug Taken", "This slug is already in use", "error");
          return;
        }

        // Update link
        urls[index].code = newSlug;
        urls[index].short = shortDomain + newSlug;
        urls[index].isCustom = true;

        saveUrls();
        updateDashboard();
        closeEditLinkModal();
        showToast(
          "Link Updated",
          "Your link alias has been changed",
          "success"
        );
      }

      function deleteLink(index) {
        const link = urls[index];
        if (confirm(`Delete link ${link.short}?`)) {
          urls.splice(index, 1);
          saveUrls();
          updateDashboard();
          showToast("Link Deleted", "The link has been removed", "success");
        }
      }

      let currentAnalyticsIndex = null;

      function viewStats(index) {
        currentAnalyticsIndex = index;
        const link = urls[index];
        if (!link.analytics) {
          link.analytics = {
            clickHistory: [], totalClicks: 0, uniqueVisitors: new Set(),
            devices: {}, browsers: {}, os: {}, locations: {}, referrers: {},
            hourlyData: {}, dailyData: {}
          };
        }
        if (link.analytics.uniqueVisitors instanceof Set) {
          link.analytics.uniqueVisitors = Array.from(link.analytics.uniqueVisitors);
        }
        document.getElementById("analyticsSubtitle").textContent = `Analytics for ${link.code}`;
        loadAnalyticsData(link);
        document.getElementById("analyticsModal").classList.add("show");
      }

      function closeAnalyticsModal(event) {
        if (event && event.target.classList.contains("modal-overlay")) {
          document.getElementById("analyticsModal").classList.remove("show");
        } else if (!event) {
          document.getElementById("analyticsModal").classList.remove("show");
        }
      }

      function loadAnalyticsData(link) {
        const analytics = link.analytics;
        const uniqueVisitors = Array.isArray(analytics.uniqueVisitors) ? analytics.uniqueVisitors : Array.from(analytics.uniqueVisitors);
        document.getElementById("statTotalClicks").textContent = analytics.totalClicks || 0;
        document.getElementById("statUniqueVisitors").textContent = uniqueVisitors.length;
        const topLocation = getTopItem(analytics.locations);
        document.getElementById("statTopLocation").textContent = topLocation || "-";
        const topDevice = getTopItem(analytics.devices);
        document.getElementById("statTopDevice").textContent = topDevice || "-";
        drawDeviceChart(analytics.devices);
        drawBrowserChart(analytics.browsers);
        drawLocationChart(analytics.locations);
        drawTimeChart(analytics.hourlyData);
        loadRecentClicksTable(analytics.clickHistory);
      }

      function getTopItem(obj) {
        if (!obj || Object.keys(obj).length === 0) return null;
        return Object.entries(obj).sort((a, b) => b[1] - a[1])[0][0];
      }

      function drawDeviceChart(devices) {
        const canvas = document.getElementById("deviceChart");
        const ctx = canvas.getContext("2d");
        const legend = document.getElementById("deviceLegend");
        drawPieChart(ctx, canvas, devices, legend, ["#667eea", "#764ba2", "#11998e", "#ee0979", "#5AC8FA"]);
      }

      function drawBrowserChart(browsers) {
        const canvas = document.getElementById("browserChart");
        const ctx = canvas.getContext("2d");
        const legend = document.getElementById("browserLegend");
        drawPieChart(ctx, canvas, browsers, legend, ["#667eea", "#11998e", "#ee0979", "#FF9F0A", "#5AC8FA"]);
      }

      function drawLocationChart(locations) {
        const canvas = document.getElementById("locationChart");
        const ctx = canvas.getContext("2d");
        const legend = document.getElementById("locationLegend");
        drawPieChart(ctx, canvas, locations, legend, ["#667eea", "#764ba2", "#11998e", "#38ef7d", "#ee0979", "#ff6a00"]);
      }

      function drawPieChart(ctx, canvas, data, legendEl, colors) {
        const width = (canvas.width = canvas.offsetWidth);
        const height = (canvas.height = 250);
        ctx.clearRect(0, 0, width, height);
        if (!data || Object.keys(data).length === 0) {
          ctx.fillStyle = "#666";
          ctx.font = "14px -apple-system";
          ctx.textAlign = "center";
          ctx.fillText("No data yet", width / 2, height / 2);
          legendEl.innerHTML = "";
          return;
        }
        const entries = Object.entries(data).sort((a, b) => b[1] - a[1]);
        const total = entries.reduce((sum, [, value]) => sum + value, 0);
        const centerX = width / 2;
        const centerY = height / 2;
        const radius = Math.min(width, height) / 3;
        let currentAngle = -Math.PI / 2;
        entries.forEach(([label, value], index) => {
          const sliceAngle = (value / total) * 2 * Math.PI;
          ctx.fillStyle = colors[index % colors.length];
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
          ctx.closePath();
          ctx.fill();
          ctx.strokeStyle = "rgba(0, 0, 0, 0.2)";
          ctx.lineWidth = 1;
          ctx.stroke();
          currentAngle += sliceAngle;
        });
        legendEl.innerHTML = entries.map(([label, value], index) => {
          const percentage = ((value / total) * 100).toFixed(1);
          return `<div class="legend-item"><div class="legend-color" style="background: ${colors[index % colors.length]}"></div><span><strong>${label}:</strong> ${value} (${percentage}%)</span></div>`;
        }).join("");
      }

      function drawTimeChart(hourlyData) {
        const canvas = document.getElementById("timeChart");
        const ctx = canvas.getContext("2d");
        const width = (canvas.width = canvas.offsetWidth);
        const height = (canvas.height = 250);
        ctx.clearRect(0, 0, width, height);
        if (!hourlyData || Object.keys(hourlyData).length === 0) {
          ctx.fillStyle = "#666";
          ctx.font = "14px -apple-system";
          ctx.textAlign = "center";
          ctx.fillText("No data yet", width / 2, height / 2);
          return;
        }
        const hours = Array.from({ length: 24 }, (_, i) => i);
        const data = hours.map((h) => hourlyData[h] || 0);
        const maxValue = Math.max(...data, 1);
        const padding = 40;
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        const barWidth = chartWidth / 24;
        data.forEach((value, index) => {
          const barHeight = (value / maxValue) * chartHeight;
          const x = padding + index * barWidth;
          const y = height - padding - barHeight;
          const gradient = ctx.createLinearGradient(0, y, 0, height - padding);
          gradient.addColorStop(0, "#667eea");
          gradient.addColorStop(1, "#764ba2");
          ctx.fillStyle = gradient;
          ctx.fillRect(x + 2, y, barWidth - 4, barHeight);
        });
        ctx.strokeStyle = "rgba(255, 255, 255, 0.2)";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(padding, height - padding);
        ctx.lineTo(width - padding, height - padding);
        ctx.stroke();
        ctx.fillStyle = "#999";
        ctx.font = "11px -apple-system";
        ctx.textAlign = "center";
        hours.forEach((hour, index) => {
          if (hour % 3 === 0) {
            const x = padding + index * barWidth + barWidth / 2;
            ctx.fillText(`${hour}h`, x, height - padding + 20);
          }
        });
      }

      function loadRecentClicksTable(clickHistory) {
        const tbody = document.getElementById("recentClicksBody");
        if (!clickHistory || clickHistory.length === 0) {
          tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">No clicks yet</td></tr>';
          return;
        }
        const recent = clickHistory.slice(-20).reverse();
        tbody.innerHTML = recent.map(click => `<tr><td>${new Date(click.timestamp).toLocaleString()}</td><td>${click.location || "Unknown"}</td><td>${click.device || "Unknown"}</td><td>${click.browser || "Unknown"}</td><td>${click.referrer || "Direct"}</td></tr>`).join("");
      }

      function simulateClick() {
        if (currentAnalyticsIndex === null) return;
        const link = urls[currentAnalyticsIndex];
        const devices = ["Desktop", "Mobile", "Tablet"];
        const browsers = ["Chrome", "Firefox", "Safari", "Edge", "Opera"];
        const osNames = ["Windows", "macOS", "Linux", "iOS", "Android"];
        const locations = ["New York, US", "London, UK", "Tokyo, JP", "Sydney, AU", "Paris, FR", "Berlin, DE"];
        const referrers = ["Google", "Facebook", "Twitter", "Direct", "LinkedIn", "Reddit"];
        const clickData = {
          timestamp: new Date().toISOString(),
          device: devices[Math.floor(Math.random() * devices.length)],
          browser: browsers[Math.floor(Math.random() * browsers.length)],
          os: osNames[Math.floor(Math.random() * osNames.length)],
          location: locations[Math.floor(Math.random() * locations.length)],
          referrer: referrers[Math.floor(Math.random() * referrers.length)],
          ip: `192.168.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`
        };
        link.analytics.clickHistory.push(clickData);
        link.analytics.totalClicks++;
        link.analytics.devices[clickData.device] = (link.analytics.devices[clickData.device] || 0) + 1;
        link.analytics.browsers[clickData.browser] = (link.analytics.browsers[clickData.browser] || 0) + 1;
        link.analytics.os[clickData.os] = (link.analytics.os[clickData.os] || 0) + 1;
        link.analytics.locations[clickData.location] = (link.analytics.locations[clickData.location] || 0) + 1;
        link.analytics.referrers[clickData.referrer] = (link.analytics.referrers[clickData.referrer] || 0) + 1;
        const hour = new Date().getHours();
        link.analytics.hourlyData[hour] = (link.analytics.hourlyData[hour] || 0) + 1;
        if (!Array.isArray(link.analytics.uniqueVisitors)) link.analytics.uniqueVisitors = [];
        if (!link.analytics.uniqueVisitors.includes(clickData.ip)) link.analytics.uniqueVisitors.push(clickData.ip);
        link.clicks = link.analytics.totalClicks;
        saveUrls();
        loadAnalyticsData(link);
        showToast("Click Simulated!", `Visitor from ${clickData.location} on ${clickData.device}`, "success");
      }

      function clearUserHistory() {
        if (urls.length === 0) {
          showToast("Already Empty", "No links to clear", "info");
          return;
        }

        if (confirm("Are you sure you want to delete all your links?")) {
          urls = [];
          saveUrls();
          updateDashboard();
          showToast("Cleared", "All links have been deleted", "success");
        }
      }

      // Bulk URL Shortening
      function bulkShortenUrls() {
        const textarea = document.getElementById("bulkUrlInput");
        const resultsDiv = document.getElementById("bulkResults");
        const progressDiv = document.getElementById("bulkProgress");
        const progressBar = document.getElementById("progressBar");
        const progressText = document.getElementById("progressText");
        const statsDiv = document.getElementById("bulkStats");
        const bulkShortenBtn = document.getElementById("bulkShortenBtn");
        const copyAllBtn = document.getElementById("copyAllBtn");
        const downloadBtn = document.getElementById("downloadBtn");

        const urlList = textarea.value
          .trim()
          .split("\n")
          .filter((url) => url.trim());

        if (urlList.length === 0) {
          showToast("No URLs", "Please enter at least one URL", "error");
          return;
        }

        if (urlList.length > 100) {
          showToast(
            "Too Many URLs",
            "Please limit to 100 URLs at once",
            "error"
          );
          return;
        }

        // Reset UI
        resultsDiv.innerHTML = "";
        resultsDiv.style.display = "block";
        progressDiv.classList.add("show");
        statsDiv.style.display = "none";
        copyAllBtn.style.display = "none";
        downloadBtn.style.display = "none";

        // Disable button
        bulkShortenBtn.disabled = true;
        bulkShortenBtn.innerHTML =
          '<span class="spinner"></span> Processing...';

        let successCount = 0;
        let errorCount = 0;
        let processedCount = 0;
        const bulkResultsData = [];

        // Process URLs with delay for smooth animation
        urlList.forEach((longUrl, index) => {
          setTimeout(() => {
            const url = longUrl.trim();
            const resultItem = document.createElement("div");
            processedCount++;

            // Update progress
            const progressPercent = (processedCount / urlList.length) * 100;
            progressBar.style.width = progressPercent + "%";
            progressText.textContent = `Processing ${processedCount} of ${urlList.length} URLs...`;

            if (!isValidUrl(url)) {
              resultItem.className = "bulk-result-item error";
              resultItem.innerHTML = `
                            <div class="bulk-result-url" title="${url}">${url}</div>
                            <div class="bulk-result-error">âŒ Invalid URL</div>
                        `;
              errorCount++;
              bulkResultsData.push({
                original: url,
                short: null,
                error: "Invalid URL",
              });
            } else {
              // Generate short code
              let shortCode = generateShortCode();
              while (isSlugTaken(shortCode)) {
                shortCode = generateShortCode();
              }

              const shortUrl = shortDomain + shortCode;

              // Add to user's URLs
              urls.unshift({
                short: shortUrl,
                original: url,
                code: shortCode,
                created: new Date().toISOString(),
                isCustom: false,
                clicks: 0,
              });

              resultItem.className = "bulk-result-item success";
              resultItem.innerHTML = `
                            <div class="bulk-result-url" title="${url}">${url}</div>
                            <div class="bulk-result-short">${shortUrl}</div>
                            <button class="bulk-copy-btn" onclick="copyText('${shortUrl}')">ðŸ“‹</button>
                        `;
              successCount++;
              bulkResultsData.push({
                original: url,
                short: shortUrl,
                error: null,
              });
            }

            resultsDiv.insertBefore(resultItem, resultsDiv.firstChild);

            // If all processed
            if (processedCount === urlList.length) {
              // Save and update
              saveUrls();
              updateDashboard();

              // Update stats
              document.getElementById("bulkTotal").textContent = urlList.length;
              document.getElementById("bulkSuccess").textContent = successCount;
              document.getElementById("bulkError").textContent = errorCount;
              statsDiv.style.display = "flex";

              // Hide progress
              setTimeout(() => {
                progressDiv.classList.remove("show");
              }, 500);

              // Re-enable button
              bulkShortenBtn.disabled = false;
              bulkShortenBtn.innerHTML = "<span>âš¡</span> Shorten All URLs";

              // Show additional buttons
              if (successCount > 0) {
                copyAllBtn.style.display = "block";
                downloadBtn.style.display = "block";
              }

              showToast(
                "Bulk Complete!",
                `${successCount} created, ${errorCount} failed`,
                "success"
              );

              // Store results for export
              window.bulkResultsData = bulkResultsData;
            }
          }, index * 100); // Stagger by 100ms for smooth animation
        });
      }

      function clearBulkInput() {
        document.getElementById("bulkUrlInput").value = "";
        document.getElementById("bulkResults").style.display = "none";
        document.getElementById("bulkResults").innerHTML = "";
        document.getElementById("bulkProgress").classList.remove("show");
        document.getElementById("bulkStats").style.display = "none";
        document.getElementById("copyAllBtn").style.display = "none";
        document.getElementById("downloadBtn").style.display = "none";
        document.getElementById("progressBar").style.width = "0%";
      }

      // Copy text helper
      function copyText(text) {
        navigator.clipboard
          .writeText(text)
          .then(() => {
            showToast("Copied!", text, "success");
          })
          .catch(() => {
            showToast("Copy Failed", "Please try again", "error");
          });
      }

      // Copy all bulk links
      function copyAllBulkLinks() {
        if (!window.bulkResultsData) return;

        const successLinks = window.bulkResultsData
          .filter((item) => item.short)
          .map((item) => item.short)
          .join("\n");

        if (successLinks) {
          navigator.clipboard
            .writeText(successLinks)
            .then(() => {
              const count = successLinks.split("\n").length;
              showToast(
                "All Links Copied!",
                `${count} URLs copied to clipboard`,
                "success"
              );
            })
            .catch(() => {
              showToast("Copy Failed", "Please try again", "error");
            });
        }
      }

      // Download bulk results as CSV
      function downloadBulkResults() {
        if (!window.bulkResultsData) return;

        let csv = "Original URL,Shortened URL,Status\n";
        window.bulkResultsData.forEach((item) => {
          const status = item.error || "Success";
          const short = item.short || "N/A";
          csv += `"${item.original}","${short}","${status}"\n`;
        });

        const blob = new Blob([csv], { type: "text/csv" });
        const url = window.URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = `linkshort-bulk-${Date.now()}.csv`;
        link.click();
        window.URL.revokeObjectURL(url);

        showToast("Downloaded!", "Bulk results exported to CSV", "success");
      }

      // Quick access to bulk shortening from home page
      function quickBulkAccess() {
        showPage("dashboard");
        setTimeout(() => {
          switchTab("bulkShorten");
          document.getElementById("bulkUrlInput").focus();
        }, 300);
      }

      // Generate random short code
      function generateShortCode() {
        const chars =
          "ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789";
        let code = "";
        for (let i = 0; i < 6; i++) {
          code += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return code;
      }

      // Validate URL
      function isValidUrl(str) {
        try {
          const url = new URL(str);
          return url.protocol === "http:" || url.protocol === "https:";
        } catch (e) {
          return false;
        }
      }

      // Validate custom slug
      function isValidSlug(slug) {
        // Allow letters, numbers, hyphens, and underscores
        // Must start with a letter or number
        // Length between 3 and 30 characters
        const slugRegex = /^[a-zA-Z0-9][a-zA-Z0-9_-]{2,29}$/;
        return slugRegex.test(slug);
      }

      // Check if slug is already taken
      function isSlugTaken(slug) {
        return urls.some((u) => u.code.toLowerCase() === slug.toLowerCase());
      }

      // Real-time slug validation
      function validateCustomSlug() {
        const input = document.getElementById("customSlugInput");
        const info = document.getElementById("slugInfo");
        const slug = input.value.trim();

        if (!slug) {
          info.textContent = "";
          info.className = "slug-info";
          return;
        }

        if (!isValidSlug(slug)) {
          info.innerHTML =
            '<span class="slug-info-icon">âš ï¸</span> Use 3-30 characters: letters, numbers, hyphens, underscores';
          info.className = "slug-info invalid";
          return;
        }

        if (isSlugTaken(slug)) {
          info.innerHTML =
            '<span class="slug-info-icon">âŒ</span> This slug is already taken';
          info.className = "slug-info taken";
          return;
        }

        info.innerHTML = '<span class="slug-info-icon">âœ…</span> Available!';
        info.className = "slug-info available";
      }

      // Show toast notification
      function showToast(title, message, type = "info") {
        const container = document.getElementById("toastContainer");
        const toast = document.createElement("div");
        toast.className = "toast";

        const icons = {
          success: "âœ…",
          error: "âŒ",
          info: "â„¹ï¸",
        };

        toast.innerHTML = `
                <div class="toast-icon">${icons[type] || icons.info}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    ${
                      message
                        ? `<div class="toast-message">${message}</div>`
                        : ""
                    }
                </div>
            `;

        container.appendChild(toast);

        // Trigger animation
        setTimeout(() => toast.classList.add("show"), 10);

        // Remove after delay
        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      // Shorten URL using multiple free APIs
      async function shortenUrl() {
        const input = document.getElementById("urlInput");
        const customSlugInput = document.getElementById("customSlugInput");
        const btn = document.getElementById("shortenBtn");
        const longUrl = input.value.trim();
        const customSlug = customSlugInput.value.trim();

        // Validation
        if (!longUrl) {
          showToast("Empty URL", "Please enter a URL to shorten", "error");
          input.focus();
          return;
        }

        if (!isValidUrl(longUrl)) {
          showToast(
            "Invalid URL",
            "Make sure it starts with http:// or https://",
            "error"
          );
          input.focus();
          return;
        }

        // Show loading state
        btn.classList.add("loading");
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> Shortening...';

        let shortUrl = null;
        let apiUsed = "Local";

        try {
          // Netlify serverless function first (avoids CORS and ensures TinyURL format)
          if (!shortUrl) {
            try {
              btn.innerHTML = '<span class="spinner"></span> Creating short link...';
              const controller = new AbortController();
              const timeoutId = setTimeout(() => controller.abort(), 10000);
              const fnUrl = `/.netlify/functions/tinyurl?url=${encodeURIComponent(longUrl)}`;
              const resp = await fetch(fnUrl, { signal: controller.signal, headers: { 'Accept': 'application/json' }});
              clearTimeout(timeoutId);
              if (resp.ok) {
                const data = await resp.json();
                if (data && data.shortUrl && data.shortUrl.startsWith('http') && data.shortUrl.includes('tinyurl.com')) {
                  shortUrl = data.shortUrl;
                  apiUsed = data.provider || 'TinyURL (Function)';
                  console.log('âœ… Netlify function success:', shortUrl);
                }
              } else {
                console.log('Function error', resp.status);
              }
            } catch (e) {
              console.log('âŒ Function failed:', e.message);
            }
          }

          // Direct TinyURL fallback (client-side) if function unavailable
          if (!shortUrl) {
            try {
              btn.innerHTML = '<span class="spinner"></span> Creating short link...';
              const controller = new AbortController();
              const timeoutId = setTimeout(() => controller.abort(), 10000);
              const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`, { signal: controller.signal, headers: { 'Accept': 'text/plain' } });
              clearTimeout(timeoutId);
              if (response.ok) {
                const result = (await response.text()).trim();
                if (result && result.startsWith('http') && !result.toLowerCase().includes('error') && result.includes('tinyurl.com')) {
                  shortUrl = result;
                  apiUsed = "TinyURL";
                  console.log('âœ… TinyURL success:', shortUrl);
                }
              }
            } catch (e) {
              console.log('âŒ TinyURL failed:', e.message);
            }
          }

          // If all APIs failed, create local hash-based URL
          if (!shortUrl) {
            console.log('âš ï¸ TinyURL API unavailable, creating compact local link');
            btn.innerHTML = '<span class="spinner"></span> Creating short link...';
            
            const shortCode = customSlug && isValidSlug(customSlug) && !isSlugTaken(customSlug) 
              ? customSlug 
              : generateShortCode();
            
            // Store the mapping for redirect
            const localUrls = JSON.parse(localStorage.getItem('localShortUrls') || '{}');
            localUrls[shortCode] = longUrl;
            localStorage.setItem('localShortUrls', JSON.stringify(localUrls));
            
            // Get current domain or use "short.link" for display
            const currentDomain = window.location.hostname || 'yoursite.com';
            
            // Create SHORT display URL (what user sees)
            const displayUrl = `${currentDomain}/${shortCode}`;
            
            // Create ACTUAL working URL (with hash for routing)
            const actualUrl = window.location.origin + window.location.pathname.replace(/\/$/, '') + '#' + shortCode;
            
            shortUrl = displayUrl; // Display the SHORT version
            currentActualUrl = actualUrl; // Store the actual working URL
            apiUsed = "LinkShort";
            
            // Show helpful message
            showToast("Short Link Created", `Use: ${displayUrl}`, "success");
          } else {
            currentActualUrl = shortUrl; // For API URLs, actual and display are the same
          }

          // Extract the short code
          const shortCode = shortUrl.split('/').pop().split('#').pop();
          
          // Add to history
          urls.unshift({
            short: shortUrl, // This is what we display (clean short URL)
            actual: currentActualUrl || shortUrl, // This is what actually works
            original: longUrl,
            code: shortCode,
            created: new Date().toISOString(),
            isCustom: false,
            apiUsed: apiUsed,
            clicks: 0,
            analytics: {
              clickHistory: [],
              totalClicks: 0,
              uniqueVisitors: new Set(),
              devices: {},
              browsers: {},
              os: {},
              locations: {},
              referrers: {},
              hourlyData: {},
              dailyData: {},
            },
          });

          // Keep only last 20
          if (urls.length > 20) urls.pop();

          currentShortUrl = shortUrl; // Display URL

          // Save and update UI
          saveUrls();
          updateResult();
          updateHistory();

          // Clear inputs
          input.value = "";
          customSlugInput.value = "";
          document.getElementById("slugInfo").textContent = "";
          document.getElementById("slugInfo").className = "slug-info";

          // Reset button
          btn.classList.remove("loading");
          btn.disabled = false;
          btn.innerHTML = `
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="margin-right: 6px">
              <polyline points="16 18 22 12 16 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
              <polyline points="8 6 2 12 8 18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
            </svg>
            Shorten URL
          `;

          // Show success modal
          showSuccessModal(shortUrl);
          
          // Show appropriate success message
          if (apiUsed === "TinyURL") {
            showToast("âœ… Success!", `Short link: ${shortUrl}`, "success");
          } else if (apiUsed === "LinkShort") {
            showToast("âœ… Created!", `Short: ${shortUrl} (works on this site)`, "success");
          } else {
            showToast("âœ… Success!", `Shortened with ${apiUsed}`, "success");
          }
          
        } catch (error) {
          console.error('Error:', error);
          
          // Emergency fallback - always create a local short link
          const shortCode = generateShortCode();
          
          // Store mapping
          const localUrls = JSON.parse(localStorage.getItem('localShortUrls') || '{}');
          localUrls[shortCode] = longUrl;
          localStorage.setItem('localShortUrls', JSON.stringify(localUrls));
          
          // Create clean URL
          const baseUrl = window.location.origin + window.location.pathname.replace(/\/$/, '');
          shortUrl = baseUrl + '#' + shortCode;
          
          urls.unshift({
            short: shortUrl,
            actual: shortUrl,
            original: longUrl,
            code: shortCode,
            created: new Date().toISOString(),
            isCustom: false,
            apiUsed: "LinkShort Local",
            clicks: 0,
            analytics: {
              clickHistory: [],
              totalClicks: 0,
              uniqueVisitors: new Set(),
              devices: {},
              browsers: {},
              os: {},
              locations: {},
              referrers: {},
              hourlyData: {},
              dailyData: {},
            },
          });

          if (urls.length > 20) urls.pop();
          currentShortUrl = shortUrl;
          currentActualUrl = shortUrl;
          
          saveUrls();
          updateResult();
          updateHistory();
          
          input.value = "";
          customSlugInput.value = "";
          document.getElementById("slugInfo").textContent = "";
          document.getElementById("slugInfo").className = "slug-info";
          
          // Reset button
          btn.classList.remove("loading");
          btn.disabled = false;
          btn.innerHTML = `
            <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="margin-right: 6px">
              <polyline points="16 18 22 12 16 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
              <polyline points="8 6 2 12 8 18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline>
            </svg>
            Shorten URL
          `;
          
          showSuccessModal(shortUrl);
          showToast("Success!", "Link created successfully!", "success");
        }
      }

      // Update result section
      function updateResult() {
        const section = document.getElementById("resultSection");
        const textEl = document.getElementById("shortUrlText");

        if (currentShortUrl) {
          textEl.textContent = currentShortUrl;
          section.classList.add("show");

          // Generate QR code after section is visible (use TinyURL)
          setTimeout(() => {
            generateQRCode(currentShortUrl);
          }, 100);

          // Scroll to result smoothly
          setTimeout(() => {
            section.scrollIntoView({ behavior: "smooth", block: "nearest" });
          }, 200);
        }
      }

      // Copy URL to clipboard
      async function copyUrl() {
        if (!currentShortUrl) return;

        try {
          await navigator.clipboard.writeText(currentShortUrl);
          showToast("Copied!", "TinyURL copied to clipboard", "success");
        } catch (err) {
          // Fallback for older browsers
          const textarea = document.createElement("textarea");
          textarea.value = currentShortUrl;
          textarea.style.position = "fixed";
          textarea.style.left = "-9999px";
          document.body.appendChild(textarea);
          textarea.select();

          try {
            document.execCommand("copy");
            showToast("Copied!", "TinyURL copied to clipboard", "success");
          } catch (e) {
            showToast("Copy Failed", "Please copy manually", "error");
          }

          document.body.removeChild(textarea);
        }
      }

      // Open shortened URL (opens the actual short link to test it)
      function openShort() {
        if (!currentShortUrl) return;

        // Find URL object and increment click count
        const urlObj = urls.find((u) => u.short === currentShortUrl);
        if (urlObj) {
          urlObj.clicks = (urlObj.clicks || 0) + 1;
          saveUrls();
          if (currentUser) {
            updateDashboard();
          }
          // Open the shortened URL itself (not the original)
          // This lets users test if the shortened link works
          window.open(currentShortUrl, "_blank", "noopener,noreferrer");
        }
      }

      // Copy from history
      async function copyFromHistory(shortUrl) {
        try {
          await navigator.clipboard.writeText(shortUrl);
          showToast("Copied!", shortUrl, "success");
        } catch (err) {
          showToast("Copy Failed", "Please try again", "error");
        }
      }

      // Update history list
      function updateHistory() {
        const list = document.getElementById("historyList");
        const count = document.getElementById("historyCount");

        count.textContent = urls.length;

        if (urls.length === 0) {
          list.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ”—</div>
                        <div class="empty-state-text">No shortened links yet</div>
                    </div>
                `;
          return;
        }

        list.innerHTML = urls
          .map(
            (u) => `
                <div class="history-item" onclick="copyFromHistory('${u.short.replace(
                  /'/g,
                  "\\'"
                )}')">
                    <div class="history-item-short">${u.short}</div>
                    <div class="history-item-original">${u.original}</div>
                </div>
            `
          )
          .join("");
      }

      // Clear input
      function clearInput() {
        const input = document.getElementById("urlInput");
        const customSlugInput = document.getElementById("customSlugInput");
        input.value = "";
        customSlugInput.value = "";
        document.getElementById("slugInfo").textContent = "";
        document.getElementById("slugInfo").className = "slug-info";
        input.focus();
      }

      // Clear history
      function clearHistory() {
        if (urls.length === 0) {
          showToast("Already Empty", "No history to clear", "info");
          return;
        }

        if (confirm("Are you sure you want to clear all history?")) {
          urls = [];
          currentShortUrl = "";
          saveUrls();
          updateHistory();
          document.getElementById("resultSection").classList.remove("show");
          showToast("Cleared", "History has been cleared", "success");
        }
      }

      // Show about
      function showAbout() {
        const modal = document.getElementById("aboutModal");
        if (!modal) return;
        modal.classList.add("show");
        document.body.classList.add("modal-open");
      }

      // Close about modal
      function closeAboutModal(event) {
        // Only close if clicking overlay or close button (not modal content)
        if (
          !event ||
          event.target.id === "aboutModal" ||
          event.target.classList.contains("modal-close")
        ) {
          const modal = document.getElementById("aboutModal");
          if (!modal) return;
          modal.classList.remove("show");
          // If no other modals are open, remove modal-open class
          const anyOpen = document.querySelector('.modal-overlay.show');
          if (!anyOpen) document.body.classList.remove("modal-open");
        }
      }

      // Show recent links modal
      function showRecentLinks() {
        const modal = document.getElementById("recentLinksModal");
        if (!modal) return;
        modal.classList.add("show");
        document.body.classList.add("modal-open");
        updateRecentLinksModal();
      }

      // Close recent links modal
      function closeRecentLinksModal(event) {
        if (
          !event ||
          event.target.id === "recentLinksModal" ||
          event.target.classList.contains("modal-close")
        ) {
          const modal = document.getElementById("recentLinksModal");
          if (!modal) return;
          modal.classList.remove("show");
          const anyOpen = document.querySelector('.modal-overlay.show');
          if (!anyOpen) document.body.classList.remove("modal-open");
        }
      }

      // Update recent links in modal
      function updateRecentLinksModal() {
        const historyList = document.getElementById("historyListModal");
        const allHistory = JSON.parse(localStorage.getItem("urlHistory") || "[]");
        
        if (allHistory.length === 0) {
          historyList.innerHTML = `
            <div class="empty-state">
              <div class="empty-state-icon">ðŸ”—</div>
              <div class="empty-state-text">No shortened links yet</div>
            </div>
          `;
          return;
        }

        historyList.innerHTML = allHistory
          .slice()
          .reverse()
          .map((item) => {
            const date = new Date(item.timestamp);
            return `
              <div class="history-item" onclick="window.open('${item.short}', '_blank')">
                <div class="history-item-short">${item.short}</div>
                <div class="history-item-original">${item.original}</div>
                <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
                  ${date.toLocaleDateString()} ${date.toLocaleTimeString()}
                </div>
              </div>
            `;
          })
          .join("");
      }

      // Close modal with Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          try { closeAboutModal(); } catch {}
          try { closeRecentLinksModal(); } catch {}
          try { closeSuccessModal(); } catch {}
        }
      });

      // Success Modal Functions
      function showSuccessModal(url) {
        const modal = document.getElementById("successModal");
        const urlDisplay = document.getElementById("successUrlDisplay");
        const actualUrlInfo = document.getElementById("actualUrlInfo");
        
        urlDisplay.textContent = url;
        
        // Hide actual URL info for real TinyURL links (they're the same)
        actualUrlInfo.style.display = "none";
        
        modal.classList.add("show");
        document.body.classList.add("modal-open");
      }

      function closeSuccessModal() {
        const modal = document.getElementById("successModal");
        modal.classList.remove("show");
        const anyOpen = document.querySelector('.modal-overlay.show');
        if (!anyOpen) document.body.classList.remove("modal-open");
      }

      async function copyFromModal() {
        if (!currentShortUrl) return;
        
        try {
          // Copy the actual working URL (or display URL if they're the same)
          const urlToCopy = currentActualUrl || currentShortUrl;
          await navigator.clipboard.writeText(urlToCopy);
          
          // Show different message based on what was copied
          if (currentActualUrl && currentActualUrl !== currentShortUrl) {
            showToast("Copied!", "Working link copied to clipboard", "success");
          } else {
            showToast("Copied!", "Short link copied to clipboard", "success");
          }
          
          // Change button text temporarily
          const btn = event.target.closest('.success-btn-primary');
          const originalHTML = btn.innerHTML;
          btn.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12" stroke-width="2"></polyline>
            </svg>
            Copied!
          `;
          
          setTimeout(() => {
            btn.innerHTML = originalHTML;
          }, 2000);
        } catch (err) {
          showToast("Copy Failed", "Please try again", "error");
        }
      }

      // Load profile picture
      function loadProfilePicture() {
        const avatar = document.getElementById("creatorAvatar");
        if (!avatar) return;

        // Load the profile image
        const profileImageUrl = "profile.jpeg";

        const img = document.createElement("img");
        img.src = profileImageUrl;
        img.alt = "Saimum Arafat";
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "cover";

        img.onload = function () {
          avatar.innerHTML = "";
          avatar.appendChild(img);
        };

        img.onerror = function () {
          // Keep the initials if image fails to load
          console.log("Profile picture failed to load, using initials");
        };
      }

      // QR Code Generation - Client-side implementation
      // Using a reliable client-side QR generator for offline functionality
      
      function generateQRCode(url) {
        console.log('=== generateQRCode called ===');
        console.log('URL:', url);
        
        const canvas = document.getElementById("qrCanvas");
        if (!canvas) {
          console.error('ERROR: Canvas element qrCanvas not found!');
          return;
        }
        
        console.log('Canvas found:', canvas);
        console.log('Canvas parent:', canvas.parentElement);
        
        const ctx = canvas.getContext("2d");
        if (!ctx) {
          console.error('ERROR: Could not get 2d context!');
          return;
        }
        
        console.log('Context obtained');
        
        try {
          // Clear any previous QR code
          const wrapper = document.querySelector(".qr-code-wrapper");
          if (wrapper) {
            const existingImg = wrapper.querySelector("img.qr-fallback-img");
            if (existingImg) existingImg.remove();
          }
          
          console.log('Generating QR code for URL:', url);
          
          // Auto-detect the best QR version for the URL length
          // Start with version 5 (good for most URLs up to ~100 chars)
          let typeNumber = 5;
          if (url.length > 100) typeNumber = 7;
          if (url.length > 150) typeNumber = 10;
          
          console.log('Type number:', typeNumber, 'for URL length:', url.length);
          
          // Generate QR code using embedded library
          // Error correction level: 0=M (Medium, 15% recovery)
          const qr = new QRCodeLib(typeNumber, 0);
          console.log('QRCodeLib instance created');
          
          qr.addData(url);
          console.log('Data added to QR');
          
          qr.make();
          console.log('QR.make() called');
          
          const moduleCount = qr.getModuleCount();
          const cellSize = Math.floor(220 / moduleCount);
          const size = cellSize * moduleCount;
          
          console.log('QR Module count:', moduleCount, 'Cell size:', cellSize, 'Canvas size:', size);
          
          canvas.width = size;
          canvas.height = size;
          
          console.log('Canvas resized to:', canvas.width, 'x', canvas.height);
          
          // Draw dark background to blend with UI theme
          ctx.fillStyle = 'rgba(29, 29, 31, 0.95)';
          ctx.fillRect(0, 0, size, size);
          console.log('Dark background drawn');
          
          // Draw QR modules with vibrant blue accent color
          const gradient = ctx.createLinearGradient(0, 0, size, size);
          gradient.addColorStop(0, '#0a84ff');
          gradient.addColorStop(1, '#0070d6');
          ctx.fillStyle = gradient;
          
          let modulesDrawn = 0;
          for (let row = 0; row < moduleCount; row++) {
            for (let col = 0; col < moduleCount; col++) {
              if (qr.isDark(row, col)) {
                ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                modulesDrawn++;
              }
            }
          }
          
          console.log('QR modules drawn:', modulesDrawn, 'out of', moduleCount * moduleCount);
          console.log('QR code generated successfully!');
        } catch (error) {
          console.error('QR generation error:', error);
          console.error('Error stack:', error.stack);
          showToast("QR Error", "Failed to generate QR code: " + error.message, "error");
        }
      }
      
      // ============================================
      // Embedded QR Code Library (MIT License)
      // Based on QRCode.js by Kazuhiko Arase
      // ============================================
      
      var QRCodeLib = (function() {
        
        // QR Code constants
        var QRMode = {
          MODE_NUMBER: 1 << 0,
          MODE_ALPHA_NUM: 1 << 1,
          MODE_8BIT_BYTE: 1 << 2,
          MODE_KANJI: 1 << 3
        };
        
        var QRErrorCorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };
        
        var QRMaskPattern = {
          PATTERN000: 0, PATTERN001: 1, PATTERN010: 2, PATTERN011: 3,
          PATTERN100: 4, PATTERN101: 5, PATTERN110: 6, PATTERN111: 7
        };
        
        function QRCode(typeNumber, errorCorrectLevel) {
          this.typeNumber = typeNumber;
          this.errorCorrectLevel = errorCorrectLevel;
          this.modules = null;
          this.moduleCount = 0;
          this.dataCache = null;
          this.dataList = [];
        }
        
        QRCode.prototype = {
          addData: function(data) {
            var newData = new QR8bitByte(data);
            this.dataList.push(newData);
            this.dataCache = null;
          },
          
          isDark: function(row, col) {
            if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {
              throw new Error(row + "," + col);
            }
            return this.modules[row][col];
          },
          
          getModuleCount: function() {
            return this.moduleCount;
          },
          
          make: function() {
            this.makeImpl(false, this.getBestMaskPattern());
          },
          
          makeImpl: function(test, maskPattern) {
            this.moduleCount = this.typeNumber * 4 + 17;
            this.modules = new Array(this.moduleCount);
            
            for (var row = 0; row < this.moduleCount; row++) {
              this.modules[row] = new Array(this.moduleCount);
              for (var col = 0; col < this.moduleCount; col++) {
                this.modules[row][col] = null;
              }
            }
            
            this.setupPositionProbePattern(0, 0);
            this.setupPositionProbePattern(this.moduleCount - 7, 0);
            this.setupPositionProbePattern(0, this.moduleCount - 7);
            this.setupPositionAdjustPattern();
            this.setupTimingPattern();
            this.setupTypeInfo(test, maskPattern);
            
            if (this.typeNumber >= 7) {
              this.setupTypeNumber(test);
            }
            
            if (this.dataCache == null) {
              this.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);
            }
            
            this.mapData(this.dataCache, maskPattern);
          },
          
          setupPositionProbePattern: function(row, col) {
            for (var r = -1; r <= 7; r++) {
              if (row + r <= -1 || this.moduleCount <= row + r) continue;
              for (var c = -1; c <= 7; c++) {
                if (col + c <= -1 || this.moduleCount <= col + c) continue;
                if ((0 <= r && r <= 6 && (c == 0 || c == 6)) ||
                    (0 <= c && c <= 6 && (r == 0 || r == 6)) ||
                    (2 <= r && r <= 4 && 2 <= c && c <= 4)) {
                  this.modules[row + r][col + c] = true;
                } else {
                  this.modules[row + r][col + c] = false;
                }
              }
            }
          },
          
          getBestMaskPattern: function() {
            var minLostPoint = 0;
            var pattern = 0;
            for (var i = 0; i < 8; i++) {
              this.makeImpl(true, i);
              var lostPoint = QRUtil.getLostPoint(this);
              if (i == 0 || minLostPoint > lostPoint) {
                minLostPoint = lostPoint;
                pattern = i;
              }
            }
            return pattern;
          },
          
          setupTimingPattern: function() {
            for (var r = 8; r < this.moduleCount - 8; r++) {
              if (this.modules[r][6] != null) continue;
              this.modules[r][6] = (r % 2 == 0);
            }
            for (var c = 8; c < this.moduleCount - 8; c++) {
              if (this.modules[6][c] != null) continue;
              this.modules[6][c] = (c % 2 == 0);
            }
          },
          
          setupPositionAdjustPattern: function() {
            var pos = QRUtil.getPatternPosition(this.typeNumber);
            for (var i = 0; i < pos.length; i++) {
              for (var j = 0; j < pos.length; j++) {
                var row = pos[i];
                var col = pos[j];
                if (this.modules[row][col] != null) continue;
                for (var r = -2; r <= 2; r++) {
                  for (var c = -2; c <= 2; c++) {
                    if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {
                      this.modules[row + r][col + c] = true;
                    } else {
                      this.modules[row + r][col + c] = false;
                    }
                  }
                }
              }
            }
          },
          
          setupTypeNumber: function(test) {
            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);
            for (var i = 0; i < 18; i++) {
              var mod = (!test && ((bits >> i) & 1) == 1);
              this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;
            }
            for (var i = 0; i < 18; i++) {
              var mod = (!test && ((bits >> i) & 1) == 1);
              this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;
            }
          },
          
          setupTypeInfo: function(test, maskPattern) {
            var data = (this.errorCorrectLevel << 3) | maskPattern;
            var bits = QRUtil.getBCHTypeInfo(data);
            for (var i = 0; i < 15; i++) {
              var mod = (!test && ((bits >> i) & 1) == 1);
              if (i < 6) {
                this.modules[i][8] = mod;
              } else if (i < 8) {
                this.modules[i + 1][8] = mod;
              } else {
                this.modules[this.moduleCount - 15 + i][8] = mod;
              }
            }
            for (var i = 0; i < 15; i++) {
              var mod = (!test && ((bits >> i) & 1) == 1);
              if (i < 8) {
                this.modules[8][this.moduleCount - i - 1] = mod;
              } else if (i < 9) {
                this.modules[8][15 - i - 1 + 1] = mod;
              } else {
                this.modules[8][15 - i - 1] = mod;
              }
            }
            this.modules[this.moduleCount - 8][8] = (!test);
          },
          
          mapData: function(data, maskPattern) {
            var inc = -1;
            var row = this.moduleCount - 1;
            var bitIndex = 7;
            var byteIndex = 0;
            
            for (var col = this.moduleCount - 1; col > 0; col -= 2) {
              if (col == 6) col--;
              while (true) {
                for (var c = 0; c < 2; c++) {
                  if (this.modules[row][col - c] == null) {
                    var dark = false;
                    if (byteIndex < data.length) {
                      dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);
                    }
                    var mask = QRUtil.getMask(maskPattern, row, col - c);
                    if (mask) {
                      dark = !dark;
                    }
                    this.modules[row][col - c] = dark;
                    bitIndex--;
                    if (bitIndex == -1) {
                      byteIndex++;
                      bitIndex = 7;
                    }
                  }
                }
                row += inc;
                if (row < 0 || this.moduleCount <= row) {
                  row -= inc;
                  inc = -inc;
                  break;
                }
              }
            }
          }
        };
        
        QRCode.PAD0 = 0xEC;
        QRCode.PAD1 = 0x11;
        
        QRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {
          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);
          var buffer = new QRBitBuffer();
          
          for (var i = 0; i < dataList.length; i++) {
            var data = dataList[i];
            buffer.put(data.mode, 4);
            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));
            data.write(buffer);
          }
          
          var totalDataCount = 0;
          for (var i = 0; i < rsBlocks.length; i++) {
            totalDataCount += rsBlocks[i].dataCount;
          }
          
          if (buffer.getLengthInBits() > totalDataCount * 8) {
            throw new Error("code length overflow. (" + buffer.getLengthInBits() + ">" + totalDataCount * 8 + ")");
          }
          
          if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {
            buffer.put(0, 4);
          }
          
          while (buffer.getLengthInBits() % 8 != 0) {
            buffer.putBit(false);
          }
          
          while (true) {
            if (buffer.getLengthInBits() >= totalDataCount * 8) break;
            buffer.put(QRCode.PAD0, 8);
            if (buffer.getLengthInBits() >= totalDataCount * 8) break;
            buffer.put(QRCode.PAD1, 8);
          }
          
          return QRCode.createBytes(buffer, rsBlocks);
        };
        
        QRCode.createBytes = function(buffer, rsBlocks) {
          var offset = 0;
          var maxDcCount = 0;
          var maxEcCount = 0;
          var dcdata = new Array(rsBlocks.length);
          var ecdata = new Array(rsBlocks.length);
          
          for (var r = 0; r < rsBlocks.length; r++) {
            var dcCount = rsBlocks[r].dataCount;
            var ecCount = rsBlocks[r].totalCount - dcCount;
            maxDcCount = Math.max(maxDcCount, dcCount);
            maxEcCount = Math.max(maxEcCount, ecCount);
            dcdata[r] = new Array(dcCount);
            
            for (var i = 0; i < dcdata[r].length; i++) {
              dcdata[r][i] = 0xff & buffer.buffer[i + offset];
            }
            offset += dcCount;
            
            var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);
            var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);
            var modPoly = rawPoly.mod(rsPoly);
            ecdata[r] = new Array(rsPoly.getLength() - 1);
            for (var i = 0; i < ecdata[r].length; i++) {
              var modIndex = i + modPoly.getLength() - ecdata[r].length;
              ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;
            }
          }
          
          var totalCodeCount = 0;
          for (var i = 0; i < rsBlocks.length; i++) {
            totalCodeCount += rsBlocks[i].totalCount;
          }
          
          var data = new Array(totalCodeCount);
          var index = 0;
          
          for (var i = 0; i < maxDcCount; i++) {
            for (var r = 0; r < rsBlocks.length; r++) {
              if (i < dcdata[r].length) {
                data[index++] = dcdata[r][i];
              }
            }
          }
          
          for (var i = 0; i < maxEcCount; i++) {
            for (var r = 0; r < rsBlocks.length; r++) {
              if (i < ecdata[r].length) {
                data[index++] = ecdata[r][i];
              }
            }
          }
          
          return data;
        };
        
        // 8-bit byte mode
        function QR8bitByte(data) {
          this.mode = QRMode.MODE_8BIT_BYTE;
          this.data = data;
        }
        
        QR8bitByte.prototype = {
          getLength: function() {
            return this.data.length;
          },
          write: function(buffer) {
            for (var i = 0; i < this.data.length; i++) {
              buffer.put(this.data.charCodeAt(i), 8);
            }
          }
        };
        
        // Bit buffer
        function QRBitBuffer() {
          this.buffer = [];
          this.length = 0;
        }
        
        QRBitBuffer.prototype = {
          get: function(index) {
            var bufIndex = Math.floor(index / 8);
            return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1;
          },
          put: function(num, length) {
            for (var i = 0; i < length; i++) {
              this.putBit(((num >>> (length - i - 1)) & 1) == 1);
            }
          },
          getLengthInBits: function() {
            return this.length;
          },
          putBit: function(bit) {
            var bufIndex = Math.floor(this.length / 8);
            if (this.buffer.length <= bufIndex) {
              this.buffer.push(0);
            }
            if (bit) {
              this.buffer[bufIndex] |= (0x80 >>> (this.length % 8));
            }
            this.length++;
          }
        };
        
        // RS Block
        function QRRSBlock(totalCount, dataCount) {
          this.totalCount = totalCount;
          this.dataCount = dataCount;
        }
        
        QRRSBlock.RS_BLOCK_TABLE = [
          [1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9],
          [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16],
          [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13],
          [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9],
          [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12],
          [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15],
          [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14],
          [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15],
          [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13],
          [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16]
        ];
        
        QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {
          var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);
          if (rsBlock == undefined) {
            throw new Error("bad rs block @ typeNumber:" + typeNumber + "/errorCorrectLevel:" + errorCorrectLevel);
          }
          var length = rsBlock.length / 3;
          var list = [];
          for (var i = 0; i < length; i++) {
            var count = rsBlock[i * 3 + 0];
            var totalCount = rsBlock[i * 3 + 1];
            var dataCount = rsBlock[i * 3 + 2];
            for (var j = 0; j < count; j++) {
              list.push(new QRRSBlock(totalCount, dataCount));
            }
          }
          return list;
        };
        
        QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {
          switch (errorCorrectLevel) {
            case QRErrorCorrectLevel.L: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];
            case QRErrorCorrectLevel.M: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];
            case QRErrorCorrectLevel.Q: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];
            case QRErrorCorrectLevel.H: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];
            default: return undefined;
          }
        };
        
        // Polynomial
        function QRPolynomial(num, shift) {
          if (num.length == undefined) throw new Error(num.length + "/" + shift);
          var offset = 0;
          while (offset < num.length && num[offset] == 0) offset++;
          this.num = new Array(num.length - offset + shift);
          for (var i = 0; i < num.length - offset; i++) {
            this.num[i] = num[i + offset];
          }
        }
        
        QRPolynomial.prototype = {
          get: function(index) {
            return this.num[index];
          },
          getLength: function() {
            return this.num.length;
          },
          multiply: function(e) {
            var num = new Array(this.getLength() + e.getLength() - 1);
            for (var i = 0; i < this.getLength(); i++) {
              for (var j = 0; j < e.getLength(); j++) {
                num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));
              }
            }
            return new QRPolynomial(num, 0);
          },
          mod: function(e) {
            if (this.getLength() - e.getLength() < 0) return this;
            var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));
            var num = new Array(this.getLength());
            for (var i = 0; i < this.getLength(); i++) {
              num[i] = this.get(i);
            }
            for (var i = 0; i < e.getLength(); i++) {
              num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);
            }
            return new QRPolynomial(num, 0).mod(e);
          }
        };
        
        // Math utilities
        var QRMath = {
          glog: function(n) {
            if (n < 1) throw new Error("glog(" + n + ")");
            return QRMath.LOG_TABLE[n];
          },
          gexp: function(n) {
            while (n < 0) n += 255;
            while (n >= 256) n -= 255;
            return QRMath.EXP_TABLE[n];
          },
          EXP_TABLE: new Array(256),
          LOG_TABLE: new Array(256)
        };
        
        for (var i = 0; i < 8; i++) {
          QRMath.EXP_TABLE[i] = 1 << i;
        }
        for (var i = 8; i < 256; i++) {
          QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];
        }
        for (var i = 0; i < 255; i++) {
          QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;
        }
        
        // Utilities
        var QRUtil = {
          PATTERN_POSITION_TABLE: [
            [], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42],
            [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62],
            [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78],
            [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90]
          ],
          
          G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),
          G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),
          G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),
          
          getBCHTypeInfo: function(data) {
            var d = data << 10;
            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {
              d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));
            }
            return ((data << 10) | d) ^ QRUtil.G15_MASK;
          },
          
          getBCHTypeNumber: function(data) {
            var d = data << 12;
            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {
              d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));
            }
            return (data << 12) | d;
          },
          
          getBCHDigit: function(data) {
            var digit = 0;
            while (data != 0) {
              digit++;
              data >>>= 1;
            }
            return digit;
          },
          
          getPatternPosition: function(typeNumber) {
            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];
          },
          
          getMask: function(maskPattern, i, j) {
            switch (maskPattern) {
              case QRMaskPattern.PATTERN000: return (i + j) % 2 == 0;
              case QRMaskPattern.PATTERN001: return i % 2 == 0;
              case QRMaskPattern.PATTERN010: return j % 3 == 0;
              case QRMaskPattern.PATTERN011: return (i + j) % 3 == 0;
              case QRMaskPattern.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;
              case QRMaskPattern.PATTERN101: return (i * j) % 2 + (i * j) % 3 == 0;
              case QRMaskPattern.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 == 0;
              case QRMaskPattern.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 == 0;
              default: throw new Error("bad maskPattern:" + maskPattern);
            }
          },
          
          getErrorCorrectPolynomial: function(errorCorrectLength) {
            var a = new QRPolynomial([1], 0);
            for (var i = 0; i < errorCorrectLength; i++) {
              a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));
            }
            return a;
          },
          
          getLengthInBits: function(mode, type) {
            if (1 <= type && type < 10) {
              switch (mode) {
                case QRMode.MODE_NUMBER: return 10;
                case QRMode.MODE_ALPHA_NUM: return 9;
                case QRMode.MODE_8BIT_BYTE: return 8;
                case QRMode.MODE_KANJI: return 8;
                default: throw new Error("mode:" + mode);
              }
            } else if (type < 27) {
              switch (mode) {
                case QRMode.MODE_NUMBER: return 12;
                case QRMode.MODE_ALPHA_NUM: return 11;
                case QRMode.MODE_8BIT_BYTE: return 16;
                case QRMode.MODE_KANJI: return 10;
                default: throw new Error("mode:" + mode);
              }
            } else if (type < 41) {
              switch (mode) {
                case QRMode.MODE_NUMBER: return 14;
                case QRMode.MODE_ALPHA_NUM: return 13;
                case QRMode.MODE_8BIT_BYTE: return 16;
                case QRMode.MODE_KANJI: return 12;
                default: throw new Error("mode:" + mode);
              }
            } else {
              throw new Error("type:" + type);
            }
          },
          
          getLostPoint: function(qrCode) {
            var moduleCount = qrCode.getModuleCount();
            var lostPoint = 0;
            
            for (var row = 0; row < moduleCount; row++) {
              for (var col = 0; col < moduleCount; col++) {
                var sameCount = 0;
                var dark = qrCode.isDark(row, col);
                for (var r = -1; r <= 1; r++) {
                  if (row + r < 0 || moduleCount <= row + r) continue;
                  for (var c = -1; c <= 1; c++) {
                    if (col + c < 0 || moduleCount <= col + c) continue;
                    if (r == 0 && c == 0) continue;
                    if (dark == qrCode.isDark(row + r, col + c)) {
                      sameCount++;
                    }
                  }
                }
                if (sameCount > 5) {
                  lostPoint += (3 + sameCount - 5);
                }
              }
            }
            
            for (var row = 0; row < moduleCount - 1; row++) {
              for (var col = 0; col < moduleCount - 1; col++) {
                var count = 0;
                if (qrCode.isDark(row, col)) count++;
                if (qrCode.isDark(row + 1, col)) count++;
                if (qrCode.isDark(row, col + 1)) count++;
                if (qrCode.isDark(row + 1, col + 1)) count++;
                if (count == 0 || count == 4) {
                  lostPoint += 3;
                }
              }
            }
            
            for (var row = 0; row < moduleCount; row++) {
              for (var col = 0; col < moduleCount - 6; col++) {
                if (qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6)) {
                  lostPoint += 40;
                }
              }
            }
            
            for (var col = 0; col < moduleCount; col++) {
              for (var row = 0; row < moduleCount - 6; row++) {
                if (qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col)) {
                  lostPoint += 40;
                }
              }
            }
            
            var darkCount = 0;
            for (var col = 0; col < moduleCount; col++) {
              for (var row = 0; row < moduleCount; row++) {
                if (qrCode.isDark(row, col)) {
                  darkCount++;
                }
              }
            }
            
            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;
            lostPoint += ratio * 10;
            
            return lostPoint;
          }
        };
        
        return QRCode;
      })();

      // Show QR Code
      function showQRCode() {
        if (!currentShortUrl) return;

        const container = document.getElementById("qrCodeContainer");
        if (container.style.display === "none") {
          container.style.display = "block";
          setTimeout(() => {
            container.scrollIntoView({ behavior: "smooth", block: "nearest" });
          }, 100);
        } else {
          container.style.display = "none";
        }
      }

      // Download QR Code
      function downloadQRCode() {
        if (!currentShortUrl) return;
        
        try {
          const canvas = document.getElementById("qrCanvas");
          const urlObj = urls.find((u) => u.short === currentShortUrl);
          const filename = urlObj ? `qr-${urlObj.code}.png` : "qr-code.png";
          
          // Convert canvas to data URL and download
          const link = document.createElement("a");
          link.download = filename;
          link.href = canvas.toDataURL("image/png");
          link.click();
          
          showToast("Downloaded!", "QR code saved successfully", "success");
        } catch (err) {
          console.error("Unable to download QR from canvas:", err);
          showToast(
            "Download Failed",
            "Unable to download QR code. Please try again.",
            "error"
          );
        }
      }

      // Admin Panel Functions
      function loadAdminData() {
        if (
          !currentUser ||
          !users[currentUser.email] ||
          !users[currentUser.email].isAdmin
        ) {
          return;
        }

        // Calculate system stats
        const allUsers = Object.keys(users);
        let totalLinks = 0;
        let totalClicks = 0;

        allUsers.forEach((email) => {
          const userUrls = users[email].urls || [];
          totalLinks += userUrls.length;
          totalClicks += userUrls.reduce(
            (sum, url) => sum + (url.clicks || 0),
            0
          );
        });

        // Update admin stats
        document.getElementById("adminTotalUsers").textContent =
          allUsers.length;
        document.getElementById("adminTotalLinks").textContent = totalLinks;
        document.getElementById("adminTotalClicks").textContent = totalClicks;

        // Calculate storage
        const storageData = JSON.stringify(users);
        const storageSize = (new Blob([storageData]).size / 1024).toFixed(2);
        document.getElementById("storageUsed").textContent = storageSize;

        // Load users list
        loadAdminUsersList();
      }

      function loadAdminUsersList() {
        const container = document.getElementById("adminUsersList");
        const allUsers = Object.keys(users);

        container.innerHTML = allUsers
          .map((email) => {
            const user = users[email];
            const userLinks = user.urls ? user.urls.length : 0;
            const userClicks = user.urls
              ? user.urls.reduce((sum, url) => sum + (url.clicks || 0), 0)
              : 0;
            const isAdmin = user.isAdmin ? "ðŸ‘‘" : "";
            const joinDate = new Date(
              user.createdAt || Date.now()
            ).toLocaleDateString();

            return `
                    <div class="link-card">
                        <div class="link-card-header">
                            <div class="link-card-info">
                                <div class="link-card-short" style="color: var(--text-primary);">
                                    ${isAdmin} ${user.name || "Anonymous"}
                                </div>
                                <div class="link-card-original">${email}</div>
                            </div>
                            <div class="link-card-actions">
                                ${
                                  !user.isAdmin
                                    ? `<button class="link-action-btn delete" onclick="deleteUser('${email.replace(
                                        /'/g,
                                        "\\'"
                                      )}')">ðŸ—‘ï¸</button>`
                                    : ""
                                }
                            </div>
                        </div>
                        <div class="link-card-meta">
                            <div class="link-meta-item">
                                <span class="link-meta-icon">ðŸ”—</span>
                                <span>${userLinks} links</span>
                            </div>
                            <div class="link-meta-item">
                                <span class="link-meta-icon">ðŸ‘ï¸</span>
                                <span>${userClicks} clicks</span>
                            </div>
                            <div class="link-meta-item">
                                <span class="link-meta-icon">ðŸ“…</span>
                                <span>Joined ${joinDate}</span>
                            </div>
                        </div>
                    </div>
                `;
          })
          .join("");
      }

      function deleteUser(email) {
        if (
          !confirm(
            `Are you sure you want to delete user: ${email}?\n\nThis will permanently delete all their links and data.`
          )
        ) {
          return;
        }

        if (users[email].isAdmin) {
          showToast("Error", "Cannot delete admin users", "error");
          return;
        }

        delete users[email];
        localStorage.setItem("linkShortUsers", JSON.stringify(users));

        showToast(
          "User Deleted",
          `${email} has been removed from the system`,
          "success"
        );
        loadAdminData();
      }

      function exportAllData() {
        const dataStr = JSON.stringify(users, null, 2);
        const dataBlob = new Blob([dataStr], { type: "application/json" });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement("a");
        link.href = url;
        link.download = `linkshort-backup-${
          new Date().toISOString().split("T")[0]
        }.json`;
        link.click();

        localStorage.setItem("lastBackup", new Date().toISOString());
        document.getElementById("lastBackup").textContent =
          new Date().toLocaleString();

        showToast(
          "Backup Complete!",
          "All data has been exported successfully",
          "success"
        );
      }

      function clearAllData() {
        if (
          !confirm(
            "âš ï¸ WARNING: This will delete ALL users and links!\n\nThis action cannot be undone. Are you absolutely sure?"
          )
        ) {
          return;
        }

        if (
          !confirm("Final confirmation: Type YES in the next prompt to proceed")
        ) {
          return;
        }

        const confirmation = prompt(
          "Type YES to confirm deletion of all data:"
        );
        if (confirmation !== "YES") {
          showToast("Cancelled", "Data deletion was cancelled", "error");
          return;
        }

        // Keep only admin account
        const adminEmail = "admin@linkshort.io";
        const adminData = users[adminEmail];

        users = {};
        users[adminEmail] = adminData;

        localStorage.setItem("linkShortUsers", JSON.stringify(users));

        showToast(
          "System Reset",
          "All data cleared. Admin account preserved.",
          "success"
        );
        loadAdminData();
      }

      // Initialize on load
      init();
      loadProfilePicture();
    </script>
  </body>
</html>
